<span data-ttu-id="d9763-101">如果想要了解管理应用程序的配置机密时可能出现的问题, 请不要再深入了解关于高级开发人员的 Steve。</span><span class="sxs-lookup"><span data-stu-id="d9763-101">If you want to understand what can go wrong with managing an application's configuration secrets, look no further than the story of Steve the senior developer.</span></span>

<span data-ttu-id="d9763-102">Steve 在一家宠物食品交付公司的工作在几周内已完成。</span><span class="sxs-lookup"><span data-stu-id="d9763-102">Steve had been in his job at a pet food delivery company for a few weeks.</span></span> <span data-ttu-id="d9763-103">他正在浏览公司的 web 应用&mdash;的详细信息 .net Core web 应用程序, 该应用程序使用 Azure SQL 数据库存储订单信息和第三方 api, 以用于信用卡帐单和映射客户&mdash;地址意外将 orders 数据库的连接字符串粘贴到公共论坛中。</span><span class="sxs-lookup"><span data-stu-id="d9763-103">He was exploring the details of the company's web app &mdash; a .NET Core web application that used an Azure SQL database for storing order information and third-party APIs for credit card billing and mapping customer addresses &mdash; when he accidentally pasted the connection string for the orders database into a public forum.</span></span>

<span data-ttu-id="d9763-104">天后, 记帐会注意到, 公司提供了许多没有人支付的宠物食物。</span><span class="sxs-lookup"><span data-stu-id="d9763-104">Days later, accounting noticed that the company was delivering a lot of pet food that nobody had paid for.</span></span> <span data-ttu-id="d9763-105">有人使用连接字符串访问数据库、反向工程架构和下订单, 而无需通过网站。</span><span class="sxs-lookup"><span data-stu-id="d9763-105">Someone had used the connection string to access the database, reverse-engineered the schema, and placed orders without going through the website.</span></span>

<span data-ttu-id="d9763-106">在意识到错误后, Steve hurriedly 更改数据库密码以锁定攻击者, 从而破坏网站。</span><span class="sxs-lookup"><span data-stu-id="d9763-106">After realizing his mistake, Steve hurriedly changed the database password to lock out the attacker, breaking the website.</span></span> <span data-ttu-id="d9763-107">用户直接登录到应用程序服务器并更改应用程序配置, 而不是重新部署, 但服务器仍在显示失败的请求。</span><span class="sxs-lookup"><span data-stu-id="d9763-107">He logged directly into the application server and changed the app configuration instead of redeploying, but the server was still showing failed requests.</span></span>

<span data-ttu-id="d9763-108">斯蒂夫忘记了应用程序的多个实例在不同的服务器上运行, 并且仅更改了其中一个的配置。</span><span class="sxs-lookup"><span data-stu-id="d9763-108">Steve had forgotten that multiple instances of the app ran on different servers, and he had only changed the configuration for one.</span></span> <span data-ttu-id="d9763-109">需要完全重新部署, 从而导致另外30分钟的停机时间。</span><span class="sxs-lookup"><span data-stu-id="d9763-109">A full redeployment was needed, causing another 30 minutes of downtime.</span></span>

<span data-ttu-id="d9763-110">泄漏数据库连接字符串、API 密钥或服务密码可能是灾难性的。</span><span class="sxs-lookup"><span data-stu-id="d9763-110">Leaking a database connection string, API key, or service password can be catastrophic.</span></span> <span data-ttu-id="d9763-111">被窃或删除的数据、财务伤害、应用程序宕机和对业务资产和声誉的不可修复损坏都是潜在的结果。</span><span class="sxs-lookup"><span data-stu-id="d9763-111">Stolen or deleted data, financial harm, application downtime, and irreparable damage to business assets and reputation are all potential results.</span></span> <span data-ttu-id="d9763-112">遗憾的是, 机密值通常需要在多个位置同时部署, 并在 inopportune 时更改。</span><span class="sxs-lookup"><span data-stu-id="d9763-112">Unfortunately, secret values often need to be deployed in multiple places simultaneously and changed at inopportune times.</span></span> <span data-ttu-id="d9763-113">您必须将其存储在*某个位置*!</span><span class="sxs-lookup"><span data-stu-id="d9763-113">And you have to store them *somewhere*!</span></span> <span data-ttu-id="d9763-114">我们来看看如何将所有这些与 Azure KeyVault 的安全进行。</span><span class="sxs-lookup"><span data-stu-id="d9763-114">Let's see how we can make all of this secure with Azure KeyVault.</span></span>

## <a name="learning-objectives"></a><span data-ttu-id="d9763-115">学习目标</span><span class="sxs-lookup"><span data-stu-id="d9763-115">Learning objectives</span></span>

<span data-ttu-id="d9763-116">在本模块中, 您将:</span><span class="sxs-lookup"><span data-stu-id="d9763-116">In this module, you will:</span></span>

- <span data-ttu-id="d9763-117">了解哪些类型的信息可以存储在 Azure Key Vault 中</span><span class="sxs-lookup"><span data-stu-id="d9763-117">Explore what types of information can be stored in Azure Key Vault</span></span>
- <span data-ttu-id="d9763-118">创建 Azure Key Vault 并使用它来存储机密配置值</span><span class="sxs-lookup"><span data-stu-id="d9763-118">Create an Azure Key Vault and use it to store secret configuration values</span></span>
- <span data-ttu-id="d9763-119">允许从具有托管标识的 azure 应用服务 web 应用对保管库进行安全访问, 并使用 azure 资源</span><span class="sxs-lookup"><span data-stu-id="d9763-119">Enable secure access to the vault from an Azure App Service web app with managed identities for Azure resources</span></span>
- <span data-ttu-id="d9763-120">实现从保管库检索机密的 web 应用程序</span><span class="sxs-lookup"><span data-stu-id="d9763-120">Implement a web application that retrieves secrets from the vault</span></span>
