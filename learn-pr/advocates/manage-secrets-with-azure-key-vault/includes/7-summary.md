<span data-ttu-id="bbda2-101">在此模块中, 你保护了 Azure Key Vault 中的应用程序机密配置。</span><span class="sxs-lookup"><span data-stu-id="bbda2-101">In this module, you secured an app's secret configuration in Azure Key Vault.</span></span> <span data-ttu-id="bbda2-102">我们的应用程序代码使用托管标识对保管库进行身份验证, 并自动将密码从保管库加载到内存中启动时。</span><span class="sxs-lookup"><span data-stu-id="bbda2-102">Our app code authenticates to the vault with a managed identity and automatically loads the secrets from the vault into memory at startup.</span></span>

[!include[](../../../includes/azure-sandbox-cleanup.md)]

<span data-ttu-id="bbda2-103">若要清理云命令行管理程序存储`KeyVaultDemoApp` , 请删除该目录。</span><span class="sxs-lookup"><span data-stu-id="bbda2-103">To cleanup your Cloud Shell storage, delete the `KeyVaultDemoApp` directory.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bbda2-104">后续步骤</span><span class="sxs-lookup"><span data-stu-id="bbda2-104">Next steps</span></span>

<span data-ttu-id="bbda2-105">如果这是真正的应用程序, 接下来该怎么办？</span><span class="sxs-lookup"><span data-stu-id="bbda2-105">If this was a real app, what would come next?</span></span>

- <span data-ttu-id="bbda2-106">将您的所有应用程序机密放入您的保管库!</span><span class="sxs-lookup"><span data-stu-id="bbda2-106">Put all your app secrets in your vaults!</span></span> <span data-ttu-id="bbda2-107">在配置文件中, 不再有任何理由要这样做。</span><span class="sxs-lookup"><span data-stu-id="bbda2-107">There's no longer any reason to have them in configuration files.</span></span>
- <span data-ttu-id="bbda2-108">继续开发应用程序。</span><span class="sxs-lookup"><span data-stu-id="bbda2-108">Continue to develop the application.</span></span> <span data-ttu-id="bbda2-109">你的生产环境全部已设置, 因此, 在将来对其进行部署时, 无需重复所有设置。</span><span class="sxs-lookup"><span data-stu-id="bbda2-109">Your production environment is all set up, so for future deployments to it you don't need to repeat all the setup.</span></span>
- <span data-ttu-id="bbda2-110">若要支持开发, 请创建一个包含相同名称但值不同的机密的开发环境电子仓库。</span><span class="sxs-lookup"><span data-stu-id="bbda2-110">To support development, create a development-environment vault that contains secrets with the same names but different values.</span></span> <span data-ttu-id="bbda2-111">向开发团队授予权限, 并在应用程序的开发环境配置文件中配置保管库名称。</span><span class="sxs-lookup"><span data-stu-id="bbda2-111">Grant permissions to the development team and configure the vault name in the app's development-environment configuration file.</span></span> <span data-ttu-id="bbda2-112">配置取决于您的实现: 对于 ASP.NET Core `AddAzureKeyVault` , 将自动检测 Visual Studio 和 Azure CLI 的本地安装, 并使用在这些应用程序中配置的 azure 凭据登录并访问保管库。</span><span class="sxs-lookup"><span data-stu-id="bbda2-112">Configuration depends on your implementation: for ASP.NET Core, `AddAzureKeyVault` will automatically detect local installations of Visual Studio and the Azure CLI and use Azure credentials configured in those applications to sign in and access the vault.</span></span> <span data-ttu-id="bbda2-113">对于 node.js, 可以创建具有对保管库的权限的开发环境服务主体, 并使用`loginWithServicePrincipalSecret`应用程序进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="bbda2-113">For Node.js, you can create a development-environment service principal with permissions to the vault and have the app authenticate using `loginWithServicePrincipalSecret`.</span></span>
- <span data-ttu-id="bbda2-114">出于用户验收测试的目的, 创建其他环境。</span><span class="sxs-lookup"><span data-stu-id="bbda2-114">Create additional environments for purposes like user acceptance testing.</span></span>
- <span data-ttu-id="bbda2-115">将独立的电子仓库分布在不同的订阅和/或资源组中, 以将它们隔离。</span><span class="sxs-lookup"><span data-stu-id="bbda2-115">Separate vaults across different subscriptions and/or resource groups to isolate them.</span></span>
- <span data-ttu-id="bbda2-116">向相应的人员授予对其他环境保管库的访问权限。</span><span class="sxs-lookup"><span data-stu-id="bbda2-116">Grant access to other environment vaults to the appropriate people.</span></span>

## <a name="further-reading"></a><span data-ttu-id="bbda2-117">进一步阅读</span><span class="sxs-lookup"><span data-stu-id="bbda2-117">Further reading</span></span>

- [<span data-ttu-id="bbda2-118">密钥存储库文档</span><span class="sxs-lookup"><span data-stu-id="bbda2-118">Key Vault documentation</span></span>](https://docs.microsoft.com/azure/key-vault/)
- [<span data-ttu-id="bbda2-119">有关 AddAzureKeyVault 及其高级选项的详细信息</span><span class="sxs-lookup"><span data-stu-id="bbda2-119">More about AddAzureKeyVault and its advanced options</span></span>](https://docs.microsoft.com/aspnet/core/security/key-vault-configuration?view=aspnetcore-2.1&tabs=aspnetcore2x)
- <span data-ttu-id="bbda2-120">[本教程](https://docs.microsoft.com/azure/key-vault/key-vault-use-from-web-application)将指导您`KeyVaultClient`如何使用, 包括使用客户端密钥 (而不是使用托管标识) 手动向 Azure Active Directory 进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="bbda2-120">[This tutorial](https://docs.microsoft.com/azure/key-vault/key-vault-use-from-web-application) walks through using `KeyVaultClient`, including manually authenticating it to Azure Active Directory using a client secret instead of using a managed identity.</span></span>
- <span data-ttu-id="bbda2-121">[Azure resources token service 文档的托管标识](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity#using-the-rest-protocol), 用于自己实施身份验证工作流。</span><span class="sxs-lookup"><span data-stu-id="bbda2-121">[Managed identities for Azure resources token service documentation](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity#using-the-rest-protocol), for implementing the authentication workflow yourself.</span></span>