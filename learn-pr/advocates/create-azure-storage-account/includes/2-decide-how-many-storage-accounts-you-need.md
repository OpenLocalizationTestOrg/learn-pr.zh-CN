<span data-ttu-id="09855-101">组织通常有多个存储帐户, 以让它们实施不同的要求集。</span><span class="sxs-lookup"><span data-stu-id="09855-101">Organizations often have multiple storage accounts to let them implement different sets of requirements.</span></span> <span data-ttu-id="09855-102">在巧克力制造商的示例中, 专用业务数据有一个存储帐户, 另一个存储帐户用于面向使用者的文件。</span><span class="sxs-lookup"><span data-stu-id="09855-102">In the chocolate-manufacturer example, there would be one storage account for the private business data and one for the consumer-facing files.</span></span> <span data-ttu-id="09855-103">在这里, 你将了解由存储帐户控制的策略因素, 这将帮助你决定需要多少帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-103">Here, you will learn the policy factors that are controlled by a storage account, which will help you decide how many accounts you need.</span></span>

## <a name="what-is-azure-storage"></a><span data-ttu-id="09855-104">什么是 Azure 存储？</span><span class="sxs-lookup"><span data-stu-id="09855-104">What is Azure Storage?</span></span>

<span data-ttu-id="09855-105">Azure 提供了多种存储数据的方法。</span><span class="sxs-lookup"><span data-stu-id="09855-105">Azure provides many ways to store your data.</span></span> <span data-ttu-id="09855-106">有多个数据库选项, 如 azure SQL Server、azure Cosmos DB 和 azure 表存储。</span><span class="sxs-lookup"><span data-stu-id="09855-106">There are multiple database options like Azure SQL Server, Azure Cosmos DB, and Azure Table Storage.</span></span> <span data-ttu-id="09855-107">azure 提供了多种方法来存储和发送邮件, 如 Azure 队列和事件中心。</span><span class="sxs-lookup"><span data-stu-id="09855-107">Azure offers multiple ways to store and send messages, such as Azure Queues and Event Hubs.</span></span> <span data-ttu-id="09855-108">您甚至可以使用 azure 文件和 azure blob 等服务存储松散文件。</span><span class="sxs-lookup"><span data-stu-id="09855-108">You can even store loose files using services like Azure Files and Azure Blobs.</span></span>

<span data-ttu-id="09855-109">azure 选择了这些数据服务中的四个, 并将它们放在名称_Azure 存储_下。</span><span class="sxs-lookup"><span data-stu-id="09855-109">Azure selected four of these data services and placed them together under the name _Azure Storage_.</span></span> <span data-ttu-id="09855-110">四个服务是 azure blob、azure 文件、azure 队列和 Azure 表。</span><span class="sxs-lookup"><span data-stu-id="09855-110">The four services are Azure Blobs, Azure Files, Azure Queues, and Azure Tables.</span></span> <span data-ttu-id="09855-111">下图显示了 Azure 存储的元素。</span><span class="sxs-lookup"><span data-stu-id="09855-111">The following illustration shows the elements of Azure Storage.</span></span>

![图: 列出属于 azure 存储的 azure 数据服务。](../media/2-azure-storage.png)

<span data-ttu-id="09855-113">这四个被授予特殊处理的原因是, 它们都是基于云的所有基元存储服务, 并且通常在同一应用程序中一起使用。</span><span class="sxs-lookup"><span data-stu-id="09855-113">These four were given special treatment because they are all primitive, cloud-based storage services and are often used together in the same application.</span></span>

## <a name="what-is-a-storage-account"></a><span data-ttu-id="09855-114">什么是存储帐户？</span><span class="sxs-lookup"><span data-stu-id="09855-114">What is a storage account?</span></span>

<span data-ttu-id="09855-115">_存储帐户_是将一组 Azure 存储服务组合在一起的容器。</span><span class="sxs-lookup"><span data-stu-id="09855-115">A _storage account_ is a container that groups a set of Azure Storage services together.</span></span> <span data-ttu-id="09855-116">仅 azure 存储中的数据服务可以包含在存储帐户 (azure blob、azure 文件、azure 队列和 Azure 表) 中。</span><span class="sxs-lookup"><span data-stu-id="09855-116">Only data services from Azure Storage can be included in a storage account (Azure Blobs, Azure Files, Azure Queues, and Azure Tables).</span></span> <span data-ttu-id="09855-117">下图显示了包含多个数据服务的存储帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-117">The following illustration shows a storage account containing several data services.</span></span>

![包含混合的数据服务集合的 Azure 存储帐户的插图。](../media/2-what-is-a-storage-account.png)

<span data-ttu-id="09855-119">将数据服务组合到存储帐户中, 可以将其作为一个组进行管理。</span><span class="sxs-lookup"><span data-stu-id="09855-119">Combining data services into a storage account lets you manage them as a group.</span></span> <span data-ttu-id="09855-120">您在创建帐户时指定的设置或创建后所做的任何更改都将应用于该帐户中的所有内容。</span><span class="sxs-lookup"><span data-stu-id="09855-120">The settings you specify when you create the account, or any that you change after creation, are applied to everything in the account.</span></span> <span data-ttu-id="09855-121">删除存储帐户会删除存储在其中的所有数据。</span><span class="sxs-lookup"><span data-stu-id="09855-121">Deleting the storage account deletes all of the data stored inside it.</span></span>

<span data-ttu-id="09855-122">存储帐户是 Azure 资源, 包含在资源组中。</span><span class="sxs-lookup"><span data-stu-id="09855-122">A storage account is an Azure resource and is included in a resource group.</span></span> <span data-ttu-id="09855-123">下图显示了包含多个资源组的 Azure 订阅, 其中每个组包含一个或多个存储帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-123">The following illustration shows an Azure subscription containing multiple resource groups, where each group contains one or more storage accounts.</span></span>

![包含多个资源组和存储帐户的 Azure 订阅的插图。](../media/2-resource-groups-and-storage-accounts.png)

<span data-ttu-id="09855-125">其他 azure 数据服务 (如 azure SQL 和 Cosmos DB) 作为独立的 azure 资源进行管理, 不能包含在存储帐户中。</span><span class="sxs-lookup"><span data-stu-id="09855-125">Other Azure data services like Azure SQL and Cosmos DB are managed as independent Azure resources and cannot be included in a storage account.</span></span> <span data-ttu-id="09855-126">下图显示了一种典型的排列方式: blob、文件、队列和表位于存储帐户内, 而其他服务则不是。</span><span class="sxs-lookup"><span data-stu-id="09855-126">The following illustration shows a typical arrangement: Blobs, Files, Queues, and Tables are inside storage accounts, while other services are not.</span></span>

![显示一些无法放置在存储帐户中的数据服务的 Azure 订阅的插图。](../media/2-typical-subscription-organization.png)

## <a name="storage-account-settings"></a><span data-ttu-id="09855-128">存储帐户设置</span><span class="sxs-lookup"><span data-stu-id="09855-128">Storage account settings</span></span>

<span data-ttu-id="09855-129">存储帐户定义适用于帐户中所有存储服务的策略。</span><span class="sxs-lookup"><span data-stu-id="09855-129">A storage account defines a policy that applies to all the storage services in the account.</span></span> <span data-ttu-id="09855-130">例如, 您可以指定将所有包含的服务存储在美国西部数据中心, 只能通过 https 访问, 并对销售部门的订阅收费。</span><span class="sxs-lookup"><span data-stu-id="09855-130">For example, you could specify that all the contained services will be stored in the West US datacenter, accessible only over https, and billed to the sales department's subscription.</span></span>

<span data-ttu-id="09855-131">由存储帐户控制的设置为:</span><span class="sxs-lookup"><span data-stu-id="09855-131">The settings that are controlled by a storage account are:</span></span>

- <span data-ttu-id="09855-132">**订阅**: 将为帐户中的服务计费的 Azure 订阅。</span><span class="sxs-lookup"><span data-stu-id="09855-132">**Subscription**: The Azure subscription that will be billed for the services in the account.</span></span>

- <span data-ttu-id="09855-133">**Location**: 将在帐户中存储服务的数据中心。</span><span class="sxs-lookup"><span data-stu-id="09855-133">**Location**: The datacenter that will store the services in the account.</span></span>

- <span data-ttu-id="09855-134">**性能**: 确定可以在存储帐户中使用的数据服务和用于存储数据的硬件磁盘的类型。</span><span class="sxs-lookup"><span data-stu-id="09855-134">**Performance**: Determines the data services you can have in your storage account and the type of hardware disks used to store the data.</span></span> <span data-ttu-id="09855-135">**标准**允许您拥有任何数据服务 (Blob、文件、队列、表) 并使用磁盘驱动器。</span><span class="sxs-lookup"><span data-stu-id="09855-135">**Standard** allows you to have any data service (Blob, File, Queue, Table) and uses magnetic disk drives.</span></span> <span data-ttu-id="09855-136">**Premium**限制为您提供一种称为_页面 blob_的特定类型的 blob, 并使用固态驱动器 (SSD) 进行存储。</span><span class="sxs-lookup"><span data-stu-id="09855-136">**Premium** limits you to one specific type of blob called a _page blob_ and uses solid-state drives (SSD) for storage.</span></span>

- <span data-ttu-id="09855-137">**复制**: 确定用于制作数据副本以防止硬件故障或自然灾害的策略。</span><span class="sxs-lookup"><span data-stu-id="09855-137">**Replication**: Determines the strategy used to make copies of your data to protect against hardware failure or natural disaster.</span></span> <span data-ttu-id="09855-138">Azure 至少会在与存储帐户关联的数据中心中自动维护一份数据副本。</span><span class="sxs-lookup"><span data-stu-id="09855-138">At a minimum, Azure will automatically maintain a copy of your data within the data center associated with the storage account.</span></span> <span data-ttu-id="09855-139">这称为 "本地冗余存储 (LRS)", 可防止出现硬件故障, 但不能防止您导致整个数据中心的事件。</span><span class="sxs-lookup"><span data-stu-id="09855-139">This is called locally-redundant storage (LRS), and guards against hardware failure but does not protect you from an event that incapacitates the entire datacenter.</span></span> <span data-ttu-id="09855-140">您可以升级到其他选项之一 (如地域冗余存储 (GRS)), 以在世界范围内的不同数据中心获取复制。</span><span class="sxs-lookup"><span data-stu-id="09855-140">You can upgrade to one of the other options such as geo-redundant storage (GRS) to get replication at different datacenters across the world.</span></span>

- <span data-ttu-id="09855-141">**访问层**: 控制您将能够以多快的速度访问此存储帐户中的 blob。</span><span class="sxs-lookup"><span data-stu-id="09855-141">**Access tier**: Controls how quickly you will be able to access the blobs in this storage account.</span></span> <span data-ttu-id="09855-142">"热" 提供了更快的访问权限, 但成本增加。</span><span class="sxs-lookup"><span data-stu-id="09855-142">Hot gives quicker access than Cool, but at increased cost.</span></span> <span data-ttu-id="09855-143">这仅适用于 blob, 并用作新 blob 的默认值。</span><span class="sxs-lookup"><span data-stu-id="09855-143">This applies only to blobs, and serves as the default value for new blobs.</span></span>

- <span data-ttu-id="09855-144">**需要进行安全传输**: 确定访问支持的协议的安全功能。</span><span class="sxs-lookup"><span data-stu-id="09855-144">**Secure transfer required**: A security feature that determines the supported protocols for access.</span></span> <span data-ttu-id="09855-145">Enabled 需要 HTTPs, 而禁用则允许 HTTP。</span><span class="sxs-lookup"><span data-stu-id="09855-145">Enabled requires HTTPs, while disabled allows HTTP.</span></span>

- <span data-ttu-id="09855-146">**虚拟网络**: 仅允许来自您指定的虚拟网络的入站访问请求的安全功能。</span><span class="sxs-lookup"><span data-stu-id="09855-146">**Virtual networks**: A security feature that allows inbound access requests only from the virtual network(s) you specify.</span></span>

## <a name="how-many-storage-accounts-do-you-need"></a><span data-ttu-id="09855-147">你需要多少个存储帐户？</span><span class="sxs-lookup"><span data-stu-id="09855-147">How many storage accounts do you need?</span></span>

<span data-ttu-id="09855-148">存储帐户代表位置、复制策略和订阅所有者等设置的集合。</span><span class="sxs-lookup"><span data-stu-id="09855-148">A storage account represents a collection of settings like location, replication strategy, and subscription owner.</span></span> <span data-ttu-id="09855-149">对于要应用于数据的每组设置, 您都需要一个存储帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-149">You need one storage account for every group of settings that you want to apply to your data.</span></span> <span data-ttu-id="09855-150">下图显示了一种设置不同的两个存储帐户;一个差异足以满足需要单独的存储帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-150">The following illustration shows two storage accounts that differ in one setting; that one difference is enough to require separate storage accounts.</span></span>

![图示显示具有不同设置的两个存储帐户。](../media/2-multiple-storage-accounts.png)

<span data-ttu-id="09855-152">您所需的存储帐户数通常由您的数据多样性、成本敏感度和管理开销的容限决定。</span><span class="sxs-lookup"><span data-stu-id="09855-152">The number of storage accounts you need is typically determined by your data diversity, cost sensitivity, and tolerance for management overhead.</span></span>

### <a name="data-diversity"></a><span data-ttu-id="09855-153">数据多样性</span><span class="sxs-lookup"><span data-stu-id="09855-153">Data diversity</span></span>

<span data-ttu-id="09855-154">组织通常会生成与使用情况不同的数据、数据的敏感程度、帐单支付费用等。按照上述任何一个矢量的多样性可能会导致多个存储帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-154">Organizations often generate data that differs in where it is consumed, how sensitive it is, which group pays the bills, etc. Diversity along any of these vectors can lead to multiple storage accounts.</span></span> <span data-ttu-id="09855-155">让我们考虑两个示例:</span><span class="sxs-lookup"><span data-stu-id="09855-155">Let's consider two examples:</span></span>

1. <span data-ttu-id="09855-156">您是否有特定于某个国家或地区的数据？</span><span class="sxs-lookup"><span data-stu-id="09855-156">Do you have data that is specific to a country or region?</span></span> <span data-ttu-id="09855-157">如果是这样, 出于性能或合规性原因, 您可能需要在该国家/地区的数据中心中查找它。</span><span class="sxs-lookup"><span data-stu-id="09855-157">If so, you might want to locate it in a data center in that country for performance or compliance reasons.</span></span> <span data-ttu-id="09855-158">每个位置都需要一个存储帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-158">You will need one storage account for each location.</span></span>

1. <span data-ttu-id="09855-159">您是否有一些数据是专有的, 一些用于公共消耗量？</span><span class="sxs-lookup"><span data-stu-id="09855-159">Do you have some data that is proprietary and some for public consumption?</span></span> <span data-ttu-id="09855-160">如果是这样, 则可以为专用数据 (而不是公共数据) 启用虚拟网络。</span><span class="sxs-lookup"><span data-stu-id="09855-160">If so, you could enable virtual networks for the proprietary data and not for the public data.</span></span> <span data-ttu-id="09855-161">这还需要单独的存储帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-161">This will also require separate storage accounts.</span></span>

<span data-ttu-id="09855-162">总的来说, 增加的多样性意味着存储帐户数量增加。</span><span class="sxs-lookup"><span data-stu-id="09855-162">In general, increased diversity means an increased number of storage accounts.</span></span>

### <a name="cost-sensitivity"></a><span data-ttu-id="09855-163">成本敏感度</span><span class="sxs-lookup"><span data-stu-id="09855-163">Cost sensitivity</span></span>

<span data-ttu-id="09855-164">存储帐户本身没有财务成本;但是, 为帐户选择的设置会影响帐户中服务的成本。</span><span class="sxs-lookup"><span data-stu-id="09855-164">A storage account by itself has no financial cost; however, the settings you choose for the account do influence the cost of services in the account.</span></span> <span data-ttu-id="09855-165">地域冗余存储的成本高于本地冗余存储。</span><span class="sxs-lookup"><span data-stu-id="09855-165">Geo-redundant storage costs more than locally-redundant storage.</span></span> <span data-ttu-id="09855-166">高级性能和热接入层将增加 blob 的成本。</span><span class="sxs-lookup"><span data-stu-id="09855-166">Premium performance and the Hot access tier increase the cost of blobs.</span></span>

<span data-ttu-id="09855-167">您可以使用多个存储帐户来降低成本。</span><span class="sxs-lookup"><span data-stu-id="09855-167">You can use multiple storage accounts to reduce costs.</span></span> <span data-ttu-id="09855-168">例如, 您可以将数据划分为关键和非临界的类别。</span><span class="sxs-lookup"><span data-stu-id="09855-168">For example, you could partition your data into critical and non-critical categories.</span></span> <span data-ttu-id="09855-169">您可以将您的关键数据放在具有地域冗余存储的存储帐户中, 并将非关键数据放在具有本地冗余存储的不同存储帐户中。</span><span class="sxs-lookup"><span data-stu-id="09855-169">You could place your critical data into a storage account with geo-redundant storage and put your non-critical data in a different storage account with locally-redundant storage.</span></span>

### <a name="tolerance-for-management-overhead"></a><span data-ttu-id="09855-170">管理开销的容错能力</span><span class="sxs-lookup"><span data-stu-id="09855-170">Tolerance for management overhead</span></span>

<span data-ttu-id="09855-171">每个存储帐户需要管理员进行一些时间和关注, 以供管理员创建和维护。</span><span class="sxs-lookup"><span data-stu-id="09855-171">Each storage account requires some time and attention from an administrator to create and maintain.</span></span> <span data-ttu-id="09855-172">它还增加了向云存储区添加数据的任何人的复杂性;此角色中的每个人都需要了解每个存储帐户的用途, 以便他们将新数据添加到正确的帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-172">It also increases complexity for anyone who adds data to your cloud storage; everyone in this role needs to understand the purpose of each storage account so they add new data to the correct account.</span></span>

<span data-ttu-id="09855-173">存储帐户是一个功能强大的工具, 可帮助您实现所需的性能和安全性, 同时最大限度地减少成本。</span><span class="sxs-lookup"><span data-stu-id="09855-173">Storage accounts are a powerful tool to help you get the performance and security you need while minimizing costs.</span></span> <span data-ttu-id="09855-174">典型策略是首先分析数据, 并创建共享诸如位置、计费和复制策略等特征的分区, 然后为每个分区创建一个存储帐户。</span><span class="sxs-lookup"><span data-stu-id="09855-174">A typical strategy is to start with an analysis of your data and create partitions that share characteristics like location, billing, and replication strategy, and then create one storage account for each partition.</span></span>