在此单元中, 你将使用 Azure 门户创建适用于假想南加利福尼亚冲浪报表 web 应用的存储帐户。

通过冲浪报告网站, 用户可以上载本地浮水条件的照片和视频。 查看者将使用内容来帮助他们选择具有最佳冲浪条件的海滩。 您的设计和功能目标列表为:

- 视频内容必须快速加载。
- 网站必须处理上传卷中的意外峰值。
- 在冲浪条件更改时必须删除过期内容, 以便网站始终显示当前条件。

为了满足这些要求, 您决定在 azure 队列中缓冲上载的内容以进行处理, 然后将其传输到适用于永久存储的 azure Blob。 您需要一个存储帐户, 该帐户可以同时保存队列和 blob, 同时提供低延迟的内容访问。

[!include[](../../../includes/azure-sandbox-activate.md)]

## <a name="use-the-azure-portal-to-create-a-storage-account"></a>使用 Azure 门户创建存储帐户

1. 使用与激活沙盒时相同的帐户登录[Azure 门户](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true)。

1. 在 Azure 门户的左上角, 选择 "**创建资源**"。

1. 在出现的选择面板中, 选择 "**存储**"。

1. 在该窗格的右侧, 选择 "**存储帐户-blob、文件、表、队列**"。

    ![显示 "创建具有存储类别和存储帐户的资源边栏" 选项的 Azure 门户屏幕截图。](../media/5-portal-storage-select.png)

### <a name="configure-the-basic-options"></a>配置基本选项

[!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]

在 "**项目详细信息**" 下:

1. 选择相应的**订阅**。

1. 从下拉列表中选择现有的资源组 ("**<rgn>[沙盒资源组名称]</rgn>**")。

    > [!NOTE]
    > 此免费资源组已由 Microsoft 作为学习体验的一部分提供。 为实际应用程序创建帐户时, 您需要在订阅中创建一个新的资源组, 以保存该应用程序的所有资源。

在 "**实例详细信息**" 下:

1. 将**部署模型**保留为 "_资源管理器_"。 这是 Azure 中所有资源部署的首选模型, 允许您将应用程序的所有相关资源组合到一个_资源组_中, 以便于管理。

1. 输入**存储帐户名称**。 该名称将用于生成用于访问帐户中的数据的公共 URL。 该名称在 Azure 中的所有现有存储帐户名称中必须是唯一的。 名称的长度必须为3到24个字符, 并且只能包含小写字母和数字。

1. 从上面的列表中选择你附近的**位置**。

1. 选择 "**性能**" 选项的_标准_。 这决定了用于保存存储帐户中的数据的磁盘存储的类型。 Standard 使用传统硬盘, 而 Premium 使用固态驱动器 (SSD) 以加快访问速度。 但请记住, Premium 仅支持_页面 blob_。 你将需要视频的_块 blob_和缓冲的队列-这两个队列仅与_标准_选项一起使用。

1. 为**帐户类型**选择 " _StorageV2" (常规用途 v2)_ 。 这提供了对最新功能和定价的访问权限。 尤其是, Blob 存储帐户具有可用于此帐户类型的更多选项。 您需要组合 blob 和队列, 因此_Blob 存储_选项将不起作用。 对于此应用程序, 选择_存储 (通用 v1)_ 帐户不会带来任何好处, 因为这将限制您可以访问的功能, 并且不大可能降低预期工作负荷的成本。

1. 为**复制**选项选择 "_本地冗余存储 (LRS)_ "。 Azure 存储帐户中的数据始终进行复制以确保高可用性-通过此选项, 可以选择与您的持续性要求相比, 复制发生的距离。 在我们的示例中, 图像和视频会快速过期, 并从网站中删除。 因此, 为全局冗余支付额外的价值没有什么价值。 如果灾难性事件导致数据丢失, 则可以使用用户的新内容重新启动网站。

1. 将**访问级别**设置为 "_热_"。 此设置仅用于 Blob 存储。 "**热访问" 层**非常适合于频繁访问的数据, 并且很**酷的 access 层**更适合于不经常访问的数据。 请注意, 这只会设置_默认_值-创建 Blob 时, 可以为数据设置不同的值。 在我们的示例中, 我们希望快速加载视频, 因此您将使用 blob 的高性能选项。

下面的屏幕截图显示了 "**基本**" 选项卡的已完成设置。请注意, 资源组、订阅和名称将具有不同的值。

!["创建存储帐户" 边栏的屏幕截图 (选择了 * * 基础 * * 选项卡)。](../media/5-create-storage-account-basics.png)

### <a name="configure-the-advanced-options"></a>配置高级选项

1. 单击 "**下一步: 高级 >** " 按钮以移动到 "**高级**" 选项卡, 或选择屏幕顶部的 "**高级**" 选项卡。

1. 将**必需的安全传输**设置为_启用_。 "**需要安全传输**" 设置用于控制是否可将**HTTP**用于访问存储帐户中的数据的 REST api。 将此选项设置为 "_启用_" 将强制所有客户端使用 SSL (**HTTPS**)。 在大多数情况中, 您希望将其设置为 "_启用_" 以在网络上使用 HTTPS 被视为一种最佳做法。

    > [!WARNING]
    > 如果启用此选项, 它将强制实施一些额外的限制。 未加密的 Azure 文件服务连接将失败, 包括在 Linux 上使用 SMB 2.1 或3.0 的方案。 由于 Azure 存储不支持自定义域名的 SSL, 因此此选项不能与自定义域名一起使用。

1. 将 "**虚拟网络**" 选项设置为 "_所有网络_"。 此选项允许您隔离 Azure 虚拟网络上的存储帐户。 我们想要使用公共 Internet 访问。 我们的内容面向公众, 你需要允许从公共客户端进行访问。

1. 将**Data Lake Storage Gen2**选项保留为 "_已禁用_"。 这适用于与此模块不相关的大型数据应用程序。

下面的屏幕截图显示了 "**高级**" 选项卡的已完成设置。

!["创建存储帐户" 选项卡的屏幕截图, 其中 "高级 * *" 选项卡处于选定状态。](../media/5-create-storage-account-advanced.png)

### <a name="create"></a>Create

1. 您可以根据需要浏览**标签**设置。 这使您可以将键/值对与您的分类帐户相关联, 并且是可用于任何 Azure 资源的功能。

1. 单击 "**审阅 + 创建**" 以查看设置。 这将对你的选项进行快速验证, 以确保选择了所有必需的字段。 如果出现问题, 我们将在此处报告这些问题。 查看设置后, 单击 "**创建**" 以设置存储帐户。

部署该帐户需要几分钟时间。 在 Azure 中工作时, 让我们来探究我们将用于此帐户的 api。

### <a name="verify"></a>Verify

1. 选择左侧边栏中的 "**存储帐户**" 链接。

1. 在列表中找到新的存储帐户以验证创建是否成功。

<!-- Cleanup sandbox -->
[!include[](../../../includes/azure-sandbox-cleanup.md)]

当您在自己的订阅中工作时, 可以在 Azure 门户中使用以下步骤来删除资源组和所有关联的资源。

1. 选择左侧边栏中的 "**资源组**" 链接。

1. 在列表中查找您创建的资源组。

1. 右键单击资源组条目, 然后从上下文菜单中选择 "**删除资源组**"。 也可以单击 "..."项右侧的 menu 元素, 以获取相同的上下文菜单。

1. 在 "确认" 字段中键入资源组的名称。

1. 单击 "**删除**" 按钮。 这可能需要几分钟时间。

您创建了包含由业务要求驱动的设置的存储帐户。 例如, 您可能已经选择了 "美国西部" 数据中心, 因为您的客户主要位于南部加利福尼亚州。 这是典型的流程: 首先分析您的数据和目标, 然后配置要匹配的存储帐户选项。