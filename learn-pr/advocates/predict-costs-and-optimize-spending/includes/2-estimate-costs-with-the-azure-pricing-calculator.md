假设您已要求在 Azure 上构建一个系统, 并要求您估计在接下来的12个月中运行它可能需要花费的时间。 您已经知道 Azure 定价是完全透明的, 并且只针对您使用的服务按月计费。 您如何在不部署和运行这些服务的情况下进行估计, 也无需从 Azure 服务定价页面手动定价出每项服务？

## <a name="introducing-the-azure-pricing-calculator"></a>Azure 定价计算器简介

为使客户能够轻松地创建估计, Microsoft 开发了**Azure 定价计算器**。 Azure 定价计算器是一个基于 web 的免费工具, 允许您输入 Azure 服务并修改服务的属性和选项。 它会输出每个服务的成本和完全估计的总成本。

您可以在定价计算器中配置的选项因产品而异, 但基本配置选项包括:

| 可选 | 说明 |
|--------|-------------|
| 范围 | 列出您可以从中预配产品的区域。 东南亚、加拿大中部、美国和北欧在可用于某些资源的可能区域中。 |
| 层 | 设置要分配给所选资源的层的类型, 如自由层、基本层等。 |
| 记帐选项 | 突出显示对所选产品的不同类型的客户和订阅可用的记帐选项。 |
| 支持选项 | 允许您从所选产品的附带或付费支持定价选项中进行选择。 |
| 程序和服务 | 允许您根据客户或订阅类型从可用价格产品中进行选择。 |
| Azure 开发/测试定价 | 列出产品的可用开发和测试价格。 仅当您在基于开发/测试提供的 Azure 订阅中运行资源时, 才会应用开发/测试定价。 |

### <a name="try-out-the-azure-pricing-calculator"></a>试用 Azure 定价计算器

在另一个浏览器窗口或选项卡中, 打开[Azure 定价计算器](https://azure.microsoft.com/pricing/calculator/)。 在 "定价计算器" 页上, 您将看到三个选项卡:

1. **物料.** 此选项卡是你将在其中执行大部分活动的地方。 此选项卡列出了所有 Azure 服务, 你将在其中添加或删除服务以阐明你的估计。
2. **预估.** 此选项卡具有您以前保存的估计值。 我们将稍后继续此过程。
3. **常见问题。** 就像刚才所说的, 此选项卡提供一些常见问题的答案。

让我们从 "**产品**" 选项卡开始。您将在左侧看到服务类别的完整列表。 单击任意类别将显示该类别中的服务。 还有一个搜索框, 您可以在其中搜索要查找的服务的所有服务。 单击该服务会将该服务添加到你的评估。 可以只添加一个服务, 也可以根据需要添加任意多个服务, 包括同一服务的倍数 (例如, 多个虚拟机)。

添加服务后, 你需要对其进行定价。 向下滚动页面将为您显示适用于定价的该服务的可自定义详细信息。 例如, 在虚拟机上, 您可以选择区域、操作系统和实例大小等详细信息, 这将影响 VM 的定价。 你将看到服务的小计。 和向下滚动, 你将看到估计中包括的所有服务的完整总数。 除了总数之外, 你还将看到可在其中导出、保存和共享估计值的按钮。

## <a name="estimate-a-solution"></a>估计解决方案

从最初的方案中, 假设此系统将在两个 azure vm 上运行, 并将连接到 Azure SQL 数据库实例。 我们还希望提供第7层防火墙, 以确保我们具有增强的负载平衡功能。 下图显示了连接到单个 Azure SQL 数据库实例的两个虚拟机的应用程序网关。

![示例体系结构的说明, 将用作演示评估成本的示例。](../media/2-estimate-costs-architecture.png)

我们可以使用 Azure 定价计算器确定解决方案将花费的成本, 并导出我们与团队分享的估计值。

> [!TIP]
> 请确保具有未在估计中列出的任何空计算器。 如果你的估计存在任何内容, 请单击每个项目上的垃圾桶图标以重置估计。

在 Azure 定价计算器中的 "**产品**" 选项卡上, 单击以下服务, 将其添加到估计值:

* 计算类别中的虚拟机
* "数据库" 类别中的 Azure SQL 数据库
* 网络类别中的应用程序网关

我们可以在 "**估计**" 选项卡上配置每个选项的详细信息, 以获取对成本的切实估计。 对所有资源使用**西部美国**区域。

* **虚拟机。** 这是一个 ASP.NET 应用程序, 因此我们需要使用**Windows OS** VM。 此应用程序不需要大量的计算能力, 因此请选择**D2 v3**实例大小。 我们将需要两台虚拟机, 并且它们将运行一段时间 (730 小时/月)。 我们打算对这些虚拟机使用标准 SSD 存储, 并只需要一个大小为**E10**的 VM 的磁盘, 总共可以有两个磁盘。

* **SQL 数据库。** 对于数据库, 我们将使用**vCore 模型**预配**单个数据库类型**。 我们需要一个常规用途, 第5个数据库具有8个 vCores。 我们需要 32 GB 的存储空间。

* **应用程序网关。** 对于应用程序网关, 我们打算使用 Web 应用程序防火墙层, 因此我们对环境有一些保护。 我们只需要两个实例和中等大小, 因为我们的负载不是很高。 我们预计每月处理 1 TB 的数据。 我们不希望在欧洲 (区域 1) 中处理任何数据。

查看估计值时, 应该可以看到已添加的每项服务的摘要开销以及整个估计的全部总数。 在这种情况下, 估计值应约为**每月 $2100.00**。 您可以尝试使用某些选项 (尤其是放置这些资源的_位置_) 来进行播放, 以查看估计的向上和向下。 

> [!TIP]
> 如果您的资源不区分位置, 则可以通过在成本较低的地区查找它们来节省大量资金。 检查定价计算器可帮助您确定放置这些服务的最经济高效的位置。


## <a name="share-and-save-your-estimate"></a>共享和保存您的估计

我们现在已为我们的解决方案做了估计。 我们可以保存此估计值, 以便以后可以返回它并根据需要进行调整。 我们还可以将其导出到 Excel 以供进一步分析或通过 URL 共享估计值。

若要导出估计, 请`Export`在估计值的底部单击。 这将下载 Excel (**.xlsx**) 格式的估计, 并将包括您添加到估计的所有服务。

既可以共享 Excel 电子表格, 也可以单击计算器中的`Share`按钮。 这将为您提供可用于共享此估计的 URL。 拥有此链接的任何人都能访问它, 从而使您能够轻松地与团队共享。

如果你使用 Azure 帐户登录, 则可以保存估计, 以便稍后可以返回到该帐户。 继续执行, 然后单击 "**保存**" 按钮。 如果你已登录, 你应该会看到已保存估计的通知。 如果你没有登录, 你将看到登录以保存你的估计的消息。 保存估计后, 向后滚动到页面顶部, 然后选择 "**估计**" 选项卡。你将在此处看到你的估计值。 然后, 可以将其选中以将其拉回或将其删除 (如果不再需要它)。

我们已到达一组 Azure 服务的成本估算, 而无需花费任何资金。 我们没有创建任何内容, 我们有一个完全可共享的估计, 我们可以在以后进行进一步的分析或修改。 不仅可以使用这种方法来估计您计划使用的特定服务, 还可以比较不同服务可能会如何影响您的总体成本的系统。 VM 与 Azure sql 数据库上的 Microsoft SQL Server 示例。