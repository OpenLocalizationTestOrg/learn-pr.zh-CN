<span data-ttu-id="ed35d-101">Lamna 医疗保健领域的临床医生对停机时间没有容限。</span><span class="sxs-lookup"><span data-stu-id="ed35d-101">Clinicians at Lamna Healthcare have little tolerance for downtime.</span></span> <span data-ttu-id="ed35d-102">他们需要在时钟周围拥有临床 IT 系统的访问权限, 以确保他们始终提供最高质量的保护。</span><span class="sxs-lookup"><span data-stu-id="ed35d-102">They need to have access to clinical IT systems around the clock to ensure they're providing the highest quality care at all times.</span></span> <span data-ttu-id="ed35d-103">为满足临床医生的全天候要求, Lamna 医疗保健的应用程序必须能够处理故障, 对用户影响最小。</span><span class="sxs-lookup"><span data-stu-id="ed35d-103">To meet the around-the-clock demands of clinicians, Lamna Healthcare's applications must be able to handle failures with minimal impact to their users.</span></span> <span data-ttu-id="ed35d-104">他们如何确保其应用程序在本地化的事件和大规模灾难中都能正常运行？</span><span class="sxs-lookup"><span data-stu-id="ed35d-104">How do they ensure their applications remain operational, both for localized incidents and large-scale disasters?</span></span>

<span data-ttu-id="ed35d-105">在这里, 我们将讨论如何在体系结构设计中加入可用性和可恢复性。</span><span class="sxs-lookup"><span data-stu-id="ed35d-105">Here, we'll talk through how to include availability and recoverability in your architecture design.</span></span>

## <a name="availability-and-recoverability"></a><span data-ttu-id="ed35d-106">可用性和可恢复性</span><span class="sxs-lookup"><span data-stu-id="ed35d-106">Availability and recoverability</span></span>

<span data-ttu-id="ed35d-107">在复杂的应用程序中, 任何规模的操作都可能会出错。</span><span class="sxs-lookup"><span data-stu-id="ed35d-107">In a complex application, any number of things can go wrong at any scale.</span></span> <span data-ttu-id="ed35d-108">单个服务器和硬盘驱动器可能会失败。</span><span class="sxs-lookup"><span data-stu-id="ed35d-108">Individual servers and hard drives can fail.</span></span> <span data-ttu-id="ed35d-109">部署问题可能会无意中将所有表放入数据库中。</span><span class="sxs-lookup"><span data-stu-id="ed35d-109">A deployment issue could unintentionally drop all tables in a database.</span></span> <span data-ttu-id="ed35d-110">整个数据中心可能变得无法访问。</span><span class="sxs-lookup"><span data-stu-id="ed35d-110">Whole datacenters may become unreachable.</span></span> <span data-ttu-id="ed35d-111">勒索软件事件可能会对您的所有数据进行恶意加密。</span><span class="sxs-lookup"><span data-stu-id="ed35d-111">A ransomware incident could maliciously encrypt all your data.</span></span>

<span data-ttu-id="ed35d-112">设计*可用性*重点是通过小规模的事件和临时条件 (如部分网络中断) 来维护正常运行时间。</span><span class="sxs-lookup"><span data-stu-id="ed35d-112">Designing for *availability* focuses on maintaining uptime through small-scale incidents and temporary conditions like partial network outages.</span></span> <span data-ttu-id="ed35d-113">您可以通过将高可用性集成到应用程序的每个组件中, 从而确保应用程序能够处理本地化的故障, 从而消除单点故障。</span><span class="sxs-lookup"><span data-stu-id="ed35d-113">You can ensure your application can handle localized failures by integrating high availability into each component of an application and eliminating single points of failure.</span></span> <span data-ttu-id="ed35d-114">这样的设计还可以最大限度地减少基础结构维护的影响。</span><span class="sxs-lookup"><span data-stu-id="ed35d-114">Such a design also minimizes the impact of infrastructure maintenance.</span></span> <span data-ttu-id="ed35d-115">高可用性设计通常旨在消除事故对事件的影响, 并确保系统可以继续处理请求, 而不会产生任何影响。</span><span class="sxs-lookup"><span data-stu-id="ed35d-115">High-availability designs typically aim to eliminate the impact of incidents quickly and automatically and ensure that the system can continue to process requests with little to no impact.</span></span>

<span data-ttu-id="ed35d-116">针对可*恢复性*的设计侧重于从数据丢失和大规模灾难中恢复。</span><span class="sxs-lookup"><span data-stu-id="ed35d-116">Designing for *recoverability* focuses on recovery from data loss and from larger scale disasters.</span></span> <span data-ttu-id="ed35d-117">从这些事件类型恢复通常涉及到主动干预, 但自动恢复步骤可以缩短恢复所需的时间。</span><span class="sxs-lookup"><span data-stu-id="ed35d-117">Recovery from these types of incidents often involves active intervention, though automated recovery steps can reduce the time needed to recover.</span></span> <span data-ttu-id="ed35d-118">这些类型的事件可能导致一段时间的停机或永久丢失的数据。</span><span class="sxs-lookup"><span data-stu-id="ed35d-118">These types of incidents may result in some amount of downtime or permanently lost data.</span></span> <span data-ttu-id="ed35d-119">灾难恢复就像关于执行过程那样仔细规划。</span><span class="sxs-lookup"><span data-stu-id="ed35d-119">Disaster recovery is as much about careful planning as it is about execution.</span></span>

<span data-ttu-id="ed35d-120">在体系结构设计中包括高可用性和可恢复性, 可防止业务因停机时间和丢失数据而导致的财务损失。</span><span class="sxs-lookup"><span data-stu-id="ed35d-120">Including high availability and recoverability in the design of your architecture protects your business from financial losses resulting from downtime and lost data.</span></span> <span data-ttu-id="ed35d-121">它们确保您的声誉不会受到客户的信任损失的负面影响。</span><span class="sxs-lookup"><span data-stu-id="ed35d-121">They ensure your reputation isn't negatively impacted by a loss of trust from your customers.</span></span>

## <a name="architecting-for-availability-and-recoverability"></a><span data-ttu-id="ed35d-122">架构的可用性和可恢复性</span><span class="sxs-lookup"><span data-stu-id="ed35d-122">Architecting for availability and recoverability</span></span>

<span data-ttu-id="ed35d-123">为可用性和可恢复性构建架构可确保您的应用程序能够满足您对客户所做的承诺。</span><span class="sxs-lookup"><span data-stu-id="ed35d-123">Architecting for availability and recoverability ensures that your application can meet the commitments you make to your customers.</span></span>

<span data-ttu-id="ed35d-124">若要获取可用性, 请确定要提交到的服务级别协议 (SLA)。</span><span class="sxs-lookup"><span data-stu-id="ed35d-124">For availability, identify the service-level agreement (SLA) you're committing to.</span></span> <span data-ttu-id="ed35d-125">检查应用程序的潜在高可用性与您的 SLA 相关的功能, 并确定您的覆盖范围以及您需要进行改进的位置。</span><span class="sxs-lookup"><span data-stu-id="ed35d-125">Examine the potential high-availability capabilities of your application relative to your SLA, and identify where you have proper coverage and where you'll need to make improvements.</span></span> <span data-ttu-id="ed35d-126">目标是将冗余添加到体系结构的组件中, 这样就不会出现中断中断的可能性。</span><span class="sxs-lookup"><span data-stu-id="ed35d-126">The goal is to add redundancy to components of the architecture so that you are less likely to experience an outage.</span></span> <span data-ttu-id="ed35d-127">高可用性设计组件的示例包括群集和负载平衡。</span><span class="sxs-lookup"><span data-stu-id="ed35d-127">Examples of high-availability design components include clustering and load balancing.</span></span> <span data-ttu-id="ed35d-128">聚集将单个虚拟机替换为一组协调的虚拟机。</span><span class="sxs-lookup"><span data-stu-id="ed35d-128">Clustering replaces a single VM with a set of coordinated VMs.</span></span> <span data-ttu-id="ed35d-129">当一个 VM 失败或不可用时, 服务可以故障转移到另一个可为请求服务的服务器。</span><span class="sxs-lookup"><span data-stu-id="ed35d-129">When one VM fails or becomes unreachable, services can fail over to another one that can service the requests.</span></span> <span data-ttu-id="ed35d-130">负载平衡跨服务的多个实例分布请求, 检测失败的实例并阻止将请求路由到这些实例。</span><span class="sxs-lookup"><span data-stu-id="ed35d-130">Load balancing spreads requests across many instances of a service, detecting failed instances and preventing requests from being routed to them.</span></span>

<span data-ttu-id="ed35d-131">对于可恢复性, 请执行分析以检查可能的数据丢失和重大停机情况。</span><span class="sxs-lookup"><span data-stu-id="ed35d-131">For recoverability, perform an analysis that examines possible data loss and major downtime scenarios.</span></span> <span data-ttu-id="ed35d-132">分析应包括探索恢复策略和每个策略的成本效益权衡。</span><span class="sxs-lookup"><span data-stu-id="ed35d-132">The analysis should include an exploration of recovery strategies and the cost-benefit tradeoff for each.</span></span> <span data-ttu-id="ed35d-133">此练习将向您提供对组织的优先级的重要深入了解, 并帮助阐明您的应用程序的角色。</span><span class="sxs-lookup"><span data-stu-id="ed35d-133">This exercise will give you important insight into your organization's priorities and help clarify the role of your application.</span></span> <span data-ttu-id="ed35d-134">结果应包括应用程序的恢复点目标 (RPO) 和恢复时间目标 (RTO)。</span><span class="sxs-lookup"><span data-stu-id="ed35d-134">The results should include the application's recovery point objective (RPO) and recovery time objective (RTO).</span></span>

* <span data-ttu-id="ed35d-135">**恢复点目标**: 可接受数据丢失的最长持续时间。</span><span class="sxs-lookup"><span data-stu-id="ed35d-135">**Recovery Point Objective**: The maximum duration of acceptable data loss.</span></span> <span data-ttu-id="ed35d-136">RPO 以时间单位计量, 而不是按卷: "30 分钟的数据"、"四个小时的数据" 等。</span><span class="sxs-lookup"><span data-stu-id="ed35d-136">RPO is measured in units of time, not volume: "30 minutes of data", "four hours of data", and so on.</span></span> <span data-ttu-id="ed35d-137">RPO 是关于限制和恢复数据*丢失*, 而不是数据*泄露*。</span><span class="sxs-lookup"><span data-stu-id="ed35d-137">RPO is about limiting and recovering from data *loss*, not data *theft*.</span></span>
* <span data-ttu-id="ed35d-138">**恢复时间目标**: 可接受停机时间的最长持续时间, 其中 "停机时间" 需要由你的规范定义。</span><span class="sxs-lookup"><span data-stu-id="ed35d-138">**Recovery Time Objective**: The maximum duration of acceptable downtime, where "downtime" needs to be defined by your specification.</span></span> <span data-ttu-id="ed35d-139">例如, 如果灾难发生时可接受的停机时间为8小时, 则 RTO 为8小时。</span><span class="sxs-lookup"><span data-stu-id="ed35d-139">For example, if the acceptable downtime duration is eight hours in the event of a disaster, then your RTO is eight hours.</span></span>

<span data-ttu-id="ed35d-140">使用定义的 RPO 和 RTO, 可以在体系结构中设计备份、还原、复制和恢复功能, 以实现这些目标。</span><span class="sxs-lookup"><span data-stu-id="ed35d-140">With RPO and RTO defined, you can design backup, restore, replication, and recovery capabilities into your architecture to meet these objectives.</span></span>

<span data-ttu-id="ed35d-141">每个云提供程序都提供了一系列服务和功能, 可用于改进应用程序的可用性和可恢复性。</span><span class="sxs-lookup"><span data-stu-id="ed35d-141">Every cloud provider offers a suite of services and features you can use to improve your application's availability and recoverability.</span></span> <span data-ttu-id="ed35d-142">如果可能, 请使用现有服务和最佳做法, 并尝试抵御创建自己的操作。</span><span class="sxs-lookup"><span data-stu-id="ed35d-142">When possible, use existing services and best practices, and try to resist creating your own.</span></span>

<span data-ttu-id="ed35d-143">硬盘可能发生故障, 数据中心可能无法访问, 并且黑客可能会受到攻击。</span><span class="sxs-lookup"><span data-stu-id="ed35d-143">Hard drives can fail, datacenters can become unreachable, and hackers can attack.</span></span> <span data-ttu-id="ed35d-144">务必为使用可用性和可恢复性的客户保持良好的声誉。</span><span class="sxs-lookup"><span data-stu-id="ed35d-144">It's important that you maintain a good reputation with your customers using availability and recoverability.</span></span> <span data-ttu-id="ed35d-145">可用性重点在于在网络中断的情况下维护正常运行时间, 而可恢复性侧重于在灾难发生后检索数据。</span><span class="sxs-lookup"><span data-stu-id="ed35d-145">Availability focuses on maintaining uptime through conditions like network outages, and recoverability focuses on retrieving data after a disaster.</span></span>
