<span data-ttu-id="a6b04-101">应用程序可能需要将一系列数据更新组合在一起, 因为对一段数据所做的更改需要对另一数据片段进行更改。</span><span class="sxs-lookup"><span data-stu-id="a6b04-101">Applications may need to group a series of data updates together, because a change to one piece of data needs to result in a change to another piece of data.</span></span> <span data-ttu-id="a6b04-102">使用事务可以对这些更新进行分组, 以便在一系列更新中的一个事件失败时, 可以回滚或撤消整个系列。</span><span class="sxs-lookup"><span data-stu-id="a6b04-102">Transactions enable you to group these updates so that if one event in a series of updates fails, the entire series can be rolled back, or undone.</span></span> 

<span data-ttu-id="a6b04-103">例如, 作为在线零售商, 你可以使用交易记录进行订单和付款验证的放置。</span><span class="sxs-lookup"><span data-stu-id="a6b04-103">For example, as an online retailer you might use a transaction for the placement of an order and payment verification.</span></span> <span data-ttu-id="a6b04-104">对相关事件进行分组可确保在收到经批准的付款形式之前, 不会降低库存水平。</span><span class="sxs-lookup"><span data-stu-id="a6b04-104">The grouping of the related events ensures that you don't reduce your inventory levels until an approved form of payment is received.</span></span>

<span data-ttu-id="a6b04-105">在这里, 你将了解有关事务以及它们是否是你的数据所必需的。</span><span class="sxs-lookup"><span data-stu-id="a6b04-105">Here, you'll learn about transactions and whether they're required for your data.</span></span>

## <a name="what-is-a-transaction"></a><span data-ttu-id="a6b04-106">什么是事务？</span><span class="sxs-lookup"><span data-stu-id="a6b04-106">What is a transaction?</span></span>

<span data-ttu-id="a6b04-107">事务是一组同时执行的数据库操作的逻辑组。</span><span class="sxs-lookup"><span data-stu-id="a6b04-107">A transaction is a logical group of database operations that execute together.</span></span>

<span data-ttu-id="a6b04-108">若要询问自己是否需要在您的应用程序中使用事务, 您需要了解以下问题: 对数据集中的一段数据的更改是否会影响其他数据？</span><span class="sxs-lookup"><span data-stu-id="a6b04-108">Here's the question to ask yourself regarding whether you need to use transactions in your application: Will a change to one piece of data in your dataset impact another?</span></span> <span data-ttu-id="a6b04-109">如果答案是肯定的, 则需要支持您的数据库服务中的事务。</span><span class="sxs-lookup"><span data-stu-id="a6b04-109">If the answer is yes, then you'll need support for transactions in your database service.</span></span>

<span data-ttu-id="a6b04-110">事务通常由一组四个要求 (称为 "ACID 保证") 定义。</span><span class="sxs-lookup"><span data-stu-id="a6b04-110">Transactions are often defined by a set of four requirements, referred to as ACID guarantees.</span></span> <span data-ttu-id="a6b04-111">ACID 代表原子性、一致性、隔离和持续性:</span><span class="sxs-lookup"><span data-stu-id="a6b04-111">ACID stands for Atomicity, Consistency, Isolation, and Durability:</span></span>

- <span data-ttu-id="a6b04-112">原子性意味着执行事务中的所有操作, 或不执行任何操作。</span><span class="sxs-lookup"><span data-stu-id="a6b04-112">Atomicity means that either all the operations in the transaction are executed, or none of them are.</span></span>
- <span data-ttu-id="a6b04-113">一致性可确保在事务发生中途的情况下, 不会将部分数据留给更新。</span><span class="sxs-lookup"><span data-stu-id="a6b04-113">Consistency ensures that if something happens partway through the transaction, a portion of the data isn't left out of the updates.</span></span> <span data-ttu-id="a6b04-114">在整个董事会中, 事务始终应用或根本不应用。</span><span class="sxs-lookup"><span data-stu-id="a6b04-114">Across the board, the transaction is applied consistently or not at all.</span></span>
- <span data-ttu-id="a6b04-115">隔离可确保一个事务不受另一个事务的影响。</span><span class="sxs-lookup"><span data-stu-id="a6b04-115">Isolation ensures that one transaction is not impacted by another transaction.</span></span>
- <span data-ttu-id="a6b04-116">耐久性是指在系统中永久保存由于事务所做的更改。</span><span class="sxs-lookup"><span data-stu-id="a6b04-116">Durability means that the changes made due to the transaction are permanently saved in the system.</span></span> <span data-ttu-id="a6b04-117">已提交的数据由系统保存, 这样即使在发生故障和系统重启, 数据也能以正确的状态提供。</span><span class="sxs-lookup"><span data-stu-id="a6b04-117">Committed data is saved by the system so that even in the event of a failure and system restart, the data is available in its correct state.</span></span>

<span data-ttu-id="a6b04-118">当数据库提供 ACID 保证时, 这些原则将以一致的方式应用于任何事务。</span><span class="sxs-lookup"><span data-stu-id="a6b04-118">When a database offers ACID guarantees, these principles are applied to any transactions in a consistent manner.</span></span>

## <a name="oltp-vs-olap"></a><span data-ttu-id="a6b04-119">OLTP vs OLAP</span><span class="sxs-lookup"><span data-stu-id="a6b04-119">OLTP vs OLAP</span></span>

<span data-ttu-id="a6b04-120">事务性数据库通常称为 OLTP (联机事务处理) 系统。</span><span class="sxs-lookup"><span data-stu-id="a6b04-120">Transactional databases are often called OLTP (Online Transaction Processing) systems.</span></span> <span data-ttu-id="a6b04-121">OLTP 系统通常支持大量用户、快速响应时间和处理大量数据。</span><span class="sxs-lookup"><span data-stu-id="a6b04-121">OLTP systems commonly support lots of users, have quick response times, and handle large volumes of data.</span></span> <span data-ttu-id="a6b04-122">它们也具有高可用性 (这意味着它们的停机时间非常少), 通常处理小型事务或相对简单的事务。</span><span class="sxs-lookup"><span data-stu-id="a6b04-122">They are also highly available (meaning they have very minimal downtime), and typically handle small or relatively simple transactions.</span></span>

<span data-ttu-id="a6b04-123">相反, OLAP (联机分析处理) 系统通常支持较少的用户、响应时间较低, 并且通常会处理大型和复杂的事务。</span><span class="sxs-lookup"><span data-stu-id="a6b04-123">On the contrary, OLAP (Online Analytical Processing) systems commonly support fewer users, have longer response times, can be less available, and typically handle large and complex transactions.</span></span>

<span data-ttu-id="a6b04-124">术语 OLTP 和 OLAP 不会像过去那样频繁使用, 但了解它们可以更轻松地对应用程序的需求进行分类。</span><span class="sxs-lookup"><span data-stu-id="a6b04-124">The terms OLTP and OLAP aren't used as frequently as they used to be, but understanding them makes it easier to categorize the needs of your application.</span></span> 

<span data-ttu-id="a6b04-125">现在, 你熟悉了事务、OLTP 和 OLAP, 我们来演练一下在线零售方案中的每个数据集, 并确定对交易记录的需求。</span><span class="sxs-lookup"><span data-stu-id="a6b04-125">Now that you're familiar with transactions, OLTP, and OLAP, let's walk through each of the data sets in the online retail scenario, and determine the need for transactions.</span></span>

## <a name="product-catalog-data"></a><span data-ttu-id="a6b04-126">产品目录数据</span><span class="sxs-lookup"><span data-stu-id="a6b04-126">Product catalog data</span></span>

<span data-ttu-id="a6b04-127">产品目录数据应存储在事务性数据库中。</span><span class="sxs-lookup"><span data-stu-id="a6b04-127">Product catalog data should be stored in a transactional database.</span></span> <span data-ttu-id="a6b04-128">当用户下订单并验证付款时, 应更新该项目的库存。</span><span class="sxs-lookup"><span data-stu-id="a6b04-128">When users place an order and the payment is verified, the inventory for the item should be updated.</span></span> <span data-ttu-id="a6b04-129">同样, 如果客户的信用卡被拒绝, 应回滚订单, 并且库存不应更新。</span><span class="sxs-lookup"><span data-stu-id="a6b04-129">Likewise, if the customer's credit card is declined, the order should be rolled back, and the inventory should not be updated.</span></span> <span data-ttu-id="a6b04-130">这些关系都需要事务。</span><span class="sxs-lookup"><span data-stu-id="a6b04-130">These relationships all require transactions.</span></span>

## <a name="photos-and-videos"></a><span data-ttu-id="a6b04-131">照片和视频</span><span class="sxs-lookup"><span data-stu-id="a6b04-131">Photos and videos</span></span>

<span data-ttu-id="a6b04-132">产品目录中的照片和视频不需要事务性支持。</span><span class="sxs-lookup"><span data-stu-id="a6b04-132">Photos and videos in a product catalog don't require transactional support.</span></span> <span data-ttu-id="a6b04-133">仅当进行更新或添加新文件时, 才会更改这些文件。</span><span class="sxs-lookup"><span data-stu-id="a6b04-133">These files are changed only when an update is made or new files are added.</span></span> <span data-ttu-id="a6b04-134">尽管图像和实际产品数据之间存在关系, 但实际上并不是事务性的。</span><span class="sxs-lookup"><span data-stu-id="a6b04-134">Even though there is a relationship between the image and the actual product data, it's not transactional in nature.</span></span>

## <a name="business-data"></a><span data-ttu-id="a6b04-135">业务数据</span><span class="sxs-lookup"><span data-stu-id="a6b04-135">Business data</span></span>

<span data-ttu-id="a6b04-136">对于业务数据, 因为所有数据都是历史记录且不变, 所以不需要事务性支持。</span><span class="sxs-lookup"><span data-stu-id="a6b04-136">For the business data, because all of the data is historical and unchanging, transactional support is not required.</span></span> <span data-ttu-id="a6b04-137">处理数据的业务分析员也有独特的需求, 因为它们通常需要在查询中处理聚合, 以便它们可以处理其他较小数据点的总数。</span><span class="sxs-lookup"><span data-stu-id="a6b04-137">The business analysts working with the data also have unique needs in that they often require working with aggregates in their queries, so that they can work with the totals of other smaller data points.</span></span>

## <a name="summary"></a><span data-ttu-id="a6b04-138">摘要</span><span class="sxs-lookup"><span data-stu-id="a6b04-138">Summary</span></span>

<span data-ttu-id="a6b04-139">确保您的数据处于正确状态并不总是简单的任务。</span><span class="sxs-lookup"><span data-stu-id="a6b04-139">Ensuring that your data is in the correct state is not always an easy task.</span></span> <span data-ttu-id="a6b04-140">事务可以通过对数据强制实施数据完整性要求来进行帮助。</span><span class="sxs-lookup"><span data-stu-id="a6b04-140">Transactions can help by enforcing data integrity requirements on your data.</span></span> <span data-ttu-id="a6b04-141">如果您的数据受益于 ACID 原则, 则选择支持事务的存储解决方案。</span><span class="sxs-lookup"><span data-stu-id="a6b04-141">If your data benefits from ACID principles, then choose a storage solution that supports transactions.</span></span>