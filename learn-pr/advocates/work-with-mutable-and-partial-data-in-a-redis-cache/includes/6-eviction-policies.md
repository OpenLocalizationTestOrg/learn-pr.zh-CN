对于 Redis 的 Azure 缓存而言, 内存是最关键的资源, 因为它是内存中的数据库。 当您开始添加超过可用内存量的数据时, 您可能会遇到问题。 Redis 的 Azure 缓存支持逐出策略, 这些策略指示在内存不足时应如何处理数据。

在这里, 你将设置一个逐出策略, 以确定当超出最大内存量时, 您的数据应执行的操作。

## <a name="what-is-an-eviction-policy"></a>什么是逐出策略？

逐出策略是一种计划, 用于确定当超出可用的最大内存量时应如何管理数据。 例如, 使用逐出策略, 可以告诉 Redis 的 Azure 缓存删除随机密钥, 为插入的新数据留出空间。

### <a name="types-of-eviction-policies"></a>逐出策略的类型

Azure Cache 为 Redis 提供了六种不同的逐出策略。 当您在内存不足时尝试插入数据时, 所有这些值都将执行操作。

* **noeviction:** 无逐出策略。 如果尝试插入数据, 则返回错误消息。

* **allkeys-lru:** 删除最近使用最少的键。

* **allkeys-随机:** 删除随机密钥。

* **可变-lru:** 从所有具有过期设置的键中删除最近使用最少的键。

* **可变 ttl:** 根据它的过期设置, 删除最短生存时间的密钥。

* **可变-随机:** 删除具有过期集的随机密钥。

## <a name="how-to-set-an-eviction-policy"></a>如何设置逐出策略

azure 提供了一个简单的下拉菜单, 可为 Redis 设置 Azure 缓存的逐出策略。 选择 "**高级设置**", 然后使用 "maxmemory" 下拉菜单中的 "**策略**"。

由于内存对 Redis 的 Azure 缓存至关重要, 因此支持逐出策略。 逐出策略确定当内存不足并尝试插入新数据时, 对现有数据应执行的操作。