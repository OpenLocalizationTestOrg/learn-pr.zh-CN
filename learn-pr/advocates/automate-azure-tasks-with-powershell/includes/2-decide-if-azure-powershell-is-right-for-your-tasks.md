<span data-ttu-id="c0830-101">假设您需要选择一个工具来管理用于测试客户关系管理 (CRM) 系统的 Azure 资源。</span><span class="sxs-lookup"><span data-stu-id="c0830-101">Suppose you need to choose a tool to administer the Azure resources used to test your Customer Relationship Management (CRM) system.</span></span> <span data-ttu-id="c0830-102">您的测试要求您创建资源组和预配虚拟机 (vm)。</span><span class="sxs-lookup"><span data-stu-id="c0830-102">Your tests require you to create resource groups and provision virtual machines (VMs).</span></span>

<span data-ttu-id="c0830-103">您需要便于管理员学习的内容, 但功能强大, 可自动执行多个虚拟机的安装和设置或编写完整的应用程序环境。</span><span class="sxs-lookup"><span data-stu-id="c0830-103">You want something that is easy for administrators to learn, but powerful enough to automate the installation and setup of multiple virtual machines or script a full application environment.</span></span> <span data-ttu-id="c0830-104">有多个可用工具;您需要查找最适合您的人员和任务的一个。</span><span class="sxs-lookup"><span data-stu-id="c0830-104">There are multiple tools available; you need to find the best one for your people and your tasks.</span></span>

## <a name="what-tools-are-available"></a><span data-ttu-id="c0830-105">有哪些工具可用？</span><span class="sxs-lookup"><span data-stu-id="c0830-105">What tools are available?</span></span>
<span data-ttu-id="c0830-106">Azure 提供了三个管理工具供您选择:</span><span class="sxs-lookup"><span data-stu-id="c0830-106">Azure provides three administration tools to choose from:</span></span>

- <span data-ttu-id="c0830-107">Azure 门户</span><span class="sxs-lookup"><span data-stu-id="c0830-107">The Azure portal</span></span>
- <span data-ttu-id="c0830-108">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="c0830-108">The Azure CLI</span></span>
- <span data-ttu-id="c0830-109">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="c0830-109">Azure PowerShell</span></span>

<span data-ttu-id="c0830-110">它们都提供了大致相同的控制量;您可以使用其中一种工具执行的任何任务, 您很可能会使用其他两个。</span><span class="sxs-lookup"><span data-stu-id="c0830-110">They all offer approximately the same amount of control; any task that you can do with one of the tools, you can likely do with the other two.</span></span> <span data-ttu-id="c0830-111">这三种都是跨平台, 在 Windows、macOS 和 Linux 上运行。</span><span class="sxs-lookup"><span data-stu-id="c0830-111">All three are cross-platform, running on Windows, macOS, and Linux.</span></span> <span data-ttu-id="c0830-112">它们在语法、安装要求以及是否支持自动化方面有所不同。</span><span class="sxs-lookup"><span data-stu-id="c0830-112">They differ in syntax, setup requirements, and whether they support automation.</span></span>

<span data-ttu-id="c0830-113">在这里, 我们将介绍这三个选项中的每一个, 并提供有关如何在它们之间进行决定的指导。</span><span class="sxs-lookup"><span data-stu-id="c0830-113">Here, we will describe each of the three options and give some guidance on how to decide among them.</span></span> 

## <a name="what-is-the-azure-portal"></a><span data-ttu-id="c0830-114">什么是 Azure 门户？</span><span class="sxs-lookup"><span data-stu-id="c0830-114">What is the Azure portal?</span></span>
<span data-ttu-id="c0830-115">azure 门户是一个网站, 可让你创建、配置和更改 Azure 订阅中的资源。</span><span class="sxs-lookup"><span data-stu-id="c0830-115">The Azure portal is a website that lets you create, configure, and alter the resources in your Azure subscription.</span></span> <span data-ttu-id="c0830-116">门户是一个图形用户界面 (GUI), 便于查找所需的资源并执行所需的任何更改。</span><span class="sxs-lookup"><span data-stu-id="c0830-116">The portal is a Graphical User Interface (GUI) that makes it convenient to locate the resource you need and execute any required changes.</span></span> <span data-ttu-id="c0830-117">它还通过提供向导和工具提示来指导您完成复杂的管理任务。</span><span class="sxs-lookup"><span data-stu-id="c0830-117">It also guides you through complex administrative tasks by providing wizards and tooltips.</span></span>

<span data-ttu-id="c0830-118">门户不提供自动执行重复任务的任何方法。</span><span class="sxs-lookup"><span data-stu-id="c0830-118">The portal does not provide any way to automate repetitive tasks.</span></span> <span data-ttu-id="c0830-119">例如, 要设置15台虚拟机, 您需要通过完成每个 VM 的向导来创建一个虚拟机。</span><span class="sxs-lookup"><span data-stu-id="c0830-119">For example, to set up 15 VMs, you would need to create them one-by-one by completing the wizard for each VM.</span></span> <span data-ttu-id="c0830-120">对于复杂的任务, 这可能非常耗时且容易出错。</span><span class="sxs-lookup"><span data-stu-id="c0830-120">This can be time-consuming and error-prone for complex tasks.</span></span> 

## <a name="what-is-the-azure-cli"></a><span data-ttu-id="c0830-121">什么是 Azure CLI？</span><span class="sxs-lookup"><span data-stu-id="c0830-121">What is the Azure CLI?</span></span>
<span data-ttu-id="c0830-122">azure CLI 是跨平台命令行程序, 用于连接到 azure 并在 azure 资源上执行管理命令。</span><span class="sxs-lookup"><span data-stu-id="c0830-122">The Azure CLI is a cross-platform command-line program to connect to Azure and execute administrative commands on Azure resources.</span></span> <span data-ttu-id="c0830-123">例如, 若要创建 VM, 应使用类似如下的命令:</span><span class="sxs-lookup"><span data-stu-id="c0830-123">For example, to create a VM, you would use a command like the following:</span></span>

```azurecli
az vm create \
  --resource-group CrmTestingResourceGroup \
  --name CrmUnitTests \
  --image UbuntuLTS
  ...
```

<span data-ttu-id="c0830-124">可通过两种方式使用 azure CLI: 在浏览器中通过 Azure 云命令行管理程序或在 Linux、Mac 或 Windows 上进行本地安装。</span><span class="sxs-lookup"><span data-stu-id="c0830-124">The Azure CLI is available two ways: inside a browser via the Azure Cloud Shell or with a local install on Linux, Mac, or Windows.</span></span> <span data-ttu-id="c0830-125">在这两种情况下, 可以交互使用, 也可以编写脚本。</span><span class="sxs-lookup"><span data-stu-id="c0830-125">In both cases, it can be used interactively or scripted.</span></span> <span data-ttu-id="c0830-126">为进行交互式使用, 首先启动命令行管理程序`cmd.exe` (如 Windows 或 Bash 上的 macOS), 然后在命令行管理程序提示符处发出命令。</span><span class="sxs-lookup"><span data-stu-id="c0830-126">For interactive use, you first launch a shell such as `cmd.exe` on Windows or Bash on Linux or macOS and then issue the command at the shell prompt.</span></span> <span data-ttu-id="c0830-127">若要自动执行重复任务, 请使用所选命令行管理程序的脚本语法将命令组合到命令行管理程序脚本中, 然后执行该脚本。</span><span class="sxs-lookup"><span data-stu-id="c0830-127">To automate repetitive tasks, you assemble the commands into a shell script using the script syntax of your chosen shell and then execute the script.</span></span>

## <a name="what-is-azure-powershell"></a><span data-ttu-id="c0830-128">什么是 Azure PowerShell？</span><span class="sxs-lookup"><span data-stu-id="c0830-128">What is Azure PowerShell?</span></span>
<span data-ttu-id="c0830-129">Azure PowerShell 是您添加到 Windows powershell 或 PowerShell Core 以允许您连接到 Azure 订阅并管理资源的模块。</span><span class="sxs-lookup"><span data-stu-id="c0830-129">Azure PowerShell is a module that you add to Windows PowerShell or PowerShell Core to let you connect to your Azure subscription and manage resources.</span></span> <span data-ttu-id="c0830-130">Azure powershell 需要 PowerShell 才能正常工作。</span><span class="sxs-lookup"><span data-stu-id="c0830-130">Azure PowerShell requires PowerShell to function.</span></span> <span data-ttu-id="c0830-131">PowerShell 提供命令行管理程序窗口、命令分析等服务。</span><span class="sxs-lookup"><span data-stu-id="c0830-131">PowerShell provides services like the shell window, command parsing, and so on.</span></span> <span data-ttu-id="c0830-132">azure PowerShell 添加了特定于 azure 的命令。</span><span class="sxs-lookup"><span data-stu-id="c0830-132">Azure PowerShell adds the Azure-specific commands.</span></span>

<span data-ttu-id="c0830-133">例如, azure PowerShell 提供了可在 Azure 订阅中为您创建虚拟机的**新的 AzVM**命令。</span><span class="sxs-lookup"><span data-stu-id="c0830-133">For example, Azure PowerShell provides the **New-AzVM** command that creates a virtual machine for you inside your Azure subscription.</span></span> <span data-ttu-id="c0830-134">若要使用它, 请启动 PowerShell 应用程序, 然后发出如下所示的命令:</span><span class="sxs-lookup"><span data-stu-id="c0830-134">To use it, you would launch the PowerShell application and then issue a command like the following:</span></span>

```powershell
New-AzVm `
    -ResourceGroupName "CrmTestingResourceGroup" `
    -Name "CrmUnitTests" `
    -Image "UbuntuLTS"
    ...
```

<span data-ttu-id="c0830-135">azure PowerShell 也有两种方法: 在浏览器中通过 Azure 云命令行管理程序或在 Linux、Mac 或 Windows 上的本地安装。</span><span class="sxs-lookup"><span data-stu-id="c0830-135">Azure PowerShell is also available two ways: inside a browser via the Azure Cloud Shell or with a local install on Linux, Mac, or Windows.</span></span> <span data-ttu-id="c0830-136">在这两种情况下, 您都有两种模式可供选择。</span><span class="sxs-lookup"><span data-stu-id="c0830-136">In both cases, you have two modes to choose from.</span></span> <span data-ttu-id="c0830-137">您可以在交互模式下使用它, 在这种模式下, 您可以一次手动发布一个命令, 也可以在脚本模式下执行, 在此模式下, 您可以执行包含多个命令的脚本。</span><span class="sxs-lookup"><span data-stu-id="c0830-137">You can use it in interactive mode, in which you manually issue one command at a time, or in scripting mode, where you execute a script that consists of multiple commands.</span></span>

## <a name="how-to-choose-an-administrative-tool"></a><span data-ttu-id="c0830-138">如何选择管理工具</span><span class="sxs-lookup"><span data-stu-id="c0830-138">How to Choose an administrative tool</span></span>
<span data-ttu-id="c0830-139">门户、azure CLI 和 azure PowerShell 之间有近似的奇偶校验, 与他们可以管理的 Azure 对象以及他们可以创建的配置有关。</span><span class="sxs-lookup"><span data-stu-id="c0830-139">There is approximate parity between the portal, the Azure CLI, and Azure PowerShell with respect to the Azure objects they can administer and the configurations they can create.</span></span> <span data-ttu-id="c0830-140">它们也都是跨平台。</span><span class="sxs-lookup"><span data-stu-id="c0830-140">They are also all cross-platform.</span></span> <span data-ttu-id="c0830-141">这意味着, 在做出选择时, 您通常会考虑几个其他因素:</span><span class="sxs-lookup"><span data-stu-id="c0830-141">This means you will typically consider several other factors when making your choice:</span></span>

- <span data-ttu-id="c0830-142">**自动化**: 是否需要自动执行一组复杂或重复的任务？</span><span class="sxs-lookup"><span data-stu-id="c0830-142">**Automation**: Do you need to automate a set of complex or repetitive tasks?</span></span> <span data-ttu-id="c0830-143">在门户不支持这种情况下, azure PowerShell 和 azure CLI 支持此功能。</span><span class="sxs-lookup"><span data-stu-id="c0830-143">Azure PowerShell and the Azure CLI support this while the portal does not.</span></span>

- <span data-ttu-id="c0830-144">**学习曲线**: 是否需要快速完成任务而不学习新的命令或语法？</span><span class="sxs-lookup"><span data-stu-id="c0830-144">**Learning curve**: Do you need to complete a task quickly without learning new commands or syntax?</span></span> <span data-ttu-id="c0830-145">Azure 门户不需要你了解语法或记忆命令。</span><span class="sxs-lookup"><span data-stu-id="c0830-145">The Azure portal does not require you to learn syntax or memorize commands.</span></span> <span data-ttu-id="c0830-146">在 azure PowerShell 和 azure CLI 中, 必须了解您使用的每个命令的详细语法。</span><span class="sxs-lookup"><span data-stu-id="c0830-146">In Azure PowerShell and the Azure CLI, you must know the detailed syntax for each command you use.</span></span>

- <span data-ttu-id="c0830-147">**团队 skillset**: 您的团队是否具有现有专业技能？</span><span class="sxs-lookup"><span data-stu-id="c0830-147">**Team skillset**: Does your team have existing expertise?</span></span> <span data-ttu-id="c0830-148">例如, 您的团队可能已使用 PowerShell 来管理 Windows。</span><span class="sxs-lookup"><span data-stu-id="c0830-148">For example, your team may have used PowerShell to administer Windows.</span></span> <span data-ttu-id="c0830-149">如果是这样, 他们将很快就使用 Azure PowerShell 感到舒适。</span><span class="sxs-lookup"><span data-stu-id="c0830-149">If so, they will quickly become comfortable using Azure PowerShell.</span></span>

## <a name="example"></a><span data-ttu-id="c0830-150">示例</span><span class="sxs-lookup"><span data-stu-id="c0830-150">Example</span></span>
<span data-ttu-id="c0830-151">请记住, 您正在选择一个管理工具来为您的 CRM 应用程序创建测试环境。</span><span class="sxs-lookup"><span data-stu-id="c0830-151">Recall that you are choosing an administrative tool to create the test environments for your CRM application.</span></span> <span data-ttu-id="c0830-152">您的管理员有两个需要执行的特定 Azure 任务:</span><span class="sxs-lookup"><span data-stu-id="c0830-152">Your administrators have two specific Azure tasks they will need to do:</span></span>

1. <span data-ttu-id="c0830-153">为每个测试类别 (计价单位、集成和接受) 创建一个资源组。</span><span class="sxs-lookup"><span data-stu-id="c0830-153">Create one resource group for each category of testing (unit, integration, and acceptance).</span></span>
2. <span data-ttu-id="c0830-154">在每一轮测试之前, 在每个资源组中创建多个虚拟机。</span><span class="sxs-lookup"><span data-stu-id="c0830-154">Create multiple VMs in each resource group before every round of testing.</span></span>

<span data-ttu-id="c0830-155">若要创建资源组, Azure 门户是一个合理的选择。</span><span class="sxs-lookup"><span data-stu-id="c0830-155">To create the resource groups, the Azure portal is a reasonable choice.</span></span> <span data-ttu-id="c0830-156">这些任务是一次性任务, 因此您不需要脚本即可执行这些任务。</span><span class="sxs-lookup"><span data-stu-id="c0830-156">These are one-off tasks, so you don't need scripts to do them.</span></span>

<span data-ttu-id="c0830-157">查找最佳工具以创建虚拟机是一种更具挑战性的决策。</span><span class="sxs-lookup"><span data-stu-id="c0830-157">Finding the best tool to create the VMs is a more challenging decision.</span></span> <span data-ttu-id="c0830-158">您需要创建其中的多个, 并且您需要重复执行此操作, 每周可能会发生多次。</span><span class="sxs-lookup"><span data-stu-id="c0830-158">You need to create several of them and you need to do it repeatedly, likely several times each week.</span></span> <span data-ttu-id="c0830-159">这意味着你将需要自动化, 因此 Azure 门户不是一个好的选择。</span><span class="sxs-lookup"><span data-stu-id="c0830-159">This means you will want automation, so the Azure portal is not a good choice.</span></span> <span data-ttu-id="c0830-160">在这种情况下, azure PowerShell 或 azure CLI 将满足你的需求。</span><span class="sxs-lookup"><span data-stu-id="c0830-160">In this case, either Azure PowerShell or the Azure CLI will meet your needs.</span></span> <span data-ttu-id="c0830-161">如果你的团队成员有一些现有的 PowerShell 知识, 则 Azure PowerShell 可能是最佳匹配。</span><span class="sxs-lookup"><span data-stu-id="c0830-161">If your team members have some existing PowerShell knowledge, Azure PowerShell will likely be the best match.</span></span> <span data-ttu-id="c0830-162">Azure PowerShell 可在您的管理员团队使用的操作系统上使用, 它支持自动化, 并且应快速为您的团队进行学习。</span><span class="sxs-lookup"><span data-stu-id="c0830-162">Azure PowerShell is available on the operating systems your admin team uses, it supports automation, and should be quick for your team to learn.</span></span>

<span data-ttu-id="c0830-163">大多数管理员对 Azure 的首次体验都在门户中。</span><span class="sxs-lookup"><span data-stu-id="c0830-163">Most administrators' first experience with Azure is in the Portal.</span></span> <span data-ttu-id="c0830-164">这是一个很好的起点, 因为它提供了清晰、结构良好的图形界面, 但提供了自动化的有限选项。</span><span class="sxs-lookup"><span data-stu-id="c0830-164">It's a great place to start as it provides a clean, well-structured graphical interface but provided limited options for automation.</span></span> <span data-ttu-id="c0830-165">当你需要自动化时, azure 会为你提供两个选项: azure powershell for admins for admins with PowerShell 体验和 azure CLI for 其他所有人。</span><span class="sxs-lookup"><span data-stu-id="c0830-165">When you need automation, Azure gives you two options: Azure PowerShell for admins with PowerShell experience and the Azure CLI for everyone else.</span></span>

<span data-ttu-id="c0830-166">在实践中, 企业通常会组合一次性任务和重复性任务。</span><span class="sxs-lookup"><span data-stu-id="c0830-166">In practice, businesses typically have a mix of one-off and repetitive tasks.</span></span> <span data-ttu-id="c0830-167">这意味着, 通常使用门户和脚本解决方案。</span><span class="sxs-lookup"><span data-stu-id="c0830-167">This means it is common to use both the Portal and a scripting solution.</span></span> <span data-ttu-id="c0830-168">在我们的 CRM 示例中, 适合通过门户创建资源组, 并使用 PowerShell 自动执行 VM 创建。</span><span class="sxs-lookup"><span data-stu-id="c0830-168">In our CRM example, it's appropriate to create the resource groups via the Portal and automate the VM creation with PowerShell.</span></span>

<span data-ttu-id="c0830-169">本模块的其余部分重点介绍了如何安装和使用 Azure PowerShell。</span><span class="sxs-lookup"><span data-stu-id="c0830-169">The rest of this module focuses on installing and using Azure PowerShell.</span></span>
