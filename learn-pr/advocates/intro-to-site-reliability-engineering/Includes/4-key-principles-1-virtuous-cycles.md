如果确实如此, 在某种意义上说 "你是要做的", 那么我们就会来到本模块的核心。 在此单元中, 我们将了解在 SRE 实践中通常被认为是核心的两种做法。 这两个来源都源于创建 "virtuous 周期" 这一点很重要的原则。 在此上下文中的 Virtuous 周期是在组织中构建反馈循环的做法, 可帮助组织持续获得更好的效果。 在这两种做法中, 将会有完整的后续模块, 因此我们只会在此处介绍每个部分。

### <a name="virtuous-cycle-1-slis-and-slos"></a>Virtuous 循环 #1: SLIs 和 slo

在本模块的前面部分, 我们对 "适当级别的可靠性" 进行了重大努力。 这恰好就是该概念进入熊的地方。

假设您有一个新的服务, 您计划将其带到生产环境 (已构建或仍处于规划过程中的服务)。 作为此过程的一部分, 一定要做出有关其所需可靠性的一些决定。 如果您没有自己编写所有代码, 则在与开发人员协作的过程中进行这些决策 (且这是至关重要的)。

做出的第一个决定是将用作服务运行状况的指示器 (服务级别指示器或 SLI)。 另一种方法是, "如何知道它的运行时间/良好状态？"。 有很多方法可以跟踪我们稍后会详细介绍的这一点, 但这些内容通常是成功的和故障措施 (服务是否已在一定百分比的时间内成功完成操作)、计时度量 (我们在中返回一个答案,一定的时间阈值, 吞吐量的度量 (我们处理一定量的数据) 或所有这些数据的组合。 对于一个简单的示例, 我们可能会说, 我们的服务的 SLI 是通过 HTTP 200 代码 (与500或其他一些代码) 指示的成功返回成功的频率。

现在我们有一个清楚的指标, 告诉你如何知道服务的工作方式, 我们想要决定我们预期或需要的可靠性级别。 例如, 我们预计在一天内会看到服务的故障率为 20%？ 我们在这里使用圆角和大型数字, 因为它们在开头很容易就是原因。 在后面的模块中, 我们将增加如以下的语句的复杂性和精度 ("哪些用户将看到该错误率？其中一些？大多数？ 等等)。 与服务开发人员协作创建的预期是服务级别目标 (SLO)。

SLO 必须是可在监视系统中准确测量和表示的内容。 它旨在作为服务可靠性的目标、充分理解的目标以及足够好的数字是什么？ 没有 "好, 我认为服务在上一周内已经是" 好的 ", 但这有点难说" 进入这里 "。 服务正在会议其 SLO 或不是, 应清楚地确定数据。 如果不能满足 SLO (尤其是在一段时间内重复), 则会出现问题, 需要解决。

### <a name="error-budgets"></a>错误预算

如果服务不满足其 SLO, 组织可能会进行操作, 这一点非常简单, 但在达到或超过 slo 的情况下, SRE 会将这一完整的概念转到另一个步骤。 有些组织使用 slo 来构建他们调用 "错误预算" 的内容。

为了说明这一点, 我们将使用我们讨论的示例服务及其 SLO 80% 成功 (将其视为 "必须长达 80% 的时间")。 在 80% 的 SLO 中, 我们已声明我们的服务必须超过 80% 的时间。 但另一个 20% 呢？ 如果我们的服务处于其他 20% 的状态, 我们并不会真正 "在意", 因为我们已决定将额外的 20% 作为服务目标, 对我们来说并不重要。

那么, 如果我们不介意在此期间会发生什么情况, 我们可以对服务做些什么？ 当然, 我们可以通过升级它来 perturb 正在运行的服务, 也可以通过新版本添加一些功能来实现这一目的。 如果新版本保持不变, 且不会增加停机时间。 如果新版本导致服务的稳定性降低并在调试时返回错误的 10%, 则仍然可以正常工作。 我们在允许的 unreliability 预算之内。

错误预算是服务可能的完全可靠性和所需的可靠性 (100%-80% = 20%) 之间的差异。 在这种情况下, 错误预算为我们提供 20% unreliability 的基金 (20% 的时间), 在这种情况下, 我们 "不要在意, 因为它仍将处于规范中"。  我们可以使用与其他任何预算一样的方式, 以任何方式 (或许是更多的版本) 在 20% 的时间段上进行绘制和花费。

在某些组织中, 您还可以使用错误预算, 以减少不会在其中进行 SLO 的情况。 在这种情况下, 您可以选择执行一些更严格的操作, 而不只是 "采取操作", 如上所述。 假设我们的服务遇到一些问题, 已超过 60% 的时间, 如我们前面所选的 SLI 所示。 我们未实现目标 (SLO)。 我们的服务已用完其错误预算。 组织可以选择将其保留在已计划的版本上, 因为它知道 perturbing 系统甚至在此时刻可能只会进一步 worsen 可靠性的情况。 通常情况下, 错误预算是在设定的一段时间内 (一个月、一个季度, 等等) 或在服务可靠性提高的情况下计算的, 最后一个预算返回。

在此网关版期间, 组织可能会选择将一些工程资源从功能开发移到可靠性工作, 以帮助揭示和改进导致服务吹出 SLO 的问题的来源。

我们在遇到错误预算时说 "某些组织" 的原因是它们的实现, 尤其是在用于入口版本的情况下, 需要特定的机构购买。 组织必须愿意说, 在遇到发布决定时, 如果服务的可靠性不是最高为 snuff, 则该版本将被保留。 这并不是所有组织都愿意做出的决定。 这也不是对已耗尽的错误预算的唯一可能的响应, 而是最有讨论的。

我们将在单独的模块中详细了解有关 SLIs、slo 和错误预算的详细信息, 但在这些做法的 virtuous 周期方面有必要的重点。 理论上, 它提供了一种方法, 使组织能够以一种方式对服务的可靠性进行描述、通信和操作, 使每个人都能获得更好的可靠性。 此反馈循环可能相当重要。

## <a name="virtuous-cycle-2-blameless-postmortems"></a>Virtuous 循环 #2: blameless postmortems

事后对重大事件 (通常是意外事件) 的追溯分析而言, 甚至不是远程特定于网站可靠性工程。 操作世界也不常见。 一个更接近独特之处的事情是 SRE 的 insistence, postmortems 需要是 "blameless"。 他们需要重点关注过程的故障或执行事件的技术, 而不是特定人员的操作。 "什么是我们目前允许 X 来执行导致故障的事情的过程？ 此人有哪些信息不可用, 甚至在导致它们遇到错误结论的时刻也是突出的？ 应进行什么类型的 guardrails, 以便无法进行此类灾难性故障？ 这是 blameless 事后提出的问题的种类。

这些问题的 tenor 和方向是至关重要的。 他们正在搜索改进系统或过程的方法, 而不是 punish 其使用这些系统或进程的个人在中断中参与的方法。 请务必记住 "不能触发可靠的方式"。 在我们的经验中, 每次出现生产事件 (很少例外) 时都会触发人员的组织无法从这些事件中了解。 相反, 在拐角中有一个单独的, 摇动, 恐怕对所有内容进行任何更改。

但在组织中事后的正常运行过程将创建 virtuous 周期。 它让组织能够从其中断中了解, 并持续改进其系统 (提供正确的分析和后续操作)。

这种与故障和错误的关系—组织将其用于学习和改进的机会, 这是网站可靠性工程的核心原则。 构建 virtuous 周期以利用这些机会, 并指导组织更好地进行可靠性是另一个。

让我们来研究我们下一个部门中的其他一些原则和做法, 这些原则和做法在 SRE 的人中居中。
