以前, 你了解了**Azure 负载平衡器**如何帮助你实现高可用性并最大限度地减少停机时间。

虽然您的电子商务网站的可用性较高, 但它不会解决延迟的问题, 也不能跨地理区域创建弹性。

如何使网站 (位于美国) 更快地以欧洲或亚洲用户的速度加载？

## <a name="what-is-network-latency"></a>什么是网络延迟？

:::row:::
  :::column:::
    ![表示延迟的秒表](../media/4-latency.png)
  :::column-end:::
    :::column span="3":::  
_延迟_是指数据通过网络传输所需的时间。 延迟通常以毫秒为单位。

将延迟与带宽进行比较。 "带宽" 指的是可以在连接上显示的数据量。 延迟是指数据到达其目标所需的时间。
  :::column-end:::
:::row-end:::

诸如您使用的连接类型和应用程序的设计方式可能会影响延迟的因素。 但最大的因素可能是距离。

请考虑 Azure 上的电子商务网站 (美国东部地区)。 通常情况下, 将数据传输到亚特兰大 (距离400英里左右) 的时间要少得多, 而不是将数据传输到伦敦 (距离4000英里左右)。

您的电子商务网站提供标准的 HTML、CSS、JavaScript 和图像。 许多文件的网络延迟可能会增加。 如何减少位于地理位置较远的用户的延迟？

## <a name="scale-out-to-different-regions"></a>向外扩展到不同区域

回想一下, Azure 在全球范围内提供了数据中心。

:::row:::
  :::column:::
    ![表示区域向外扩展的地球](../media/4-scale-out-regions.png) 
  :::column-end:::
  :::column span="3":::
考虑构建数据中心的成本。 设备成本并不是唯一的因素。 你需要提供电源、冷却和人员, 让你的系统在每个位置都能正常运行。 复制整个数据中心可能会花费大量的成本。 但在 azure 中执行此操作可能会花费更少的成本, 因为 azure 已经有设备和人员准备就绪。
  :::column-end:::
:::row-end:::

降低延迟的一种方法是在多个区域中提供服务的精确副本。 下图显示了全局部署的示例。

![显示了一个突出显示了三个 Azure 数据中心的世界地图的插图。 每个数据中心都使用唯一的域名进行标记。](../media/4-global-deployment.png)

图中显示了在三个 Azure 区域中运行的电子商务网站: 东美国、北欧和东亚。 请注意每个的 DNS 名称。 如何将用户连接到距离地理位置最近的服务, 但在 contoso.com 域下？

## <a name="use-traffic-manager-to-route-users-to-the-closest-endpoint"></a>使用流量管理器将用户路由到最近的终结点

:::row:::
  :::column:::
    ![代表 Azure 流量管理器的标记帖子](../media/4-sign-post.png) 
  :::column-end:::
  :::column span="3":::

一个答案是**Azure 流量管理器**。 流量管理器使用最接近用户的 DNS 服务器将用户流量定向到全局分布式终结点。
  :::column-end:::
:::row-end:::

下图显示了流量管理器的角色。

![显示 Azure 流量管理器将用户请求路由到最近的数据中心的插图。 ](../media/4-traffic-manager.png)

流量管理器看不到在客户端和服务器之间传递的流量。 相反, 它会将客户端 web 浏览器定向到首选终结点。 流量管理器可以通过几种不同的方式路由通信, 例如, 延迟为最低的终结点。

虽然此处未显示, 但此安装程序还可能包括在加利福尼亚运行本地部署。 您可以将流量管理器连接到您自己的本地网络, 使您能够维护现有的数据中心投资。 你也可以将应用程序完全移动到云。 是你的选择。

## <a name="compare-load-balancer-to-traffic-manager"></a>将负载平衡器与流量管理器进行比较

:::row:::
  :::column:::
    ![放大镜](../media/4-magnifying-glass.png) 
  :::column-end:::
  :::column span="3":::
Azure 负载平衡器将通信分布在同一个区域中, 以使您的服务更高可用性和恢复能力更强。 流量管理器在 DNS 级别工作, 并将客户端定向到首选终结点。 此终结点可指向最接近你的用户的区域。

负载平衡器和流量管理器这两种方法都有助于使您的服务具有更好的可恢复性, 但采用略微 当负载平衡器检测到未响应的 vm 时, 它会将流量定向到池中的其他 vm。 流量管理器监视终结点的运行状况。 相比之下, 当流量管理器发现没有响应的终结点时, 它会将流量定向到响应速度最接近的下一个终结点。
  :::column-end:::
:::row-end:::

## <a name="summary"></a>摘要

地理距离是有助于延迟的最大因素之一。 使用流量管理器时, 您可以在多个地理区域中托管服务的精确副本。 这样一来, 美国、欧洲和亚洲的用户就可以使用电子商务网站。
