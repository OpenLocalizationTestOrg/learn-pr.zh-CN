Lamna 医疗保健为其临床医生托管旧版内部应用程序和 web 门户, 以管理患者运行状况数据。 组织已收到对此应用程序的许多请求, 可供医护人员在经常与患者一起使用, 因此在网络外部的工作场所使用。 

恶意代理的最新数据泄露强制公司加强其密码策略。 现在, 他们需要用户更频繁地更改其密码, 并使用更长、更复杂的密码。 这导致用户在记录复杂密码 insecurely 时产生不必要的副作用, 因为他们在努力记住为不同管理角色创建的多组凭据。 

在这里, 我们将作为内部和外部应用程序的安全层讨论标识, 单一登录 (SSO) 和多重身份验证 (MFA) 的优势, 以提供标识安全性, 以及为什么要考虑将本地身份复制到 AzureActive Directory。

## <a name="identity-as-a-layer-of-security"></a>作为安全层的标识

数字标识是当今业务和社交交互在本地和联机方面不可或缺的一部分。 过去, 标识和访问服务限制为在公司内部网络中运行, 使用为此目的而设计的协议 (如 Kerberos 和 LDAP)。 最近, 移动设备已成为人们与数字服务进行交互的主要方式。 客户和员工都希望能够随时从任何位置访问服务, 这已促进了标识协议的开发, 可以跨多个不同的设备和操作系统在 internet 规模上工作。

在他们评估其体系结构围绕身份的能力时, Lamna 医疗保健正在寻找可在其应用程序中引入以下功能的方法:

- 向应用程序用户提供单点登录
- 增强旧版应用程序以最小努力使用新式验证
- 为公司网络外部的所有登录强制执行多因素身份验证
- 开发允许患者注册和安全管理其帐户数据的应用程序

## <a name="single-sign-on"></a>单一登录

用户需要管理的身份越多, 与凭据相关的安全事件的风险就越大。 更多标识意味着要记住和更改的更多密码。 密码策略在应用程序之间有所不同, 并且随着复杂性要求的增加, 更难让用户记住这些策略。

另一端是所有这些标识所需的管理。 当用户处理帐户锁定和密码重置请求时, 会将额外的压力放在帮助办公桌上。 如果用户离开组织, 则跟踪所有这些标识并确保它们已被禁用可能会非常困难。 如果某个标识被忽略, 这可能会允许在已消除它时进行访问。

通过单一登录, 用户只需记住一个 ID 和一个密码。 应用程序之间的访问权限被授予一个与用户相关联的标识, 从而简化了安全模型。 当用户更改角色或离开组织时, 访问修改将与单个标识相关联, 从而大大减少更改或禁用帐户所需的工作量。 为帐户使用单一登录可使用户更轻松地管理自己的身份, 并将提高环境中的安全功能。

### <a name="sso-with-azure-active-directory"></a>具有 Azure Active Directory 的 SSO

Azure Active Directory (AD) 是基于云的标识服务。 它提供了与现有本地 Active Directory 同步的内置支持, 也可以独立使用。 这意味着, 无论是内部部署 (包括 Office 365) 还是移动版, 你的所有应用程序都可以共享相同的凭据。 管理员和开发人员可以使用在 Azure AD 中配置的集中式规则和策略来控制对数据和应用程序的访问。

通过利用适用于 SSO 的 Azure AD, 您还可以将多个数据源组合到一个智能安全图形中。 此安全图表使您能够为 Azure AD 中的所有帐户提供威胁分析和实时身份保护, 包括从本地 AD 同步的帐户。 通过使用集中的标识提供程序, 您可以集中管理身份基础结构的安全控制、报告、警报和管理。

### <a name="synchronize-directories-with-ad-connect"></a>将目录与 AD Connect 同步

azure AD Connect 将你的本地目录与 Azure Active Directory 集成。 Azure AD Connect 提供了最新功能, 并替代了旧版本的身份集成工具, 如 DirSync 和 Azure AD 同步。

它是一个工具, 可为同步和登录提供简单的部署体验。

![显示用于将本地目录与 azure Active directory 和 azure 云中的应用同步的 azure AD connect 的插图。 这使用户可以在 Azure 云中的所有应用程序中使用通用登录。](../media/AADCONNECTxprs_960.png)

Lamna 医疗保健要求身份验证主要针对内部部署 dc 进行身份验证, 但在灾难恢复方案中也需要云身份验证。 它们没有 Azure AD 支持的任何要求。

Lamna 医疗保健已做出以下配置的决定:

- 使用 Azure ad Connect 可将存储在本地 Active Directory 中的组、用户帐户和密码哈希同步到 Azure AD
  - 如果传递身份验证不可用, 则可将其用作备份
- 使用安装在本地 Windows Server 上的本地身份验证代理配置传递身份验证
- 使用 Azure AD 的无缝单一登录功能, 以自动登录本地加入域的电脑中的用户
  - 通过禁止多个身份验证请求减少用户摩擦

## <a name="authentication--access"></a>身份验证 & 访问

Lamna 保健的安全策略要求在公司外围网络外部发生的所有登录都使用其他身份验证因素进行身份验证。 此要求结合了 Azure AD 服务的两个方面: 多因素身份验证和条件访问策略。

### <a name="multi-factor-authentication"></a>多因素身份验证

多重身份验证 (MFA) 通过要求两个或更多元素进行完全身份验证来为你的身份验证提供额外的安全性。 这些元素分为三类:

- *您知道的东西*
- *您拥有的内容*
- *您所做的*

**您知道的内容**可能是密码, 也可能是安全问题的答案。 **您所拥有的内容**可以是接收通知或令牌生成设备的移动应用程序。 **您**通常是某种生物特征属性, 例如在许多移动设备上使用的指纹扫描或面孔扫描。

使用多重身份验证可限制凭据泄露的影响, 从而提高身份的安全性。 拥有用户密码的攻击者还需要拥有自己的电话或其脸才能完全进行身份验证。 仅通过验证单个因素进行身份验证是不够的, 并且攻击者无法使用这些凭据进行身份验证。 此安全性带来的好处是巨大的, 并且无法在可能的情况下重复启用 MFA。

Azure AD 具有内置的 MFA 功能, 并将与其他第三方 MFA 提供程序集成。 为在 Azure AD 中具有全局管理员角色的任何用户免费提供此权限, 因为这些帐户是高度敏感的帐户。 所有其他帐户都可以通过购买具有此功能的许可证并为帐户分配许可证来启用 MFA。

### <a name="conditional-access-policies"></a>条件访问策略

与 MFA 一起, 确保在授予访问权限之前满足其他要求, 以添加另一层保护。 阻止来自可疑 IP 地址的登录, 或拒绝来自没有恶意软件保护的设备的访问可以限制来自有风险的登录的访问权限。

Azure Active Directory 提供了条件访问策略 (CAP) 功能, 其中包括基于组、位置或设备状态的访问策略支持。 位置功能允许 Lamna 区分不属于其网络的 IP 地址, 并满足其安全策略要求从所有此类位置进行多重身份验证。

Lamna 保健创建了[条件访问策略](https://docs.microsoft.com/azure/active-directory/conditional-access/overview), 要求用户从公司网络外部的 IP 地址访问应用程序, 以通过 MFA 质询。

![显示条件访问策略和多重身份验证的示例实现的插图。 首先对照条件列表检查用户对本地和云应用程序的访问请求。 请求可以访问、强制实施多因素身份验证或根据其所满足的条件被阻止。](../media/conditional-access.png)

## <a name="securing-legacy-applications"></a>保护旧版应用程序

Lamna 医疗保健员工需要安全的远程访问托管在内部部署的管理应用程序。 用户当前使用 Windows 集成身份验证 (WIA) 从其加入域的计算机向应用程序进行身份验证 (在企业防火墙后面)。 尽管已计划了将新式身份验证机制纳入应用程序的项目, 但尽可能快地启用远程访问功能存在相当大的业务压力。 Azure 应用程序代理可以快速、轻松且安全地在不进行任何代码更改的情况下远程访问应用程序。

Azure AD 应用程序代理为:

- 简单
  - 您无需更改或更新应用程序即可使用应用程序代理。
  - 您的用户获得一致的身份验证体验。 他们可以使用 MyApps 门户为云中的 SaaS 应用程序和本地应用程序获取单一登录。
- 安全
  - 使用 azure AD 应用程序代理发布应用程序时, 可以利用 azure 中丰富的授权控制和安全分析。 你可以获取云规模安全性和 Azure 安全功能, 如条件访问和两步验证。
  - 您无需通过防火墙打开任何入站连接, 即可向您的用户授予远程访问权限。
- 经济高效
  - 应用程序代理在云中工作, 因此您可以节省时间和资金。 本地解决方案通常要求您设置和维护 DMZs、边缘服务器或其他复杂的基础结构。

Azure AD 应用程序代理由两个组件组成: 驻留在企业网络内的 Windows 服务器和外部终结点 (无论是 MyApps 门户还是外部 URL) 的连接器代理。 当用户导航到终结点时, 将通过连接器代理对 Azure AD 进行身份验证并将其路由到内部部署应用程序。

## <a name="working-with-consumer-identities"></a>使用消费者标识

由于将新式身份验证与现有应用程序集成, 因此 Lamna 医疗保健已快速确认了对托管身份系统 (如 Azure AD) 的强大威力。 领导团队现在对探索其他 Microsoft identity services 可以增加业务价值的方式感兴趣。 他们现在重点关注外部客户, 以及现有客户交互的新式化如何能够与 Google、Facebook 和 LinkedIn 等第三方标识提供程序进行紧密集成。

azure AD B2C 是基于 Azure Active Directory 的坚实基础构建的标识管理服务, 使您能够在使用应用程序时自定义和控制客户注册、登录和管理其配置文件的方式。 这包括为 iOS、Android 和 .net 开发的应用程序以及其他。 Azure AD B2C 提供了社交身份登录体验, 同时保护客户标识配置文件信息。 azure ad B2C 目录与标准 Azure ad 目录不同, 并且可以在 Azure 门户中创建。

## <a name="identity-management-at-lamna-healthcare"></a>Lamna 保健中的身份管理

我们已在此处了解 Lamna 保健如何在 Azure 上使用身份管理解决方案来提高环境的安全性。 他们已经开始, 为用户提供单一登录体验, 以最大限度地减少用户必须处理的帐户, 并降低多余帐户带来的操作复杂性。 他们强制进行 MFA 以访问其应用程序, 并已更新旧版应用程序以最大限度地使用新式验证。 他们还了解了如何提高其使用者身份的能力, 从而改进了应用程序对患者的可用性。

## <a name="summary"></a>摘要

在此单元中, 我们了解了如何组合 Azure Active Directory 的多个功能, 以提供可靠的身份解决方案来保护对应用程序的访问, 而无需考虑它们的位置。 Identity 是一个重要的安全层。 如果设计良好并包含在体系结构中, 则可以确保您的环境是安全的。