:::row:::
  :::column:::
    ![表示 Azure 虚拟机的图像](../media/3-azure-vms.png)
  :::column-end:::
  :::column span="3":::
<span data-ttu-id="7c3cc-102">Azure 虚拟机允许你在云中创建和使用虚拟机。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-102">Azure VMs lets you create and use virtual machines in the cloud.</span></span> <span data-ttu-id="7c3cc-103">它们以虚拟化服务器的形式提供了基础结构作为服务 (IaaS), 可通过多种不同的方式使用。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-103">They provide infrastructure as a service (IaaS) in the form of a virtualized server and can be used in a variety of different ways.</span></span> <span data-ttu-id="7c3cc-104">就像物理计算机一样, 您可以自定义在 VM 上运行的所有软件。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-104">Just like a physical computer, you're able to customize all of the software running on the VM.</span></span> <span data-ttu-id="7c3cc-105">当您需要对 OS 进行全面控制或需要运行自定义软件或使用自定义托管配置时, 这将使其成为理想选择。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-105">This makes them an ideal choice when you need total control over the OS or when you need to run custom software or use custom hosting configurations.</span></span>
  :::column-end:::
:::row-end:::

<span data-ttu-id="7c3cc-106">通常情况下, 可以通过选择预先配置的虚拟机映像, 在几分钟内创建和配置新的虚拟机。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-106">Typically, new virtual machines can be created and provisioned in minutes by selecting a pre-configured virtual machine image.</span></span> <span data-ttu-id="7c3cc-107">选择图像是创建 VM 时所做的最重要决定之一。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-107">Selecting an image is one of the most important decisions you'll make when creating a VM.</span></span> <span data-ttu-id="7c3cc-108">图像是用于创建虚拟机的模板。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-108">An image is a template used to create a virtual machine.</span></span> <span data-ttu-id="7c3cc-109">这些模板已包含操作系统 (OS), 通常是其他软件, 如开发工具或 web 托管环境。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-109">These templates already include an operating system (OS) and often other software, such as development tools or web hosting environments.</span></span>

## <a name="moving-to-the-cloud-with-vms"></a><span data-ttu-id="7c3cc-110">使用 vm 迁移到云</span><span class="sxs-lookup"><span data-stu-id="7c3cc-110">Moving to the cloud with VMs</span></span>

<span data-ttu-id="7c3cc-111">在从物理服务器移动到云 ("抬起和转换") 时, 虚拟机也是极好的选择。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-111">VMs are also an excellent choice when moving from a physical server to the cloud ("lift and shift").</span></span> <span data-ttu-id="7c3cc-112">您可以创建物理服务器的映像, 并将其托管在虚拟机中, 而无需进行任何更改。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-112">You can create an image of the physical server and host it within a virtual machine with little or no changes.</span></span> <span data-ttu-id="7c3cc-113">就像物理本地服务器一样, 你将需要维护虚拟机。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-113">Just like a physical on-premises server, you'll be required to maintain the virtual machine.</span></span> <span data-ttu-id="7c3cc-114">这意味着更新操作系统及其运行的软件。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-114">This means updating the operating system and the software it runs.</span></span> 

## <a name="scaling-vms-in-azure"></a><span data-ttu-id="7c3cc-115">在 Azure 中扩展虚拟机</span><span class="sxs-lookup"><span data-stu-id="7c3cc-115">Scaling VMs in Azure</span></span>

<span data-ttu-id="7c3cc-116">您可以为测试、开发或次要任务运行单个虚拟机, 也可以将 vm 组合在一起, 以提供高可用性、可伸缩性和冗余。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-116">You can run single VMs for testing, development, or minor tasks, or group VMs together to provide high availability, scalability, and redundancy.</span></span> <span data-ttu-id="7c3cc-117">azure 有几项专门用于这些关键功能的功能, 以确保无论正常运行时间要求如何, azure 都能满足这些要求。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-117">Azure has several features devoted to these critical features to ensure that no matter what your uptime requirements are, Azure can meet them.</span></span>

- <span data-ttu-id="7c3cc-118">可用性集</span><span class="sxs-lookup"><span data-stu-id="7c3cc-118">Availability sets</span></span>
- <span data-ttu-id="7c3cc-119">虚拟机规模集</span><span class="sxs-lookup"><span data-stu-id="7c3cc-119">Virtual machine scale sets</span></span>
- <span data-ttu-id="7c3cc-120">Azure 批处理</span><span class="sxs-lookup"><span data-stu-id="7c3cc-120">Azure Batch</span></span>

### <a name="what-are-availability-sets"></a><span data-ttu-id="7c3cc-121">什么是可用性集？</span><span class="sxs-lookup"><span data-stu-id="7c3cc-121">What are availability sets?</span></span>

<span data-ttu-id="7c3cc-122">**可用性集**是两个或更多个虚拟机的逻辑分组, 可确保您的应用程序在计划内或计划外维护期间仍可用。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-122">An **availability set** is a logical grouping of two or more VMs that ensure your application remains available during planned or unplanned maintenance.</span></span>

<span data-ttu-id="7c3cc-123">_计划的维护事件_是 Microsoft 对托管虚拟机的基础 Azure fabric 进行更新的时间。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-123">A _planned maintenance event_ is when the underlying Azure fabric that hosts virtual machines is updated by Microsoft.</span></span> <span data-ttu-id="7c3cc-124">这样做是为了修补安全漏洞、提高性能以及添加或更新功能。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-124">This is done to patch security vulnerabilities, improve performance, and add or update features.</span></span> <span data-ttu-id="7c3cc-125">大多数情况下, 可以在不影响来宾 vm 的情况下执行这些更新-但是, 有时需要重新启动才能完成更新。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-125">Most of the time these updates can be performed without any impact to the guest VMs - however, sometimes it requires a reboot to complete an update.</span></span> <span data-ttu-id="7c3cc-126">如果 VM 是可用性集的一部分, 则 Azure fabric 将确保对更新进行排序, 以便不会同时重新启动所有关联的虚拟机。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-126">When the VM is part of an availability set, the Azure fabric will ensure updates are sequenced so not all of the associated VMs are rebooted at the same time.</span></span> <span data-ttu-id="7c3cc-127">此分组称为_更新域_。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-127">This grouping is referred to as an _update domain_.</span></span> <span data-ttu-id="7c3cc-128">Update 域是每个数据中心的逻辑部分, 通过软件和逻辑实现。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-128">Update domains are a logical part of each datacenter and are implemented with software and logic.</span></span>

<span data-ttu-id="7c3cc-129">_计划外维护事件_是指那些涉及数据中心中的硬件故障 (例如断电或磁盘故障) 的事件。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-129">_Unplanned maintenance events_ are those which involve a hardware failure in the datacenter, such as a power outage or disk failure.</span></span> <span data-ttu-id="7c3cc-130">作为可用性集一部分的虚拟机将自动切换到正在运行的物理服务器, 以使 vm 继续运行。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-130">VMs that are part of an availability set will automatically switch to a working physical server to the VM continues to run.</span></span> <span data-ttu-id="7c3cc-131">此组称为_容错域_。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-131">This group is referred to as a _fault domain_.</span></span> <span data-ttu-id="7c3cc-132">容错域实质上是一台服务器机架。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-132">A fault domain is essentially a rack of servers.</span></span> <span data-ttu-id="7c3cc-133">它提供了在数据中心中的不同硬件之间物理分离工作负载的情况。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-133">It provides the physical separation of your workload across different hardware in the datacenter.</span></span> <span data-ttu-id="7c3cc-134">这包括支持位于服务器机架中的物理服务器的电源、冷却和网络硬件。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-134">This includes power, cooling, and network hardware that supports the physical servers located in server racks.</span></span> <span data-ttu-id="7c3cc-135">如果支持服务器机架的硬件变得不可用, 则中断仅影响服务器机架。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-135">In the event the hardware that supports a server rack becomes unavailable, only that rack of servers would be affected by the outage.</span></span>

<span data-ttu-id="7c3cc-136">Azure 创建两个故障域 (两个机架, 每个都有专用的电源和网络资源) 和五个逻辑更新域。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-136">Azure creates two fault domains (two racks each having dedicated power and network resources), and five logical update domains.</span></span> <span data-ttu-id="7c3cc-137">然后, 你的 vm 按顺序放在创建的域中, 如下所示。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-137">Your VMs are then sequentially placed across the created domains as shown here.</span></span>

![Azure 中的可用性集, 显示跨服务器复制的更新域和故障域](../media/3-availability-sets.png)

<span data-ttu-id="7c3cc-139">可用性集没有成本;仅为集中的 vm 付费。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-139">There is no cost for an availability set; you only pay for the VMs within the set.</span></span> <span data-ttu-id="7c3cc-140">强烈建议将每个工作负荷放在可用性集内, 以确保 VM 体系结构中不存在单点故障。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-140">It's highly recommended to place each workload in an availability set to ensure you don't have a single point of failure in your VM architecture.</span></span>

### <a name="what-are-virtual-machine-scale-sets"></a><span data-ttu-id="7c3cc-141">什么是虚拟机规模集？</span><span class="sxs-lookup"><span data-stu-id="7c3cc-141">What are virtual machine scale sets?</span></span>

<span data-ttu-id="7c3cc-142">使用 Azure 虚拟机扩展集, 可以创建和管理一组相同的负载平衡虚拟机。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-142">Azure virtual machine scale sets let you create and manage a group of identical, load balanced VMs.</span></span> <span data-ttu-id="7c3cc-143">假设您正在运行一个网站, 使科学家能够上载需要处理的已对用户的图像。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-143">Imagine you're running a website that enables scientists to upload astronomy images that need to be processed.</span></span> <span data-ttu-id="7c3cc-144">如果复制了 VM, 则通常需要配置其他服务以在网站的多个实例之间路由请求。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-144">If you duplicated the VM, you'd normally need to configure an additional service to route requests between multiple instances of the website.</span></span> <span data-ttu-id="7c3cc-145">这正是 VM 扩展集为你实现的功能。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-145">This is exactly what VM scale sets do for you.</span></span>

<span data-ttu-id="7c3cc-146">利用扩展集, 可以在几分钟内集中管理、配置和更新大量 vm, 以提供高可用性的应用程序。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-146">Scale sets allow you to centrally manage, configure, and update a large number of VMs in minutes to provide highly available applications.</span></span> <span data-ttu-id="7c3cc-147">VM 实例的数量可以根据需求或定义的计划自动增加或减少。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-147">The number of VM instances can automatically increase or decrease in response to demand or a defined schedule.</span></span> <span data-ttu-id="7c3cc-148">使用虚拟机扩展集, 可以为计算、大型数据和容器工作负荷等区域构建大规模服务。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-148">With virtual machine scale sets, you can build large-scale services for areas such as compute, big data, and container workloads.</span></span>

### <a name="what-is-azure-batch"></a><span data-ttu-id="7c3cc-149">什么是 Azure Batch？</span><span class="sxs-lookup"><span data-stu-id="7c3cc-149">What is Azure Batch?</span></span>

<span data-ttu-id="7c3cc-150">Azure Batch 支持大规模作业调度和计算管理, 能够扩展到数万、数百或数千个虚拟机。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-150">Azure Batch enables large-scale job scheduling and compute management with the ability to scale to tens, hundreds, or thousands of VMs.</span></span> 

<span data-ttu-id="7c3cc-151">当您准备好运行作业时, 批处理将为您启动一个计算虚拟机池, 安装应用程序和临时数据, 运行包含任意多个任务的作业, 识别故障并重新排队工作, 并在工作完成时向下扩展池。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-151">When you're ready to run a job, Batch starts a pool of compute virtual machines for you, installing applications and staging data, running jobs with as many tasks as you have, identifying failures and re-queuing work, and scaling down the pool as work completes.</span></span> 

<span data-ttu-id="7c3cc-152">在某些情况下, 您可能需要原始计算功率或 supercomputer 级别的计算能力;Azure 提供这些功能。</span><span class="sxs-lookup"><span data-stu-id="7c3cc-152">There may be situations in which you need raw computing power or supercomputer level compute power; Azure provides these capabilities.</span></span>
