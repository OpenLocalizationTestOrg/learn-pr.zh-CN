:::row:::
  :::column:::
    ![表示无服务器计算的图像](../media/6-serverless.png)
  :::column-end:::
    :::column span="3":::
    使用_无服务器_计算, Azure 将负责管理服务器基础结构, 并根据需要对资源进行分配/解除分配。 基础结构不是你的责任。 扩展和性能会自动处理, 并且您仅对您使用的确切资源计费。 甚至无需预留容量。

    只关注您需要执行的逻辑和用于运行代码的_触发器_。 将无服务器应用程序配置为响应_事件_。 这可以是 REST 终结点、定期计时器, 甚至是从另一个 Azure 服务收到的邮件。 无服务器应用程序仅在事件触发时才运行。
  :::column-end:::
:::row-end:::

#### <a name="serverless-computing-in-azure"></a>Azure 中的无服务器计算

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yzjL]

Azure 有两种无服务器计算实现:

- 可通过几乎任何新式语言执行代码的**Azure 函数**。
- 在基于 web 的设计器中设计的**Azure 逻辑应用程序**, 可以执行 azure 服务触发的逻辑, 而无需编写任何代码。

## <a name="azure-functions"></a>Azure 函数

当您仅关注运行服务的代码 (而不是基础平台或基础结构) 时, Azure 函数是理想的。 当您需要对事件执行工作 (通常通过 REST 请求、计时器或来自其他 Azure 服务的消息, 以及在数秒或更短时间内可以快速完成工作) 时, 通常使用它们。 

Azure 函数根据需求自动进行扩展, 因此当 demand 为可变时, 它们是可靠的选择。 例如, 您可能会收到来自 IoT 解决方案的邮件, 用于监视一汽油传递车辆。 你可能会在营业时间收到更多的数据。

使用基于 vm 的方法, 即使虚拟机处于空闲状态, 我们也会承担成本。 通过函数, Azure 在触发时运行代码, 并在函数完成时自动释放资源。 在此模型中, 仅在运行函数时对所用的 CPU 时间收费。  

此外, Azure 函数可以是无状态 (默认值), 它们的行为方式就好像是在每次响应事件时重新启动一样, 要么是状态 (称为 "耐用函数"), 通过函数传递上下文以跟踪之前的活动。

## <a name="azure-logic-apps"></a>Azure 逻辑应用程序

Azure 逻辑应用程序类似于函数-两者都允许您根据事件触发逻辑。 在函数执行代码的地方, 逻辑应用程序从预定义的逻辑块中执行生成的_工作流_。 它们专为自动化业务流程而设计。

可以使用 Azure 门户上的可视化设计器或在 visual Studio 中创建逻辑应用工作流。 工作流将保留为具有已知工作流架构的 JSON 文件。

Azure 提供了200多种不同的连接器和处理块, 以与不同的服务 (包括最热门的企业应用程序) 进行交互。 如果您需要与其交互的服务不包含在内, 则还可以生成自定义连接器和工作流步骤。 然后, 您可以使用可视化设计器将连接器和块链接在一起, 通过工作流传递数据以进行自定义处理-通常不编写任何代码。

例如, 假设票证到达了 ZenDesk。 可以执行以下操作:

1. 使用认知服务检测邮件的意图
1. 在 Sharepoint 中创建用于跟踪问题的项
1. 如果客户不在您的数据库中, 则将其添加到 Dynamics 365 CRM 系统
1. 发送跟进电子邮件以确认其请求

所有这些都可以在可视化设计器中设计, 使您能够轻松地查看非常适合业务分析员角色的逻辑流。

## <a name="functions-vs-logic-apps"></a>函数与逻辑应用程序

函数和逻辑应用程序都可以创建复杂的业务流程。 业务流程是执行的用于完成复杂任务的函数或步骤的集合。 使用 Azure 函数, 您可以编写代码来完成每个步骤, 使用逻辑应用程序, 可以使用 GUI 定义操作以及它们之间的关系。

您可以在构建业务流程时混合和匹配服务, 从逻辑应用程序调用函数和调用函数中的逻辑应用程序。 以下是两者之间的一些常见差异。

|-| 函数 |    逻辑应用程序 |
|-|-------------------|------------|
| 状态 | 通常是无状态的, 但耐用函数提供状态 | 有状态 |
| 研发 | Code-first (命令式) | Designer-first (声明性) |
| 连接 | 关于十二个内置绑定类型, 请为自定义绑定编写代码 | 大型连接器集、用于 B2B 方案的企业集成包、构建自定义连接器 |
| Actions | 每个活动都是一个 Azure 功能;为活动函数编写代码 | 较大的准备操作集合 |
| 监视 | Azure Application Insights | Azure 门户、日志分析 |
| Management | REST API, Visual Studio | Azure 门户、REST API、PowerShell、Visual Studio |
| 执行上下文 | 可以在本地或在云中运行 | 仅在云中运行。 |