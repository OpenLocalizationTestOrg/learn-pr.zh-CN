:::row:::
  :::column:::
    ![表示无服务器计算的图像](../media/6-serverless.png)
  :::column-end:::
    :::column span="3":::
    <span data-ttu-id="1995c-102">使用_无服务器_计算, Azure 将负责管理服务器基础结构, 并根据需要对资源进行分配/解除分配。</span><span class="sxs-lookup"><span data-stu-id="1995c-102">With _serverless_ computing, Azure takes care of managing the server infrastructure and allocation/deallocation of resources based on demand.</span></span> <span data-ttu-id="1995c-103">基础结构不是你的责任。</span><span class="sxs-lookup"><span data-stu-id="1995c-103">Infrastructure isn't your responsibility.</span></span> <span data-ttu-id="1995c-104">扩展和性能会自动处理, 并且您仅对您使用的确切资源计费。</span><span class="sxs-lookup"><span data-stu-id="1995c-104">Scaling and performance are handled automatically, and you are billed only for the exact resources you use.</span></span> <span data-ttu-id="1995c-105">甚至无需预留容量。</span><span class="sxs-lookup"><span data-stu-id="1995c-105">There's no need to even reserve capacity.</span></span>

    <span data-ttu-id="1995c-106">只关注您需要执行的逻辑和用于运行代码的_触发器_。</span><span class="sxs-lookup"><span data-stu-id="1995c-106">You focus solely on the logic you need to execute and the _trigger_ that is used to run your code.</span></span> <span data-ttu-id="1995c-107">将无服务器应用程序配置为响应_事件_。</span><span class="sxs-lookup"><span data-stu-id="1995c-107">You configure your serverless apps to respond to _events_.</span></span> <span data-ttu-id="1995c-108">这可以是 REST 终结点、定期计时器, 甚至是从另一个 Azure 服务收到的邮件。</span><span class="sxs-lookup"><span data-stu-id="1995c-108">This could be a REST endpoint, a periodic timer, or even a message received from another Azure service.</span></span> <span data-ttu-id="1995c-109">无服务器应用程序仅在事件触发时才运行。</span><span class="sxs-lookup"><span data-stu-id="1995c-109">The serverless app runs only when it's triggered by an event.</span></span>
  :::column-end:::
:::row-end:::

#### <a name="serverless-computing-in-azure"></a><span data-ttu-id="1995c-110">Azure 中的无服务器计算</span><span class="sxs-lookup"><span data-stu-id="1995c-110">Serverless computing in Azure</span></span>

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yzjL]

<span data-ttu-id="1995c-111">Azure 有两种无服务器计算实现:</span><span class="sxs-lookup"><span data-stu-id="1995c-111">Azure has two implementations of serverless compute:</span></span>

- <span data-ttu-id="1995c-112">可通过几乎任何新式语言执行代码的**Azure 函数**。</span><span class="sxs-lookup"><span data-stu-id="1995c-112">**Azure Functions** which can execute code in almost any modern language.</span></span>
- <span data-ttu-id="1995c-113">在基于 web 的设计器中设计的**Azure 逻辑应用程序**, 可以执行 azure 服务触发的逻辑, 而无需编写任何代码。</span><span class="sxs-lookup"><span data-stu-id="1995c-113">**Azure Logic Apps** which are designed in a web-based designer and can execute logic triggered by Azure services without writing any code.</span></span>

## <a name="azure-functions"></a><span data-ttu-id="1995c-114">Azure 函数</span><span class="sxs-lookup"><span data-stu-id="1995c-114">Azure Functions</span></span>

<span data-ttu-id="1995c-115">当您仅关注运行服务的代码 (而不是基础平台或基础结构) 时, Azure 函数是理想的。</span><span class="sxs-lookup"><span data-stu-id="1995c-115">When you're concerned only about the code running your service, and not the underlying platform or infrastructure, Azure Functions are ideal.</span></span> <span data-ttu-id="1995c-116">当您需要对事件执行工作 (通常通过 REST 请求、计时器或来自其他 Azure 服务的消息, 以及在数秒或更短时间内可以快速完成工作) 时, 通常使用它们。</span><span class="sxs-lookup"><span data-stu-id="1995c-116">They're commonly used when you need to perform work in response to an event, often via a REST request, timer, or message from another Azure service and when that work can be completed quickly, within seconds or less.</span></span> 

<span data-ttu-id="1995c-117">Azure 函数根据需求自动进行扩展, 因此当 demand 为可变时, 它们是可靠的选择。</span><span class="sxs-lookup"><span data-stu-id="1995c-117">Azure Functions scale automatically based on demand, so they're a solid choice when demand is variable.</span></span> <span data-ttu-id="1995c-118">例如, 您可能会收到来自 IoT 解决方案的邮件, 用于监视一汽油传递车辆。</span><span class="sxs-lookup"><span data-stu-id="1995c-118">For example, you may be receiving messages from an IoT solution used to monitor a fleet of delivery vehicles.</span></span> <span data-ttu-id="1995c-119">你可能会在营业时间收到更多的数据。</span><span class="sxs-lookup"><span data-stu-id="1995c-119">You'll likely have more data arriving during business hours.</span></span>

<span data-ttu-id="1995c-120">使用基于 vm 的方法, 即使虚拟机处于空闲状态, 我们也会承担成本。</span><span class="sxs-lookup"><span data-stu-id="1995c-120">Using a VM-based approach, we'd incur costs even when the VM is idle.</span></span> <span data-ttu-id="1995c-121">通过函数, Azure 在触发时运行代码, 并在函数完成时自动释放资源。</span><span class="sxs-lookup"><span data-stu-id="1995c-121">With functions, Azure runs your code when it's triggered and automatically deallocates resources when the function is finished.</span></span> <span data-ttu-id="1995c-122">在此模型中, 仅在运行函数时对所用的 CPU 时间收费。</span><span class="sxs-lookup"><span data-stu-id="1995c-122">In this model, you're only charged for the CPU time used while your function runs.</span></span>  

<span data-ttu-id="1995c-123">此外, Azure 函数可以是无状态 (默认值), 它们的行为方式就好像是在每次响应事件时重新启动一样, 要么是状态 (称为 "耐用函数"), 通过函数传递上下文以跟踪之前的活动。</span><span class="sxs-lookup"><span data-stu-id="1995c-123">Furthermore, Azure Functions can be either stateless (the default) where they behave as if they're restarted every time they respond to an event), or stateful (called "Durable Functions") where a context is passed through the function to track prior activity.</span></span>

## <a name="azure-logic-apps"></a><span data-ttu-id="1995c-124">Azure 逻辑应用程序</span><span class="sxs-lookup"><span data-stu-id="1995c-124">Azure Logic Apps</span></span>

<span data-ttu-id="1995c-125">Azure 逻辑应用程序类似于函数-两者都允许您根据事件触发逻辑。</span><span class="sxs-lookup"><span data-stu-id="1995c-125">Azure Logic Apps are similar to Functions - both enable you to trigger logic based on an event.</span></span> <span data-ttu-id="1995c-126">在函数执行代码的地方, 逻辑应用程序从预定义的逻辑块中执行生成的_工作流_。</span><span class="sxs-lookup"><span data-stu-id="1995c-126">Where Functions execute code, Logic Apps execute _workflows_ built from predefined logic blocks.</span></span> <span data-ttu-id="1995c-127">它们专为自动化业务流程而设计。</span><span class="sxs-lookup"><span data-stu-id="1995c-127">They are specifically designed to automate your business processes.</span></span>

<span data-ttu-id="1995c-128">可以使用 Azure 门户上的可视化设计器或在 visual Studio 中创建逻辑应用工作流。</span><span class="sxs-lookup"><span data-stu-id="1995c-128">You create Logic App workflows using a visual designer on the Azure Portal or in Visual Studio.</span></span> <span data-ttu-id="1995c-129">工作流将保留为具有已知工作流架构的 JSON 文件。</span><span class="sxs-lookup"><span data-stu-id="1995c-129">The workflows are persisted as a JSON file with a known workflow schema.</span></span>

<span data-ttu-id="1995c-130">Azure 提供了200多种不同的连接器和处理块, 以与不同的服务 (包括最热门的企业应用程序) 进行交互。</span><span class="sxs-lookup"><span data-stu-id="1995c-130">Azure provides over 200 different connectors and processing blocks to interact with different services - including most popular enterprise apps.</span></span> <span data-ttu-id="1995c-131">如果您需要与其交互的服务不包含在内, 则还可以生成自定义连接器和工作流步骤。</span><span class="sxs-lookup"><span data-stu-id="1995c-131">You can also build custom connectors and workflow steps if the service you need to interact with isn't covered.</span></span> <span data-ttu-id="1995c-132">然后, 您可以使用可视化设计器将连接器和块链接在一起, 通过工作流传递数据以进行自定义处理-通常不编写任何代码。</span><span class="sxs-lookup"><span data-stu-id="1995c-132">You then use the visual designer to link connectors and blocks together, passing data through the workflow to do custom processing - often all without writing any code.</span></span>

<span data-ttu-id="1995c-133">例如, 假设票证到达了 ZenDesk。</span><span class="sxs-lookup"><span data-stu-id="1995c-133">As an example, let's say a ticket arrives in ZenDesk.</span></span> <span data-ttu-id="1995c-134">可以执行以下操作:</span><span class="sxs-lookup"><span data-stu-id="1995c-134">You could:</span></span>

1. <span data-ttu-id="1995c-135">使用认知服务检测邮件的意图</span><span class="sxs-lookup"><span data-stu-id="1995c-135">Detect the intent of the message with cognitive services</span></span>
1. <span data-ttu-id="1995c-136">在 Sharepoint 中创建用于跟踪问题的项</span><span class="sxs-lookup"><span data-stu-id="1995c-136">Create an item in Sharepoint to track the issue</span></span>
1. <span data-ttu-id="1995c-137">如果客户不在您的数据库中, 则将其添加到 Dynamics 365 CRM 系统</span><span class="sxs-lookup"><span data-stu-id="1995c-137">If the customer isn't in your database, add them to your Dynamics 365 CRM system</span></span>
1. <span data-ttu-id="1995c-138">发送跟进电子邮件以确认其请求</span><span class="sxs-lookup"><span data-stu-id="1995c-138">Send a follow-up email to acknowledge their request</span></span>

<span data-ttu-id="1995c-139">所有这些都可以在可视化设计器中设计, 使您能够轻松地查看非常适合业务分析员角色的逻辑流。</span><span class="sxs-lookup"><span data-stu-id="1995c-139">All of that could be designed in a visual designer making it easy to see the logic flow which is ideal for a business analyst role.</span></span>

## <a name="functions-vs-logic-apps"></a><span data-ttu-id="1995c-140">函数与逻辑应用程序</span><span class="sxs-lookup"><span data-stu-id="1995c-140">Functions vs. Logic Apps</span></span>

<span data-ttu-id="1995c-141">函数和逻辑应用程序都可以创建复杂的业务流程。</span><span class="sxs-lookup"><span data-stu-id="1995c-141">Functions and Logic Apps can both create complex orchestrations.</span></span> <span data-ttu-id="1995c-142">业务流程是执行的用于完成复杂任务的函数或步骤的集合。</span><span class="sxs-lookup"><span data-stu-id="1995c-142">An orchestration is a collection of functions or steps, that are executed to accomplish a complex task.</span></span> <span data-ttu-id="1995c-143">使用 Azure 函数, 您可以编写代码来完成每个步骤, 使用逻辑应用程序, 可以使用 GUI 定义操作以及它们之间的关系。</span><span class="sxs-lookup"><span data-stu-id="1995c-143">With Azure Functions, you write code to complete each step, with Logic Apps, you use a GUI to define the actions and how they relate to one another.</span></span>

<span data-ttu-id="1995c-144">您可以在构建业务流程时混合和匹配服务, 从逻辑应用程序调用函数和调用函数中的逻辑应用程序。</span><span class="sxs-lookup"><span data-stu-id="1995c-144">You can mix and match services when you build an orchestration, calling functions from logic apps and calling logic apps from functions.</span></span> <span data-ttu-id="1995c-145">以下是两者之间的一些常见差异。</span><span class="sxs-lookup"><span data-stu-id="1995c-145">Here are some common differences between the two.</span></span>

|-| <span data-ttu-id="1995c-146">函数</span><span class="sxs-lookup"><span data-stu-id="1995c-146">Functions</span></span> |    <span data-ttu-id="1995c-147">逻辑应用程序</span><span class="sxs-lookup"><span data-stu-id="1995c-147">Logic Apps</span></span> |
|-|-------------------|------------|
| <span data-ttu-id="1995c-148">状态</span><span class="sxs-lookup"><span data-stu-id="1995c-148">State</span></span> | <span data-ttu-id="1995c-149">通常是无状态的, 但耐用函数提供状态</span><span class="sxs-lookup"><span data-stu-id="1995c-149">Normally stateless, but Durable Functions provide state</span></span> | <span data-ttu-id="1995c-150">有状态</span><span class="sxs-lookup"><span data-stu-id="1995c-150">Stateful</span></span> |
| <span data-ttu-id="1995c-151">研发</span><span class="sxs-lookup"><span data-stu-id="1995c-151">Development</span></span> | <span data-ttu-id="1995c-152">Code-first (命令式)</span><span class="sxs-lookup"><span data-stu-id="1995c-152">Code-first (imperative)</span></span> | <span data-ttu-id="1995c-153">Designer-first (声明性)</span><span class="sxs-lookup"><span data-stu-id="1995c-153">Designer-first (declarative)</span></span> |
| <span data-ttu-id="1995c-154">连接</span><span class="sxs-lookup"><span data-stu-id="1995c-154">Connectivity</span></span> | <span data-ttu-id="1995c-155">关于十二个内置绑定类型, 请为自定义绑定编写代码</span><span class="sxs-lookup"><span data-stu-id="1995c-155">About a dozen built-in binding types, write code for custom bindings</span></span> | <span data-ttu-id="1995c-156">大型连接器集、用于 B2B 方案的企业集成包、构建自定义连接器</span><span class="sxs-lookup"><span data-stu-id="1995c-156">Large collection of connectors, Enterprise Integration Pack for B2B scenarios, build custom connectors</span></span> |
| <span data-ttu-id="1995c-157">Actions</span><span class="sxs-lookup"><span data-stu-id="1995c-157">Actions</span></span> | <span data-ttu-id="1995c-158">每个活动都是一个 Azure 功能;为活动函数编写代码</span><span class="sxs-lookup"><span data-stu-id="1995c-158">Each activity is an Azure function; write code for activity functions</span></span> | <span data-ttu-id="1995c-159">较大的准备操作集合</span><span class="sxs-lookup"><span data-stu-id="1995c-159">Large collection of ready-made actions</span></span> |
| <span data-ttu-id="1995c-160">监视</span><span class="sxs-lookup"><span data-stu-id="1995c-160">Monitoring</span></span> | <span data-ttu-id="1995c-161">Azure Application Insights</span><span class="sxs-lookup"><span data-stu-id="1995c-161">Azure Application Insights</span></span> | <span data-ttu-id="1995c-162">Azure 门户、日志分析</span><span class="sxs-lookup"><span data-stu-id="1995c-162">Azure portal, Log Analytics</span></span> |
| <span data-ttu-id="1995c-163">Management</span><span class="sxs-lookup"><span data-stu-id="1995c-163">Management</span></span> | <span data-ttu-id="1995c-164">REST API, Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1995c-164">REST API, Visual Studio</span></span> | <span data-ttu-id="1995c-165">Azure 门户、REST API、PowerShell、Visual Studio</span><span class="sxs-lookup"><span data-stu-id="1995c-165">Azure portal, REST API, PowerShell, Visual Studio</span></span> |
| <span data-ttu-id="1995c-166">执行上下文</span><span class="sxs-lookup"><span data-stu-id="1995c-166">Execution context</span></span> | <span data-ttu-id="1995c-167">可以在本地或在云中运行</span><span class="sxs-lookup"><span data-stu-id="1995c-167">Can run locally or in the cloud</span></span> | <span data-ttu-id="1995c-168">仅在云中运行。</span><span class="sxs-lookup"><span data-stu-id="1995c-168">Runs only in the cloud.</span></span> |