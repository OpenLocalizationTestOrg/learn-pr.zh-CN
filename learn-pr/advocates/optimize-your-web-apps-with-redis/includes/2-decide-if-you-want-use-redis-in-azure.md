在体育网站后面是一个数据库, 它通过执行查询返回数据。 但是, 当负载较高时性能会降低, 尤其是在大型体育活动过程中。 在托管环境中, 增加的资源使用率会转化为较高的成本。 缓存数据可确保您的网站正常运行且运行时经济实惠。

## <a name="what-is-caching"></a>什么是缓存？

缓存是在内存中存储经常访问的数据的操作, 这些数据非常接近使用数据的应用程序。 缓存用于提高性能并减少服务器上的负载。 我们使用 Redis 创建内存中缓存, 可提供极好的延迟, 并可能提高性能。

## <a name="what-is-a-redis-cache"></a>什么是 Redis 缓存？

Redis (**RE**mote **DI**ctionary **S**erver) 缓存是开放源代码的内存中键值对存储。 它很受欢迎, 因为它快速且可以存储和处理常见数据类型, 如字符串、哈希和集。 它也被认为是开发人员友好, 因为它支持多种语言, 如 Python、c、c + +、c #、Java 和 JavaScript 中的其他语言。

## <a name="what-is-azure-cache-for-redis"></a>什么是 Redis 的 Azure 缓存？

Redis 的 Azure 缓存基于常见的开放源代码 Redis 缓存。 它使您能够访问由 Microsoft 托管的安全专用 Redis 缓存。 使用 azure cache for Redis 创建的缓存可从 Azure 中的任何应用程序访问。 用于 Redis 的 Azure 缓存通常用于提高严重依赖于后端数据存储的系统的性能。

缓存数据位于运行 Redis 缓存的 Azure 服务器上的内存中, 而不是由数据库从磁盘加载。 您的缓存也是高度可缩放的。 您可以随时更改 "大小" 和 "定价" 层。

## <a name="what-type-of-data-can-be-stored-in-the-cache"></a>哪种类型的数据可以存储在缓存中？

Redis 支持各种数据类型, 它们都围绕_二进制安全_字符串进行定向。 这意味着, 您可以使用任何值的二进制序列, 从类似于 "我-爱-rocky" 的字符串到图像文件的内容。 空字符串也是有效值。

- 二进制安全字符串 (最常见)
- 字符串列表
- 字符串的无序集
- 希
- 经过排序的字符串集
- 字符串的映射

每个数据值都与可用于从缓存中查找值的_键_相关联。 Redis 最适合于较小的值 (10 万或更少), 因此请考虑将更大的数据 chopping 为多个键。 存储较大的值是可能的 (最多为 500 MB), 但会增加网络延迟, 并且如果缓存未配置为过期旧值, 则可能会导致缓存和内存不足问题。

## <a name="what-is-a-redis-key"></a>什么是 Redis 密钥？
Redis 键也是二进制安全字符串。 下面是一些有关选择键的准则:

- 避免长键。 它们占用更多内存并需要更长的查找时间, 因为它们必须逐字节进行比较。 如果要将二进制 blob 用作密钥, 请生成唯一的哈希, 并将其用作键。 密钥的最大大小为 512 MB, 但您_永远不_应使用大小相同的键。
- 使用可标识数据的键。 例如, "运动: 足球; 日期: 2008-02-02" 将是 "fb: 8-2-2" 的更好的密钥。 前者更具可读性, 额外大小可忽略。 查找大小和可读性之间的平衡。
- 使用约定。 一个很棒的是 "对象: id", 如 "运动: 橄榄球" 中所示。 

## <a name="how-is-data-stored-in-a-redis-cache"></a>如何将数据存储在 Redis 缓存中？

Redis 中的数据存储在_**节点**_ 和_**群集**_ 中。

**节点**是存储数据的 Redis 中的空间。

**群集**是由三个或更多个数据集拆分的多个节点组成的集合。 群集很有用, 因为如果某个节点发生故障或无法与群集的其余部分通信, 则您的操作将继续进行。

## <a name="what-are-redis-caching-architectures"></a>什么是 Redis 缓存体系结构？

Redis 缓存体系结构是我们在缓存中分发数据的方式。 Redis 以三种主要方式分发数据:

1. **单节点**
1. **多个节点**
1. **状**

Redis 缓存体系结构通过各层跨 Azure 进行拆分:

### <a name="basic-cache"></a>基本缓存

基本缓存为您提供了_**单个节点**_ Redis 缓存。 完整的数据集将存储在单个节点中。 此层是开发、测试和非关键工作负载的理想之选。

### <a name="standard-cache"></a>标准缓存

标准缓存创建了_**多个节点**_ 体系结构。 Redis 在两个节点的主/辅助配置中复制缓存。 Azure 管理两个节点之间的复制。 这是一个使用主/从复制的生产就绪缓存。

### <a name="premium-tier"></a>高级层

"特优" 层包括标准层的功能, 但添加了保留数据、拍摄快照和备份数据的功能。 使用此层, 可以创建一个 Redis 群集, 该群集可在多个 Redis 节点中 shards 数据, 以增加可用内存。 高级层还支持 Azure 虚拟网络, 使您能够完全控制连接、子网、IP 寻址和网络隔离。 此层还包括异地复制, 因此您可以确保数据与使用它的应用程序接近。

## <a name="summary"></a>摘要

数据库非常适合存储大量数据, 但在查找数据时存在固有的延迟。 发送查询。 服务器将对查询进行解释, 查找数据并将其返回。 服务器还具有处理请求的容量限制。 如果发出的请求过多, 数据检索可能会降低。 缓存将在内存中存储经常请求的数据, 这些数据的返回速度要快于查询数据库, 这样会降低延迟并提高性能。 Redis 的 Azure 缓存使您能够访问在 Azure 中托管的安全、专用和可伸缩的 Redis 缓存, 并由 Microsoft 进行管理。
