<span data-ttu-id="43e77-101">在体育网站后面是一个数据库, 它通过执行查询返回数据。</span><span class="sxs-lookup"><span data-stu-id="43e77-101">Behind your sports website is a database, which returns data by executing queries.</span></span> <span data-ttu-id="43e77-102">但是, 当负载较高时性能会降低, 尤其是在大型体育活动过程中。</span><span class="sxs-lookup"><span data-stu-id="43e77-102">However, performance slows down when the load is high, particularly during large sporting events.</span></span> <span data-ttu-id="43e77-103">在托管环境中, 增加的资源使用率会转化为较高的成本。</span><span class="sxs-lookup"><span data-stu-id="43e77-103">In hosted environments, increased resource usage translates into higher costs.</span></span> <span data-ttu-id="43e77-104">缓存数据可确保您的网站正常运行且运行时经济实惠。</span><span class="sxs-lookup"><span data-stu-id="43e77-104">Caching data ensures your website will perform well and run economically.</span></span>

## <a name="what-is-caching"></a><span data-ttu-id="43e77-105">什么是缓存？</span><span class="sxs-lookup"><span data-stu-id="43e77-105">What is caching?</span></span>

<span data-ttu-id="43e77-106">缓存是在内存中存储经常访问的数据的操作, 这些数据非常接近使用数据的应用程序。</span><span class="sxs-lookup"><span data-stu-id="43e77-106">Caching is the act of storing frequently-accessed data in memory that is very close to the application that consumes the data.</span></span> <span data-ttu-id="43e77-107">缓存用于提高性能并减少服务器上的负载。</span><span class="sxs-lookup"><span data-stu-id="43e77-107">Caching is used to increase performance and reduce the load on your servers.</span></span> <span data-ttu-id="43e77-108">我们使用 Redis 创建内存中缓存, 可提供极好的延迟, 并可能提高性能。</span><span class="sxs-lookup"><span data-stu-id="43e77-108">We use Redis to create an in-memory cache that can provide excellent latency and potentially improve performance.</span></span>

## <a name="what-is-a-redis-cache"></a><span data-ttu-id="43e77-109">什么是 Redis 缓存？</span><span class="sxs-lookup"><span data-stu-id="43e77-109">What is a Redis cache?</span></span>

<span data-ttu-id="43e77-110">Redis (**RE**mote **DI**ctionary **S**erver) 缓存是开放源代码的内存中键值对存储。</span><span class="sxs-lookup"><span data-stu-id="43e77-110">Redis (**RE**mote **DI**ctionary **S**erver) cache is an open-source, in-memory key value pair store.</span></span> <span data-ttu-id="43e77-111">它很受欢迎, 因为它快速且可以存储和处理常见数据类型, 如字符串、哈希和集。</span><span class="sxs-lookup"><span data-stu-id="43e77-111">It's popular because it's fast and can store and manipulate common data types such as strings, hashes, and sets.</span></span> <span data-ttu-id="43e77-112">它也被认为是开发人员友好, 因为它支持多种语言, 如 Python、c、c + +、c #、Java 和 JavaScript 中的其他语言。</span><span class="sxs-lookup"><span data-stu-id="43e77-112">It's also considered developer friendly as it supports multiple languages such as Python, C, C++, C#, Java, and JavaScript among others.</span></span>

## <a name="what-is-azure-cache-for-redis"></a><span data-ttu-id="43e77-113">什么是 Redis 的 Azure 缓存？</span><span class="sxs-lookup"><span data-stu-id="43e77-113">What is Azure Cache for Redis?</span></span>

<span data-ttu-id="43e77-114">Redis 的 Azure 缓存基于常见的开放源代码 Redis 缓存。</span><span class="sxs-lookup"><span data-stu-id="43e77-114">Azure Cache for Redis is based on the popular open-source Redis cache.</span></span> <span data-ttu-id="43e77-115">它使您能够访问由 Microsoft 托管的安全专用 Redis 缓存。</span><span class="sxs-lookup"><span data-stu-id="43e77-115">It gives you access to a secure, dedicated Redis cache, managed by Microsoft.</span></span> <span data-ttu-id="43e77-116">使用 azure cache for Redis 创建的缓存可从 Azure 中的任何应用程序访问。</span><span class="sxs-lookup"><span data-stu-id="43e77-116">A cache created using Azure Cache for Redis is accessible from any application within Azure.</span></span> <span data-ttu-id="43e77-117">用于 Redis 的 Azure 缓存通常用于提高严重依赖于后端数据存储的系统的性能。</span><span class="sxs-lookup"><span data-stu-id="43e77-117">Azure Cache for Redis is typically used to improve the performance of systems that rely heavily on back-end data stores.</span></span>

<span data-ttu-id="43e77-118">缓存数据位于运行 Redis 缓存的 Azure 服务器上的内存中, 而不是由数据库从磁盘加载。</span><span class="sxs-lookup"><span data-stu-id="43e77-118">Your cached data is located in-memory on an Azure server running the Redis cache as opposed to being loaded from disk by a database.</span></span> <span data-ttu-id="43e77-119">您的缓存也是高度可缩放的。</span><span class="sxs-lookup"><span data-stu-id="43e77-119">Your cache is also highly scalable.</span></span> <span data-ttu-id="43e77-120">您可以随时更改 "大小" 和 "定价" 层。</span><span class="sxs-lookup"><span data-stu-id="43e77-120">You can alter the size and pricing tier at any time.</span></span>

## <a name="what-type-of-data-can-be-stored-in-the-cache"></a><span data-ttu-id="43e77-121">哪种类型的数据可以存储在缓存中？</span><span class="sxs-lookup"><span data-stu-id="43e77-121">What type of data can be stored in the cache?</span></span>

<span data-ttu-id="43e77-122">Redis 支持各种数据类型, 它们都围绕_二进制安全_字符串进行定向。</span><span class="sxs-lookup"><span data-stu-id="43e77-122">Redis supports a variety of data types all oriented around _binary safe_ strings.</span></span> <span data-ttu-id="43e77-123">这意味着, 您可以使用任何值的二进制序列, 从类似于 "我-爱-rocky" 的字符串到图像文件的内容。</span><span class="sxs-lookup"><span data-stu-id="43e77-123">This means that you can use any binary sequence for a value, from a string like "i-love-rocky-road" to the contents of an image file.</span></span> <span data-ttu-id="43e77-124">空字符串也是有效值。</span><span class="sxs-lookup"><span data-stu-id="43e77-124">An empty string is also a valid value.</span></span>

- <span data-ttu-id="43e77-125">二进制安全字符串 (最常见)</span><span class="sxs-lookup"><span data-stu-id="43e77-125">Binary-safe strings (most common)</span></span>
- <span data-ttu-id="43e77-126">字符串列表</span><span class="sxs-lookup"><span data-stu-id="43e77-126">Lists of strings</span></span>
- <span data-ttu-id="43e77-127">字符串的无序集</span><span class="sxs-lookup"><span data-stu-id="43e77-127">Unordered sets of strings</span></span>
- <span data-ttu-id="43e77-128">希</span><span class="sxs-lookup"><span data-stu-id="43e77-128">Hashes</span></span>
- <span data-ttu-id="43e77-129">经过排序的字符串集</span><span class="sxs-lookup"><span data-stu-id="43e77-129">Sorted sets of strings</span></span>
- <span data-ttu-id="43e77-130">字符串的映射</span><span class="sxs-lookup"><span data-stu-id="43e77-130">Maps of strings</span></span>

<span data-ttu-id="43e77-131">每个数据值都与可用于从缓存中查找值的_键_相关联。</span><span class="sxs-lookup"><span data-stu-id="43e77-131">Each data value is associated to a _key_ which can be used to lookup the value from the cache.</span></span> <span data-ttu-id="43e77-132">Redis 最适合于较小的值 (10 万或更少), 因此请考虑将更大的数据 chopping 为多个键。</span><span class="sxs-lookup"><span data-stu-id="43e77-132">Redis works best with smaller values (100k or less), so consider chopping up bigger data into multiple keys.</span></span> <span data-ttu-id="43e77-133">存储较大的值是可能的 (最多为 500 MB), 但会增加网络延迟, 并且如果缓存未配置为过期旧值, 则可能会导致缓存和内存不足问题。</span><span class="sxs-lookup"><span data-stu-id="43e77-133">Storing larger values is possible (up to 500 MB), but increases network latency and can cause caching and out-of-memory issues if the cache isn't configured to expire old values.</span></span>

## <a name="what-is-a-redis-key"></a><span data-ttu-id="43e77-134">什么是 Redis 密钥？</span><span class="sxs-lookup"><span data-stu-id="43e77-134">What is a Redis key?</span></span>
<span data-ttu-id="43e77-135">Redis 键也是二进制安全字符串。</span><span class="sxs-lookup"><span data-stu-id="43e77-135">Redis keys are also binary safe strings.</span></span> <span data-ttu-id="43e77-136">下面是一些有关选择键的准则:</span><span class="sxs-lookup"><span data-stu-id="43e77-136">Here are some guidelines for choosing keys:</span></span>

- <span data-ttu-id="43e77-137">避免长键。</span><span class="sxs-lookup"><span data-stu-id="43e77-137">Avoid long keys.</span></span> <span data-ttu-id="43e77-138">它们占用更多内存并需要更长的查找时间, 因为它们必须逐字节进行比较。</span><span class="sxs-lookup"><span data-stu-id="43e77-138">They take up more memory and require longer lookup times because they have to be compared byte-by-byte.</span></span> <span data-ttu-id="43e77-139">如果要将二进制 blob 用作密钥, 请生成唯一的哈希, 并将其用作键。</span><span class="sxs-lookup"><span data-stu-id="43e77-139">If you want to use a binary blob as the key, generate a unique hash and use that as the key instead.</span></span> <span data-ttu-id="43e77-140">密钥的最大大小为 512 MB, 但您_永远不_应使用大小相同的键。</span><span class="sxs-lookup"><span data-stu-id="43e77-140">The maximum size of a key is 512 MB, but you should _never_ use a key that size.</span></span>
- <span data-ttu-id="43e77-141">使用可标识数据的键。</span><span class="sxs-lookup"><span data-stu-id="43e77-141">Use keys which can identify the data.</span></span> <span data-ttu-id="43e77-142">例如, "运动: 足球; 日期: 2008-02-02" 将是 "fb: 8-2-2" 的更好的密钥。</span><span class="sxs-lookup"><span data-stu-id="43e77-142">For example, "sport:football;date:2008-02-02" would be a better key than "fb:8-2-2".</span></span> <span data-ttu-id="43e77-143">前者更具可读性, 额外大小可忽略。</span><span class="sxs-lookup"><span data-stu-id="43e77-143">The former is more readable and the extra size is negligible.</span></span> <span data-ttu-id="43e77-144">查找大小和可读性之间的平衡。</span><span class="sxs-lookup"><span data-stu-id="43e77-144">Find the balance between size and readability.</span></span>
- <span data-ttu-id="43e77-145">使用约定。</span><span class="sxs-lookup"><span data-stu-id="43e77-145">Use a convention.</span></span> <span data-ttu-id="43e77-146">一个很棒的是 "对象: id", 如 "运动: 橄榄球" 中所示。</span><span class="sxs-lookup"><span data-stu-id="43e77-146">A good one is "object:id", as in "sport:football".</span></span> 

## <a name="how-is-data-stored-in-a-redis-cache"></a><span data-ttu-id="43e77-147">如何将数据存储在 Redis 缓存中？</span><span class="sxs-lookup"><span data-stu-id="43e77-147">How is data stored in a Redis cache?</span></span>

<span data-ttu-id="43e77-148">Redis 中的数据存储在_**节点**_ 和_**群集**_ 中。</span><span class="sxs-lookup"><span data-stu-id="43e77-148">Data in Redis is stored in _**nodes**_ and _**clusters**_.</span></span>

<span data-ttu-id="43e77-149">**节点**是存储数据的 Redis 中的空间。</span><span class="sxs-lookup"><span data-stu-id="43e77-149">**Nodes** are a space in Redis where your data is stored.</span></span>

<span data-ttu-id="43e77-150">**群集**是由三个或更多个数据集拆分的多个节点组成的集合。</span><span class="sxs-lookup"><span data-stu-id="43e77-150">**Clusters** are sets of three or more nodes your dataset is split across.</span></span> <span data-ttu-id="43e77-151">群集很有用, 因为如果某个节点发生故障或无法与群集的其余部分通信, 则您的操作将继续进行。</span><span class="sxs-lookup"><span data-stu-id="43e77-151">Clusters are useful because your operations will continue if a node fails or is unable to communicate to the rest of the cluster.</span></span>

## <a name="what-are-redis-caching-architectures"></a><span data-ttu-id="43e77-152">什么是 Redis 缓存体系结构？</span><span class="sxs-lookup"><span data-stu-id="43e77-152">What are Redis caching architectures?</span></span>

<span data-ttu-id="43e77-153">Redis 缓存体系结构是我们在缓存中分发数据的方式。</span><span class="sxs-lookup"><span data-stu-id="43e77-153">Redis caching architecture is how we distribute our data in the cache.</span></span> <span data-ttu-id="43e77-154">Redis 以三种主要方式分发数据:</span><span class="sxs-lookup"><span data-stu-id="43e77-154">Redis distributes data in three major ways:</span></span>

1. <span data-ttu-id="43e77-155">**单节点**</span><span class="sxs-lookup"><span data-stu-id="43e77-155">**Single node**</span></span>
1. <span data-ttu-id="43e77-156">**多个节点**</span><span class="sxs-lookup"><span data-stu-id="43e77-156">**Multiple node**</span></span>
1. <span data-ttu-id="43e77-157">**状**</span><span class="sxs-lookup"><span data-stu-id="43e77-157">**Clustered**</span></span>

<span data-ttu-id="43e77-158">Redis 缓存体系结构通过各层跨 Azure 进行拆分:</span><span class="sxs-lookup"><span data-stu-id="43e77-158">Redis caching architectures are split across Azure by tiers:</span></span>

### <a name="basic-cache"></a><span data-ttu-id="43e77-159">基本缓存</span><span class="sxs-lookup"><span data-stu-id="43e77-159">Basic cache</span></span>

<span data-ttu-id="43e77-160">基本缓存为您提供了_**单个节点**_ Redis 缓存。</span><span class="sxs-lookup"><span data-stu-id="43e77-160">A basic cache provides you with a _**single node**_ Redis cache.</span></span> <span data-ttu-id="43e77-161">完整的数据集将存储在单个节点中。</span><span class="sxs-lookup"><span data-stu-id="43e77-161">The complete dataset will be stored in a single node.</span></span> <span data-ttu-id="43e77-162">此层是开发、测试和非关键工作负载的理想之选。</span><span class="sxs-lookup"><span data-stu-id="43e77-162">This tier is ideal for development, testing, and non-critical workloads.</span></span>

### <a name="standard-cache"></a><span data-ttu-id="43e77-163">标准缓存</span><span class="sxs-lookup"><span data-stu-id="43e77-163">Standard cache</span></span>

<span data-ttu-id="43e77-164">标准缓存创建了_**多个节点**_ 体系结构。</span><span class="sxs-lookup"><span data-stu-id="43e77-164">The standard cache creates _**multiple node**_ architectures.</span></span> <span data-ttu-id="43e77-165">Redis 在两个节点的主/辅助配置中复制缓存。</span><span class="sxs-lookup"><span data-stu-id="43e77-165">Redis replicates a cache in a two-node primary/secondary configuration.</span></span> <span data-ttu-id="43e77-166">Azure 管理两个节点之间的复制。</span><span class="sxs-lookup"><span data-stu-id="43e77-166">Azure manages the replication between the two nodes.</span></span> <span data-ttu-id="43e77-167">这是一个使用主/从复制的生产就绪缓存。</span><span class="sxs-lookup"><span data-stu-id="43e77-167">This is a production-ready cache with master/slave replication.</span></span>

### <a name="premium-tier"></a><span data-ttu-id="43e77-168">高级层</span><span class="sxs-lookup"><span data-stu-id="43e77-168">Premium tier</span></span>

<span data-ttu-id="43e77-169">"特优" 层包括标准层的功能, 但添加了保留数据、拍摄快照和备份数据的功能。</span><span class="sxs-lookup"><span data-stu-id="43e77-169">The premium tier includes the features of the standard tier but adds the ability to persist data, take snapshots, and back up data.</span></span> <span data-ttu-id="43e77-170">使用此层, 可以创建一个 Redis 群集, 该群集可在多个 Redis 节点中 shards 数据, 以增加可用内存。</span><span class="sxs-lookup"><span data-stu-id="43e77-170">With this tier, you can create a Redis cluster that shards data across multiple Redis nodes to increase available memory.</span></span> <span data-ttu-id="43e77-171">高级层还支持 Azure 虚拟网络, 使您能够完全控制连接、子网、IP 寻址和网络隔离。</span><span class="sxs-lookup"><span data-stu-id="43e77-171">The premium tier also supports an Azure Virtual Network to give you complete control over your connections, subnets, IP addressing, and network isolation.</span></span> <span data-ttu-id="43e77-172">此层还包括异地复制, 因此您可以确保数据与使用它的应用程序接近。</span><span class="sxs-lookup"><span data-stu-id="43e77-172">This tier also includes geo-replication, so you can ensure your data is close to the app that's consuming it.</span></span>

## <a name="summary"></a><span data-ttu-id="43e77-173">摘要</span><span class="sxs-lookup"><span data-stu-id="43e77-173">Summary</span></span>

<span data-ttu-id="43e77-174">数据库非常适合存储大量数据, 但在查找数据时存在固有的延迟。</span><span class="sxs-lookup"><span data-stu-id="43e77-174">A database is great for storing large amounts of data, but there is an inherent latency when looking up data.</span></span> <span data-ttu-id="43e77-175">发送查询。</span><span class="sxs-lookup"><span data-stu-id="43e77-175">You send a query.</span></span> <span data-ttu-id="43e77-176">服务器将对查询进行解释, 查找数据并将其返回。</span><span class="sxs-lookup"><span data-stu-id="43e77-176">The server interprets the query, looks up the data, and returns it.</span></span> <span data-ttu-id="43e77-177">服务器还具有处理请求的容量限制。</span><span class="sxs-lookup"><span data-stu-id="43e77-177">Servers also have capacity limits for handling requests.</span></span> <span data-ttu-id="43e77-178">如果发出的请求过多, 数据检索可能会降低。</span><span class="sxs-lookup"><span data-stu-id="43e77-178">If too many requests are made, data retrieval will likely slow down.</span></span> <span data-ttu-id="43e77-179">缓存将在内存中存储经常请求的数据, 这些数据的返回速度要快于查询数据库, 这样会降低延迟并提高性能。</span><span class="sxs-lookup"><span data-stu-id="43e77-179">Caching will store frequently requested data in memory that can be returned faster than querying a database, which should lower latency and increase performance.</span></span> <span data-ttu-id="43e77-180">Redis 的 Azure 缓存使您能够访问在 Azure 中托管的安全、专用和可伸缩的 Redis 缓存, 并由 Microsoft 进行管理。</span><span class="sxs-lookup"><span data-stu-id="43e77-180">Azure Cache for Redis gives you access to a secure, dedicated, and scalable Redis cache, hosted in Azure, and managed by Microsoft.</span></span>
