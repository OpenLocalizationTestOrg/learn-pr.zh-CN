<span data-ttu-id="7fe54-101">许多应用程序使用发布订阅模型通知分布式组件发生了问题, 或某些对象发生了更改。</span><span class="sxs-lookup"><span data-stu-id="7fe54-101">Many applications use a publish-subscribe model to notify distributed components that something happened, or that some object changed.</span></span> <span data-ttu-id="7fe54-102">假设您有一个带有 Web API 的音乐共享应用程序, 该应用程序在 Azure 中运行。</span><span class="sxs-lookup"><span data-stu-id="7fe54-102">Suppose you have a music-sharing application with a Web API that runs in Azure.</span></span> <span data-ttu-id="7fe54-103">当用户上载新歌曲时, 您需要通知世界各地的用户设备上安装的所有移动应用程序是否有兴趣使用该流派的用户。</span><span class="sxs-lookup"><span data-stu-id="7fe54-103">When a user uploads a new song, you need to notify all the mobile apps installed on user devices around the world who are interested in that genre.</span></span>

<span data-ttu-id="7fe54-104">在此体系结构中, 声音文件的发布者无需了解对共享音乐感兴趣的任何订阅者。</span><span class="sxs-lookup"><span data-stu-id="7fe54-104">In this architecture, the publisher of the sound file doesn't need to know about any of the subscribers interested in the shared music.</span></span> <span data-ttu-id="7fe54-105">此外, 我们还需要具有一对多关系, 在此关系中, 可以有多个订阅者可以选择决定是否对此新歌曲感兴趣。</span><span class="sxs-lookup"><span data-stu-id="7fe54-105">Also, we want to have a one-to-many relationship where we can have multiple subscribers who can optionally decide whether they are interested in this new song.</span></span> <span data-ttu-id="7fe54-106">Azure 事件网格是此类体系结构的理想解决方案。</span><span class="sxs-lookup"><span data-stu-id="7fe54-106">Azure Event Grid is a perfect solution for this sort of architecture.</span></span>

## <a name="what-is-azure-event-grid"></a><span data-ttu-id="7fe54-107">什么是 Azure 事件网格？</span><span class="sxs-lookup"><span data-stu-id="7fe54-107">What is Azure Event Grid?</span></span>
<span data-ttu-id="7fe54-108">azure 事件网格是在 Azure service Fabric 顶部运行的完全管理的事件路由服务。</span><span class="sxs-lookup"><span data-stu-id="7fe54-108">Azure Event Grid is a fully-managed event routing service running on top of Azure Service Fabric.</span></span> <span data-ttu-id="7fe54-109">事件网格将来自不同源 (如 azure Blob 存储帐户或 azure 媒体服务) 的_事件_分发到不同的处理程序, 如 azure 函数或 webhook。</span><span class="sxs-lookup"><span data-stu-id="7fe54-109">Event Grid distributes _events_ from different sources, such as Azure Blob storage accounts or Azure Media Services, to different handlers, such as Azure Functions or Webhooks.</span></span> <span data-ttu-id="7fe54-110">创建了事件网格, 以便更轻松地在 Azure 上构建基于事件的应用程序和无服务器应用程序。</span><span class="sxs-lookup"><span data-stu-id="7fe54-110">Event Grid was created to make it easier to build event-based and serverless applications on Azure.</span></span>

<span data-ttu-id="7fe54-111">事件网格支持作为发布服务器或订阅者的大多数 Azure 服务, 可与第三方服务一起使用。</span><span class="sxs-lookup"><span data-stu-id="7fe54-111">Event Grid supports most Azure services as a publisher or subscriber and can be used with third-party services.</span></span> <span data-ttu-id="7fe54-112">它提供了可动态缩放的低成本邮件系统, 允许发布者通知订阅者有关状态更改。</span><span class="sxs-lookup"><span data-stu-id="7fe54-112">It provides a dynamically scalable, low-cost, messaging system that allows publishers to notify subscribers about a status change.</span></span> <span data-ttu-id="7fe54-113">下图显示了从多个源接收邮件并根据订阅将它们分发到事件处理程序的 Azure 事件网格。</span><span class="sxs-lookup"><span data-stu-id="7fe54-113">The following illustration shows Azure Event Grid receiving messages from multiple sources and distributing them to event handlers based on subscription.</span></span>

<span data-ttu-id="7fe54-114">Azure 事件网格中有几个将源连接到订阅者的概念:</span><span class="sxs-lookup"><span data-stu-id="7fe54-114">There are several concepts in Azure Event Grid that connect a source to a subscriber:</span></span>

1. <span data-ttu-id="7fe54-115">**事件:** 发生了什么事。</span><span class="sxs-lookup"><span data-stu-id="7fe54-115">**Events:** What happened.</span></span>
1. <span data-ttu-id="7fe54-116">**事件源:** 事件发生的位置。</span><span class="sxs-lookup"><span data-stu-id="7fe54-116">**Event sources:** Where the event took place.</span></span>
1. <span data-ttu-id="7fe54-117">**主题:** 发布服务器发送事件的终结点。</span><span class="sxs-lookup"><span data-stu-id="7fe54-117">**Topics:** The endpoint where publishers send events.</span></span>
1. <span data-ttu-id="7fe54-118">**事件订阅:** 用于路由事件的终结点或内置机制 (有时指向多个处理程序)。</span><span class="sxs-lookup"><span data-stu-id="7fe54-118">**Event subscriptions:** The endpoint or built-in mechanism to route events, sometimes to multiple handlers.</span></span> <span data-ttu-id="7fe54-119">处理程序还使用订阅来智能地筛选传入事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-119">Subscriptions are also used by handlers to filter incoming events intelligently.</span></span>
1. <span data-ttu-id="7fe54-120">**事件处理程序:** 应用或服务对事件做出反应。</span><span class="sxs-lookup"><span data-stu-id="7fe54-120">**Event handlers:** The app or service reacting to the event.</span></span>

![显示在多个事件源和多个事件处理程序之间定位的 Azure 事件网格的插图。](../media/4-event-grid.png)

### <a name="what-is-an-event"></a><span data-ttu-id="7fe54-125">什么是事件？</span><span class="sxs-lookup"><span data-stu-id="7fe54-125">What is an event?</span></span>
<span data-ttu-id="7fe54-126">**事件**是通过事件网格传递的数据消息, 用于描述所发生的情况。</span><span class="sxs-lookup"><span data-stu-id="7fe54-126">**Events** are the data messages passing through Event Grid that describe what has taken place.</span></span> <span data-ttu-id="7fe54-127">每个事件都是独立的, 最多可达 64 KB, 并根据事件网格定义的架构包含多条信息:</span><span class="sxs-lookup"><span data-stu-id="7fe54-127">Each event is self-contained, can be up to 64 KB, and contains several pieces of information based on a schema defined by Event Grid:</span></span>

```json
[
  {
    "topic": string,
    "subject": string,
    "id": string,
    "eventType": string,
    "eventTime": string,
    "data":{
      object-unique-to-each-publisher
    },
    "dataVersion": string,
    "metadataVersion": string
  }
]
```

| <span data-ttu-id="7fe54-128">Field</span><span class="sxs-lookup"><span data-stu-id="7fe54-128">Field</span></span> | <span data-ttu-id="7fe54-129">说明</span><span class="sxs-lookup"><span data-stu-id="7fe54-129">Description</span></span> |
|-------|-------------|
| <span data-ttu-id="7fe54-130">**标题**</span><span class="sxs-lookup"><span data-stu-id="7fe54-130">**topic**</span></span> | <span data-ttu-id="7fe54-131">事件源的完整资源路径。</span><span class="sxs-lookup"><span data-stu-id="7fe54-131">The full resource path to the event source.</span></span> <span data-ttu-id="7fe54-132">事件网格提供此值。</span><span class="sxs-lookup"><span data-stu-id="7fe54-132">Event Grid provides this value.</span></span> |
| <span data-ttu-id="7fe54-133">**主题**</span><span class="sxs-lookup"><span data-stu-id="7fe54-133">**subject**</span></span> | <span data-ttu-id="7fe54-134">发布者定义的事件主题的路径。</span><span class="sxs-lookup"><span data-stu-id="7fe54-134">Publisher-defined path to the event subject.</span></span> |
| <span data-ttu-id="7fe54-135">**id**</span><span class="sxs-lookup"><span data-stu-id="7fe54-135">**id**</span></span> | <span data-ttu-id="7fe54-136">事件的唯一标识符。</span><span class="sxs-lookup"><span data-stu-id="7fe54-136">The unique identifier for event.</span></span> |
| <span data-ttu-id="7fe54-137">**事件**</span><span class="sxs-lookup"><span data-stu-id="7fe54-137">**eventType**</span></span> | <span data-ttu-id="7fe54-138">此事件源的已注册事件类型之一。</span><span class="sxs-lookup"><span data-stu-id="7fe54-138">One of the registered event types for this event source.</span></span> <span data-ttu-id="7fe54-139">这是您可以为其创建筛选器的值, `CustomerCreated`例如`BlobDeleted` `HttpRequestReceived`、、等。</span><span class="sxs-lookup"><span data-stu-id="7fe54-139">This is a value you can create filters against, e.g. `CustomerCreated`, `BlobDeleted`, `HttpRequestReceived`, etc.</span></span> |
| <span data-ttu-id="7fe54-140">**eventTime**</span><span class="sxs-lookup"><span data-stu-id="7fe54-140">**eventTime**</span></span> | <span data-ttu-id="7fe54-141">根据提供程序的 UTC 时间生成事件的时间。</span><span class="sxs-lookup"><span data-stu-id="7fe54-141">The time the event was generated based on the provider's UTC time.</span></span> |
| <span data-ttu-id="7fe54-142">**数据**</span><span class="sxs-lookup"><span data-stu-id="7fe54-142">**data**</span></span> | <span data-ttu-id="7fe54-143">与事件类型相关的特定信息。</span><span class="sxs-lookup"><span data-stu-id="7fe54-143">Specific information that is relevant to the type of event.</span></span> <span data-ttu-id="7fe54-144">例如, 有关在 Azure 存储中创建的新文件的事件包含有关该文件的详细信息, 例如`lastTimeModified`值。</span><span class="sxs-lookup"><span data-stu-id="7fe54-144">For example, an event about a new file being created in Azure Storage has details about the file, such as the `lastTimeModified` value.</span></span> <span data-ttu-id="7fe54-145">或者, 事件中心事件具有捕获文件的 URL。</span><span class="sxs-lookup"><span data-stu-id="7fe54-145">Or, an Event Hubs event has the URL of the Capture file.</span></span> <span data-ttu-id="7fe54-146">此字段是可选的。</span><span class="sxs-lookup"><span data-stu-id="7fe54-146">This field is optional.</span></span> |
| <span data-ttu-id="7fe54-147">**dataVersion**</span><span class="sxs-lookup"><span data-stu-id="7fe54-147">**dataVersion**</span></span> | <span data-ttu-id="7fe54-148">数据对象的架构版本。</span><span class="sxs-lookup"><span data-stu-id="7fe54-148">The schema version of the data object.</span></span> <span data-ttu-id="7fe54-149">发布服务器定义架构版本。</span><span class="sxs-lookup"><span data-stu-id="7fe54-149">The publisher defines the schema version.</span></span> |
| <span data-ttu-id="7fe54-150">**metadataVersion**</span><span class="sxs-lookup"><span data-stu-id="7fe54-150">**metadataVersion**</span></span> | <span data-ttu-id="7fe54-151">事件元数据的架构版本。</span><span class="sxs-lookup"><span data-stu-id="7fe54-151">The schema version of the event metadata.</span></span> <span data-ttu-id="7fe54-152">事件网格定义顶级属性的架构。</span><span class="sxs-lookup"><span data-stu-id="7fe54-152">Event Grid defines the schema of the top-level properties.</span></span> <span data-ttu-id="7fe54-153">事件网格提供此值。</span><span class="sxs-lookup"><span data-stu-id="7fe54-153">Event Grid provides this value.</span></span> |

> [!TIP]
> <span data-ttu-id="7fe54-154">事件网格发送事件, 以指示发生了什么情况或已更改。</span><span class="sxs-lookup"><span data-stu-id="7fe54-154">Event Grid sends an event to indicate something has happened or changed.</span></span> <span data-ttu-id="7fe54-155">但是, 已更改的_实际对象_不是事件数据的一部分。</span><span class="sxs-lookup"><span data-stu-id="7fe54-155">However, the _actual object_ that was changed is not part of the event data.</span></span> <span data-ttu-id="7fe54-156">相反, URL 或标识符通常会传递给引用已更改的对象。</span><span class="sxs-lookup"><span data-stu-id="7fe54-156">Instead, a URL or identifier is often passed to reference the changed object.</span></span>

### <a name="what-is-an-event-source"></a><span data-ttu-id="7fe54-157">什么是事件源？</span><span class="sxs-lookup"><span data-stu-id="7fe54-157">What is an event source?</span></span>
<span data-ttu-id="7fe54-158">事件源负责将事件发送到事件网格。</span><span class="sxs-lookup"><span data-stu-id="7fe54-158">Event sources are responsible for sending events to Event Grid.</span></span> <span data-ttu-id="7fe54-159">每个事件源与一个或多个事件类型相关。</span><span class="sxs-lookup"><span data-stu-id="7fe54-159">Each event source is related to one or more event types.</span></span> <span data-ttu-id="7fe54-160">例如, Azure 存储是 blob 创建事件的事件源。</span><span class="sxs-lookup"><span data-stu-id="7fe54-160">For example, Azure Storage is the event source for blob created events.</span></span> <span data-ttu-id="7fe54-161">IoT 中心是设备创建事件的事件源。</span><span class="sxs-lookup"><span data-stu-id="7fe54-161">IoT Hub is the event source for device created events.</span></span> <span data-ttu-id="7fe54-162">您的应用程序是您定义的自定义事件的事件源。</span><span class="sxs-lookup"><span data-stu-id="7fe54-162">Your application is the event source for custom events that you define.</span></span> <span data-ttu-id="7fe54-163">我们将在一段时间内更详细地查看事件源。</span><span class="sxs-lookup"><span data-stu-id="7fe54-163">We'll look at event sources in more detail in a moment.</span></span>

> [!NOTE]
> <span data-ttu-id="7fe54-164">Azure 事件中心还定义了事件发布者的概念。</span><span class="sxs-lookup"><span data-stu-id="7fe54-164">Azure Event Hub also defines the concept of an Event Publisher.</span></span> <span data-ttu-id="7fe54-165">事件中心的发布者是决定将事件发送到事件网格的用户或组织。</span><span class="sxs-lookup"><span data-stu-id="7fe54-165">A publisher to Event Hub is the user or organization that decides to send events to Event Grid.</span></span> <span data-ttu-id="7fe54-166">例如, Microsoft 发布几个 Azure 服务的事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-166">For example, Microsoft publishes events for several Azure services.</span></span> <span data-ttu-id="7fe54-167">您可以发布自己的应用程序中的事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-167">You can publish events from your own application.</span></span> <span data-ttu-id="7fe54-168">在 Azure 外部托管服务的组织可以通过事件网格发布事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-168">Organizations that host services outside of Azure can publish events through Event Grid.</span></span> <span data-ttu-id="7fe54-169">这通常与事件源混合使用。</span><span class="sxs-lookup"><span data-stu-id="7fe54-169">This often gets mixed with the event source.</span></span> <span data-ttu-id="7fe54-170">完全定义的事件源是发布者和为该发布服务器生成事件的特定服务。</span><span class="sxs-lookup"><span data-stu-id="7fe54-170">The event source fully defined is the publisher and the specific service generating the event for that publisher.</span></span> <span data-ttu-id="7fe54-171">在这里, 我们将使用 "发布服务器" 和 "事件源" 来表示将消息发送到事件中心的实体。</span><span class="sxs-lookup"><span data-stu-id="7fe54-171">Here, we will use "publisher" and "event source" interchangeably to represent the entity sending the message to Event Hub.</span></span>

### <a name="what-is-an-event-topic"></a><span data-ttu-id="7fe54-172">什么是事件主题？</span><span class="sxs-lookup"><span data-stu-id="7fe54-172">What is an event topic?</span></span>
<span data-ttu-id="7fe54-173">事件主题将事件分类为组。</span><span class="sxs-lookup"><span data-stu-id="7fe54-173">Event topics categorize events into groups.</span></span> <span data-ttu-id="7fe54-174">主题由公共终结点表示, 并且是事件源向其发送事件__ 的位置。</span><span class="sxs-lookup"><span data-stu-id="7fe54-174">Topics are represented by a public endpoint and are where the event source sends events _to_.</span></span> <span data-ttu-id="7fe54-175">在设计应用程序时, 您可以决定要创建多少个主题。</span><span class="sxs-lookup"><span data-stu-id="7fe54-175">When designing your application, you can decide how many topics to create.</span></span> <span data-ttu-id="7fe54-176">较大的解决方案将为每个相关事件类别创建一个自定义主题, 而较小的解决方案可能会将所有事件发送到单个主题。</span><span class="sxs-lookup"><span data-stu-id="7fe54-176">Larger solutions will create a custom topic for each category of related events, while smaller solutions might send all events to a single topic.</span></span> <span data-ttu-id="7fe54-177">例如, 请考虑发送与修改用户帐户和处理订单相关的事件的应用程序。</span><span class="sxs-lookup"><span data-stu-id="7fe54-177">For example, consider an application that sends events related to modifying user accounts and processing orders.</span></span> <span data-ttu-id="7fe54-178">任何事件处理程序都不可能需要这两种类型的事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-178">It's unlikely any event handler wants both categories of events.</span></span> <span data-ttu-id="7fe54-179">创建两个自定义主题, 让事件处理程序订阅他们感兴趣的主题。</span><span class="sxs-lookup"><span data-stu-id="7fe54-179">Create two custom topics and let event handlers subscribe to the one that interests them.</span></span> <span data-ttu-id="7fe54-180">事件订阅者可以从特定主题中筛选出所需的事件类型。</span><span class="sxs-lookup"><span data-stu-id="7fe54-180">Event subscribers can filter for the event types they want from a specific topic.</span></span>

<span data-ttu-id="7fe54-181">主题分为**系统**主题和**自定义**主题。</span><span class="sxs-lookup"><span data-stu-id="7fe54-181">Topics are divided into **system** topics, and **custom** topics.</span></span>

#### <a name="system-topics"></a><span data-ttu-id="7fe54-182">系统主题</span><span class="sxs-lookup"><span data-stu-id="7fe54-182">System topics</span></span>
<span data-ttu-id="7fe54-183">系统主题是由 Azure 服务提供的内置主题。</span><span class="sxs-lookup"><span data-stu-id="7fe54-183">System topics are built-in topics provided by Azure services.</span></span> <span data-ttu-id="7fe54-184">你在 Azure 订阅中看不到系统主题, 因为发布者拥有这些主题, 但你可以订阅这些主题。</span><span class="sxs-lookup"><span data-stu-id="7fe54-184">You don't see system topics in your Azure subscription because the publisher owns the topics, but you can subscribe to them.</span></span> <span data-ttu-id="7fe54-185">若要订阅, 请提供有关要从中接收事件的资源的信息。</span><span class="sxs-lookup"><span data-stu-id="7fe54-185">To subscribe, you provide information about the resource you want to receive events from.</span></span> <span data-ttu-id="7fe54-186">只要您具有对资源的访问权限, 就可以订阅其事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-186">As long as you have access to the resource, you can subscribe to its events.</span></span>

#### <a name="custom-topics"></a><span data-ttu-id="7fe54-187">自定义主题</span><span class="sxs-lookup"><span data-stu-id="7fe54-187">Custom topics</span></span>
<span data-ttu-id="7fe54-188">自定义主题是应用程序和第三方主题。</span><span class="sxs-lookup"><span data-stu-id="7fe54-188">Custom topics are application and third-party topics.</span></span> <span data-ttu-id="7fe54-189">在创建或分配对自定义主题的访问权限时, 您会在订阅中看到该自定义主题。</span><span class="sxs-lookup"><span data-stu-id="7fe54-189">When you create or are assigned access to a custom topic, you see that custom topic in your subscription.</span></span>

### <a name="what-is-an-event-subscription"></a><span data-ttu-id="7fe54-190">什么是事件订阅？</span><span class="sxs-lookup"><span data-stu-id="7fe54-190">What is an event subscription?</span></span>
<span data-ttu-id="7fe54-191">事件订阅定义事件处理程序要接收的主题中的哪些事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-191">Event Subscriptions define which events on a topic an event handler wants to receive.</span></span> <span data-ttu-id="7fe54-192">订阅还可以按其类型或主题筛选事件, 因此您可以确保事件处理程序只接收相关事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-192">A subscription can also filter events by their type or subject, so you can ensure an event handler only receives relevant events.</span></span>

### <a name="what-is-an-event-handler"></a><span data-ttu-id="7fe54-193">什么是事件处理程序？</span><span class="sxs-lookup"><span data-stu-id="7fe54-193">What is an event handler?</span></span>
<span data-ttu-id="7fe54-194">事件处理程序 (有时称为 "订阅者") 是可以从事件网格接收事件的任何组件 (应用程序或资源)。</span><span class="sxs-lookup"><span data-stu-id="7fe54-194">An event handler (sometimes referred to as an event "subscriber") is any component (application or resource) that can receive events from Event Grid.</span></span> <span data-ttu-id="7fe54-195">例如, Azure 函数可以执行代码以响应添加到 Blob 存储帐户中的新歌曲。</span><span class="sxs-lookup"><span data-stu-id="7fe54-195">For example, Azure Functions can execute code in response to the new song being added to the Blob storage account.</span></span> <span data-ttu-id="7fe54-196">订阅者可以决定要处理的事件, 事件网格将在有新事件可用时有效地通知每个相关订阅者-不需要轮询。</span><span class="sxs-lookup"><span data-stu-id="7fe54-196">Subscribers can decide which events they want to handle and Event Grid will efficiently notify each interested subscriber when a new event is available - no polling required.</span></span>

## <a name="types-of-event-sources"></a><span data-ttu-id="7fe54-197">事件源的类型</span><span class="sxs-lookup"><span data-stu-id="7fe54-197">Types of event sources</span></span>
<span data-ttu-id="7fe54-198">事件可以由以下 Azure 资源类型生成:</span><span class="sxs-lookup"><span data-stu-id="7fe54-198">Events can be generated by the following Azure resource types:</span></span>

- <span data-ttu-id="7fe54-199">**Azure 订阅和资源组:** 订阅和资源组会生成与 Azure 中的管理操作相关的事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-199">**Azure Subscriptions and Resource Groups:** Subscriptions and resource groups generate events related to management operations in Azure.</span></span> <span data-ttu-id="7fe54-200">例如, 当用户创建虚拟机时, 此源将生成一个事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-200">For example, when a user creates a virtual machine, this source generates an event.</span></span>
- <span data-ttu-id="7fe54-201">**容器注册表:** 当添加、删除或更改注册表中的图像时, Azure 容器注册表服务将生成事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-201">**Container registry:** The Azure Container Registry service generates events when images in the registry are added, removed, or changed.</span></span>
- <span data-ttu-id="7fe54-202">**事件中心:** 事件中心可用于处理和存储来自各种数据源 (通常是日志记录或遥测相关) 的事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-202">**Event Hub:** Event Hub can be used to process and store events from a variety of data sources - typically logging or telemetry related.</span></span> <span data-ttu-id="7fe54-203">捕获文件时, 事件中心可以向事件网格生成事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-203">Event Hub can generate events to Event Grid when files are captured.</span></span>
- <span data-ttu-id="7fe54-204">**服务总线:** 当活动邮件没有活动的侦听器时, 服务总线可以向事件网格生成事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-204">**Service Bus:** Service bus can generate events to Event Grid when there are active messages with no active listeners.</span></span>
- <span data-ttu-id="7fe54-205">**存储帐户:** 存储帐户可以在用户添加 blob、文件、表项或队列消息时生成事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-205">**Storage accounts:** Storage accounts can generate events when users add blobs, files, table entries, or queue messages.</span></span> <span data-ttu-id="7fe54-206">可以将 blob 帐户和常规用途的 V2 帐户用作事件源。</span><span class="sxs-lookup"><span data-stu-id="7fe54-206">You can use both blob accounts and General-purpose V2 accounts as event sources.</span></span>
- <span data-ttu-id="7fe54-207">**媒体服务:** 媒体服务承载视频和音频媒体并为媒体文件提供高级管理功能。</span><span class="sxs-lookup"><span data-stu-id="7fe54-207">**Media Services:** Media Services hosts video and audio media and provides advanced management features for media files.</span></span> <span data-ttu-id="7fe54-208">媒体服务可在视频文件上启动或完成编码作业时生成事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-208">Media Services can generate events when an encoding job is started or completed on a video file.</span></span>
- <span data-ttu-id="7fe54-209">**Azure IoT 中心:** iot 中心与 iot 设备通信并从中收集遥测。</span><span class="sxs-lookup"><span data-stu-id="7fe54-209">**Azure IoT Hub:** IoT Hub communicates with and gathers telemetry from IoT devices.</span></span> <span data-ttu-id="7fe54-210">它可以在此类通信到达时生成事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-210">It can generate events whenever such communications arrive.</span></span>
- <span data-ttu-id="7fe54-211">**自定义事件:** 可以使用 REST API 或在 Java、GO、.net、Node、Python 和 Ruby 中使用 Azure SDK 生成自定义事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-211">**Custom events:** Custom events can be generated using the REST API, or with the Azure SDK on Java, GO, .NET, Node, Python, and Ruby.</span></span> <span data-ttu-id="7fe54-212">例如, 可以在 Azure 应用服务的 Web 应用功能中创建自定义事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-212">For example, you could create a custom event in the Web Apps feature of Azure App Service.</span></span> <span data-ttu-id="7fe54-213">在 worker 角色中, 从存储队列中选取邮件时, 这可能会发生。</span><span class="sxs-lookup"><span data-stu-id="7fe54-213">This can happen in the worker role when it picks up a message from a storage queue.</span></span>

<span data-ttu-id="7fe54-214">这种与 azure 中的不同事件源的深层集成可确保事件网格可以分发与几乎任何 Azure 资源相关的事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-214">This deep integration with diverse event sources within Azure ensures that Event Grid can distribute events that relate to almost any Azure resource.</span></span>

## <a name="event-handlers"></a><span data-ttu-id="7fe54-215">事件处理程序</span><span class="sxs-lookup"><span data-stu-id="7fe54-215">Event handlers</span></span>
<span data-ttu-id="7fe54-216">Azure 中的以下对象类型可接收和处理事件网格中的事件:</span><span class="sxs-lookup"><span data-stu-id="7fe54-216">The following object types in Azure can receive and handle events from Event Grid:</span></span>

- <span data-ttu-id="7fe54-217">**Azure 函数:** 在 Azure 中运行的自定义代码, 无需显式配置主机虚拟服务器或容器。</span><span class="sxs-lookup"><span data-stu-id="7fe54-217">**Azure Functions:** Custom code that runs in Azure, without the need for explicit configuration of a host virtual server or container.</span></span> <span data-ttu-id="7fe54-218">当您想要对事件的自定义响应进行编码时, 可将 Azure 函数用作事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="7fe54-218">Use an Azure function as an event handler when you want to code a custom response to the event.</span></span>
- <span data-ttu-id="7fe54-219">**webhook:** webhook 是一个实现推送体系结构的 web API。</span><span class="sxs-lookup"><span data-stu-id="7fe54-219">**Webhooks:** A webhook is a web API that implements a push architecture.</span></span>
- <span data-ttu-id="7fe54-220">**Azure 逻辑应用程序:** Azure 逻辑应用程序将业务流程作为工作流承载。</span><span class="sxs-lookup"><span data-stu-id="7fe54-220">**Azure Logic Apps:** An Azure logic app hosts a business process as a workflow.</span></span>
- <span data-ttu-id="7fe54-221">**Microsoft Flow:** 流也承载工作流, 但非技术人员更易于使用。</span><span class="sxs-lookup"><span data-stu-id="7fe54-221">**Microsoft Flow:** Flow also hosts workflows, but it is easier for non-technical staff to use.</span></span>

## <a name="should-you-use-event-grid"></a><span data-ttu-id="7fe54-222">是否应使用事件网格？</span><span class="sxs-lookup"><span data-stu-id="7fe54-222">Should you use Event Grid?</span></span>
<span data-ttu-id="7fe54-223">当您需要这些功能时, 请使用事件网格:</span><span class="sxs-lookup"><span data-stu-id="7fe54-223">Use Event Grid when you need these features:</span></span>

- <span data-ttu-id="7fe54-224">**简洁性:** 将源连接到事件网格中的订阅者非常简单。</span><span class="sxs-lookup"><span data-stu-id="7fe54-224">**Simplicity:** It is straightforward to connect sources to subscribers in Event Grid.</span></span>
- <span data-ttu-id="7fe54-225">**高级筛选:** 订阅可以对他们从主题收到的事件进行关闭控制。</span><span class="sxs-lookup"><span data-stu-id="7fe54-225">**Advanced filtering:** Subscriptions have close control over the events they receive from a topic.</span></span>
- <span data-ttu-id="7fe54-226">**扇出:** 您可以为相同的事件和主题订阅不限数量的终结点。</span><span class="sxs-lookup"><span data-stu-id="7fe54-226">**Fan-out:** You can subscribe to an unlimited number of endpoints to the same events and topics.</span></span>
- <span data-ttu-id="7fe54-227">**可靠性:** 每个订阅的事件网格重试最长为24小时的事件传递。</span><span class="sxs-lookup"><span data-stu-id="7fe54-227">**Reliability:** Event Grid retries event delivery for up to 24 hours for each subscription.</span></span>
- <span data-ttu-id="7fe54-228">**按事件付费:** 仅支付要传输的事件数。</span><span class="sxs-lookup"><span data-stu-id="7fe54-228">**Pay-per-event:** Pay only for the number of events that you transmit.</span></span>

<span data-ttu-id="7fe54-229">事件网格是一个简单但通用的事件分布系统。</span><span class="sxs-lookup"><span data-stu-id="7fe54-229">Event Grid is a simple but versatile event distribution system.</span></span> <span data-ttu-id="7fe54-230">使用它将不连续的事件传递给订阅者, 这将以可靠且快速的速度快速接收这些事件。</span><span class="sxs-lookup"><span data-stu-id="7fe54-230">Use it to deliver discrete events to subscribers, which will receive those events reliably and quickly.</span></span> <span data-ttu-id="7fe54-231">我们有一个更多的消息传递模型-如果我们想要传递一个大型事件_流_, 该怎么办？</span><span class="sxs-lookup"><span data-stu-id="7fe54-231">We have one more messaging model to examine - what if we want to deliver a large _stream_ of events?</span></span> <span data-ttu-id="7fe54-232">在这种情况下, 事件网格不是一种很好的解决方案, 因为它是为一次性的一次性传递而设计的。</span><span class="sxs-lookup"><span data-stu-id="7fe54-232">In this scenario, Event Grid isn't a great solution because it's designed for one-event-at-a-time delivery.</span></span> <span data-ttu-id="7fe54-233">相反, 我们需要转到另一个 Azure 服务: 事件中心。</span><span class="sxs-lookup"><span data-stu-id="7fe54-233">Instead, we need to turn to another Azure service: Event Hubs.</span></span>
