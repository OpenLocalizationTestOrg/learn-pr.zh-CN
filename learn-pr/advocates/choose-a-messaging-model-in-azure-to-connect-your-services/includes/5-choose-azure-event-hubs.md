<span data-ttu-id="3536e-101">有些应用程序产生的事件几乎与源几乎一样多。</span><span class="sxs-lookup"><span data-stu-id="3536e-101">There are certain applications that produce a massive number of events from almost as many sources.</span></span> <span data-ttu-id="3536e-102">我们通常会听到应用于这些情况的 "大数据" 这一术语, 它们需要独特的基础结构来处理它们。</span><span class="sxs-lookup"><span data-stu-id="3536e-102">We often hear the term "Big Data" applied to these situations, and they require unique infrastructure to handle them.</span></span>

<span data-ttu-id="3536e-103">假设您适用于 Contoso 飞机发动机。</span><span class="sxs-lookup"><span data-stu-id="3536e-103">Imagine you work for Contoso Aircraft Engines.</span></span> <span data-ttu-id="3536e-104">你的雇主制造商的引擎具有数百个传感器。</span><span class="sxs-lookup"><span data-stu-id="3536e-104">The engines your employer manufactures have hundreds of sensors.</span></span> <span data-ttu-id="3536e-105">在飞机可以在早上 flown 的情况下, 其引擎将连接到测试套, 并通过其 paces。</span><span class="sxs-lookup"><span data-stu-id="3536e-105">Before an aircraft can be flown each morning, its engines are connected to a test harness and put through their paces.</span></span> <span data-ttu-id="3536e-106">此外, 当飞机连接到地面设备时, 将会对缓存的实时数据进行流式处理。</span><span class="sxs-lookup"><span data-stu-id="3536e-106">Additionally, cached in-flight data is streamed when the aircraft is connected to ground equipment.</span></span>

<span data-ttu-id="3536e-107">您希望使用历史传感器数据在传感器读数中查找模式, 指示引擎故障可能很快就会发生。</span><span class="sxs-lookup"><span data-stu-id="3536e-107">You want to use historic sensor data to find patterns in the sensor readings that indicate engine failure is likely to happen soon.</span></span> <span data-ttu-id="3536e-108">您希望将实时传感器读数与这些故障模式进行比较。</span><span class="sxs-lookup"><span data-stu-id="3536e-108">You want the real-time sensor readings to be compared against these failure patterns.</span></span> <span data-ttu-id="3536e-109">如果某个引擎显示 worrisome 读数, 则可以在接近实时时警告用户。</span><span class="sxs-lookup"><span data-stu-id="3536e-109">You can then warn users in near real time if an engine is showing worrisome readings.</span></span>

## <a name="what-is-azure-event-hubs"></a><span data-ttu-id="3536e-110">什么是 Azure 事件中心？</span><span class="sxs-lookup"><span data-stu-id="3536e-110">What is Azure Event Hubs?</span></span>
<span data-ttu-id="3536e-111">事件中心是发布订阅通信模式的媒介。</span><span class="sxs-lookup"><span data-stu-id="3536e-111">Event Hubs is an intermediary for the publish-subscribe communication pattern.</span></span> <span data-ttu-id="3536e-112">然而, 与事件网格不同的是, 它是针对极高的吞吐量、大量的发布服务器、安全性和恢复能力而优化的。</span><span class="sxs-lookup"><span data-stu-id="3536e-112">Unlike Event Grid, however, it is optimized for extremely high throughput, a large number of publishers, security, and resiliency.</span></span>

#### <a name="what-is-an-event-hub"></a><span data-ttu-id="3536e-113">什么是事件中心？</span><span class="sxs-lookup"><span data-stu-id="3536e-113">What is an Event Hub?</span></span>

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yuat]

<span data-ttu-id="3536e-114">[! 注意] 事件网格完全符合发布订阅模式, 因为它只是管理订阅和路由到这些订阅服务器的通信, 因此事件中心会执行很多其他服务。</span><span class="sxs-lookup"><span data-stu-id="3536e-114">Whereas Event Grid fits perfectly into the publish-subscribe pattern in that it simply manages subscriptions and routes communications to those subscribers, Event Hubs performs quite a few additional services.</span></span> <span data-ttu-id="3536e-115">这些附加服务使其看起来更像服务总线或邮件队列, 而不是简单的事件广播者。</span><span class="sxs-lookup"><span data-stu-id="3536e-115">These additional services make it look more like a service bus or message queue, than a simple event broadcaster.</span></span>

#### <a name="partitions"></a><span data-ttu-id="3536e-116">里</span><span class="sxs-lookup"><span data-stu-id="3536e-116">Partitions</span></span>
<span data-ttu-id="3536e-117">当事件中心收到通信时, 它会将它们划分为分区。</span><span class="sxs-lookup"><span data-stu-id="3536e-117">As Event Hubs receives communications, it divides them into partitions.</span></span> <span data-ttu-id="3536e-118">分区是保存通信的缓冲区。</span><span class="sxs-lookup"><span data-stu-id="3536e-118">Partitions are buffers into which the communications are saved.</span></span> <span data-ttu-id="3536e-119">由于事件缓冲区的原因, 事件并不完全是暂时的, 并且仅由于订阅者正忙甚至脱机而不会丢失事件。</span><span class="sxs-lookup"><span data-stu-id="3536e-119">Because of the event buffers, events are not completely ephemeral, and an event isn't missed just because a subscriber is busy or even offline.</span></span> <span data-ttu-id="3536e-120">订阅者始终可以使用缓冲区 "追赶"。</span><span class="sxs-lookup"><span data-stu-id="3536e-120">The subscriber can always use the buffer to "catch up."</span></span> <span data-ttu-id="3536e-121">默认情况下, 事件在缓冲区中停留在24小时后才会自动过期。</span><span class="sxs-lookup"><span data-stu-id="3536e-121">By default, events stay in the buffer for 24 hours before they automatically expire.</span></span>

<span data-ttu-id="3536e-122">缓冲区称为分区, 因为数据是分在它们之间划分的。</span><span class="sxs-lookup"><span data-stu-id="3536e-122">The buffers are called partitions because the data is divided amongst them.</span></span> <span data-ttu-id="3536e-123">每个事件中心至少有两个分区, 每个分区都有一组单独的订阅者。</span><span class="sxs-lookup"><span data-stu-id="3536e-123">Every event hub has at least two partitions, and each partition has a separate set of subscribers.</span></span>

#### <a name="capture"></a><span data-ttu-id="3536e-124">捕获</span><span class="sxs-lookup"><span data-stu-id="3536e-124">Capture</span></span>
<span data-ttu-id="3536e-125">事件中心可以立即将所有事件发送到 azure Data Lake 或 azure Blob 存储, 以实现廉价、永久持久性。</span><span class="sxs-lookup"><span data-stu-id="3536e-125">Event Hubs can send all your events immediately to Azure Data Lake or Azure Blob storage for inexpensive, permanent persistence.</span></span>

#### <a name="authentication"></a><span data-ttu-id="3536e-126">Authentication</span><span class="sxs-lookup"><span data-stu-id="3536e-126">Authentication</span></span>
<span data-ttu-id="3536e-127">对所有发布者进行身份验证并颁发令牌。</span><span class="sxs-lookup"><span data-stu-id="3536e-127">All publishers are authenticated and issued a token.</span></span> <span data-ttu-id="3536e-128">这意味着事件中心可以接受来自外部设备和移动应用程序的事件, 而无需担心来自 pranksters 的欺诈数据会破坏我们的分析。</span><span class="sxs-lookup"><span data-stu-id="3536e-128">This means Event Hubs can accept events from external devices and mobile apps, without worrying that fraudulent data from pranksters could ruin our analysis.</span></span> 

## <a name="using-event-hubs"></a><span data-ttu-id="3536e-129">使用事件中心</span><span class="sxs-lookup"><span data-stu-id="3536e-129">Using Event Hubs</span></span>
<span data-ttu-id="3536e-130">事件中心支持到其他 Azure 服务的流水线传递事件流。</span><span class="sxs-lookup"><span data-stu-id="3536e-130">Event Hubs has support for pipelining event streams to other Azure services.</span></span> <span data-ttu-id="3536e-131">例如, 将其用于 Azure Stream Analytics, 可以在近实时分析数据, 并能够关联多个事件和查找模式。</span><span class="sxs-lookup"><span data-stu-id="3536e-131">Using it with Azure Stream Analytics, for instance, allows complex analysis of data in near real time, with the ability to correlate multiple events and look for patterns.</span></span> <span data-ttu-id="3536e-132">在这种情况下, Stream Analytics 将被视为订阅者。</span><span class="sxs-lookup"><span data-stu-id="3536e-132">In this case, Stream Analytics would be considered a subscriber.</span></span>

<span data-ttu-id="3536e-133">对于我们的飞机引擎, 我们将设置体系结构, 以便事件中心能够对我们的引擎的通信进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="3536e-133">For our aircraft engines, we'll set up our architecture so that Event Hubs will authenticate the communications from our engines.</span></span> <span data-ttu-id="3536e-134">然后, 我们将使用捕获将所有数据保存到 data Lake。</span><span class="sxs-lookup"><span data-stu-id="3536e-134">We will then have it use capture to save all the data to Data Lake.</span></span> <span data-ttu-id="3536e-135">稍后, 我们可以使用所有这些数据重新培训并改进我们的机器学习模式。</span><span class="sxs-lookup"><span data-stu-id="3536e-135">Later, we can use all that data to retrain and improve our machine learning models.</span></span> <span data-ttu-id="3536e-136">最后, Stream Analytics 订阅者将选取我们的事件流。</span><span class="sxs-lookup"><span data-stu-id="3536e-136">Finally, our event streams will be picked up by Stream Analytics subscribers.</span></span> <span data-ttu-id="3536e-137">Stream Analytics 将使用我们的机器学习模型查找传感器数据中可能指示问题的模式。</span><span class="sxs-lookup"><span data-stu-id="3536e-137">Stream Analytics will use our machine learning model to look for patterns in the sensor data that might indicate problems.</span></span>

<span data-ttu-id="3536e-138">由于我们有多个分区, 并且每个引擎仅将其所有数据发送到一个分区, 因此 Stream Analytics 订阅服务器的每个实例只需要处理我们的总体数据的子集。</span><span class="sxs-lookup"><span data-stu-id="3536e-138">Because we have several partitions, and each engine sends all its data to only one partition, each instance of our Stream Analytics subscriber only need deal with a subset of our overall data.</span></span> <span data-ttu-id="3536e-139">它无需对所有 it 进行筛选和关联。</span><span class="sxs-lookup"><span data-stu-id="3536e-139">It does not have to filter and correlate over all of it.</span></span>

## <a name="which-service-should-i-choose"></a><span data-ttu-id="3536e-140">我应选择哪种服务？</span><span class="sxs-lookup"><span data-stu-id="3536e-140">Which service should I choose?</span></span>
<span data-ttu-id="3536e-141">就像我们的队列选择一样, 在这两个事件传递服务之间进行选择最初可能会比较棘手。</span><span class="sxs-lookup"><span data-stu-id="3536e-141">Just like our queue choice, selecting between these two event delivery services can seem tricky at first.</span></span> <span data-ttu-id="3536e-142">两者都支持*至少一次*语义。</span><span class="sxs-lookup"><span data-stu-id="3536e-142">Both support *At Least Once* semantics.</span></span>

#### <a name="choose-event-hubs-if"></a><span data-ttu-id="3536e-143">在以下情况中选择事件中心:</span><span class="sxs-lookup"><span data-stu-id="3536e-143">Choose Event Hubs if:</span></span>  

- <span data-ttu-id="3536e-144">需要支持对大量发布服务器进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="3536e-144">You need to support authenticating a large number of publishers.</span></span>
- <span data-ttu-id="3536e-145">您需要将事件流保存到 Data Lake 或 Blob 存储。</span><span class="sxs-lookup"><span data-stu-id="3536e-145">You need to save a stream of events to Data Lake or Blob storage.</span></span>
- <span data-ttu-id="3536e-146">您需要对事件流进行聚合或分析。</span><span class="sxs-lookup"><span data-stu-id="3536e-146">You need aggregation or analytics on your event stream.</span></span>
- <span data-ttu-id="3536e-147">您需要可靠的消息传送或恢复能力。</span><span class="sxs-lookup"><span data-stu-id="3536e-147">You need reliable messaging or resiliency.</span></span>  

<span data-ttu-id="3536e-148">否则, 如果需要简单的事件发布-订阅基础结构 (例如, 使用受信任的发布服务器), 应选择 "事件网格"。</span><span class="sxs-lookup"><span data-stu-id="3536e-148">Otherwise, if you need a simple event publish-subscribe infrastructure, with trusted publishers (for instance, your own web server), you should choose Event Grid.</span></span>

<span data-ttu-id="3536e-149">使用事件中心, 可以构建一个大型数据管道, 该管道能够处理数百万个事件 (低延迟)。</span><span class="sxs-lookup"><span data-stu-id="3536e-149">Event Hubs lets you build a big data pipeline capable of processing millions of events per second with low latency.</span></span> <span data-ttu-id="3536e-150">它可以处理并发源中的数据, 并将其路由到各种流处理基础结构和分析服务。</span><span class="sxs-lookup"><span data-stu-id="3536e-150">It can handle data from concurrent sources and route it to a variety of stream-processing infrastructures and analytics services.</span></span> <span data-ttu-id="3536e-151">它支持实时处理, 并支持重复重播存储的原始数据。</span><span class="sxs-lookup"><span data-stu-id="3536e-151">It enables real-time processing and supports repeated replay of stored raw data.</span></span> 