有些应用程序产生的事件几乎与源几乎一样多。 我们通常会听到应用于这些情况的 "大数据" 这一术语, 它们需要独特的基础结构来处理它们。

假设您适用于 Contoso 飞机发动机。 你的雇主制造商的引擎具有数百个传感器。 在飞机可以在早上 flown 的情况下, 其引擎将连接到测试套, 并通过其 paces。 此外, 当飞机连接到地面设备时, 将会对缓存的实时数据进行流式处理。

您希望使用历史传感器数据在传感器读数中查找模式, 指示引擎故障可能很快就会发生。 您希望将实时传感器读数与这些故障模式进行比较。 如果某个引擎显示 worrisome 读数, 则可以在接近实时时警告用户。

## <a name="what-is-azure-event-hubs"></a>什么是 Azure 事件中心？
事件中心是发布订阅通信模式的媒介。 然而, 与事件网格不同的是, 它是针对极高的吞吐量、大量的发布服务器、安全性和恢复能力而优化的。

#### <a name="what-is-an-event-hub"></a>什么是事件中心？

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yuat]

[! 注意] 事件网格完全符合发布订阅模式, 因为它只是管理订阅和路由到这些订阅服务器的通信, 因此事件中心会执行很多其他服务。 这些附加服务使其看起来更像服务总线或邮件队列, 而不是简单的事件广播者。

#### <a name="partitions"></a>里
当事件中心收到通信时, 它会将它们划分为分区。 分区是保存通信的缓冲区。 由于事件缓冲区的原因, 事件并不完全是暂时的, 并且仅由于订阅者正忙甚至脱机而不会丢失事件。 订阅者始终可以使用缓冲区 "追赶"。 默认情况下, 事件在缓冲区中停留在24小时后才会自动过期。

缓冲区称为分区, 因为数据是分在它们之间划分的。 每个事件中心至少有两个分区, 每个分区都有一组单独的订阅者。

#### <a name="capture"></a>捕获
事件中心可以立即将所有事件发送到 azure Data Lake 或 azure Blob 存储, 以实现廉价、永久持久性。

#### <a name="authentication"></a>Authentication
对所有发布者进行身份验证并颁发令牌。 这意味着事件中心可以接受来自外部设备和移动应用程序的事件, 而无需担心来自 pranksters 的欺诈数据会破坏我们的分析。 

## <a name="using-event-hubs"></a>使用事件中心
事件中心支持到其他 Azure 服务的流水线传递事件流。 例如, 将其用于 Azure Stream Analytics, 可以在近实时分析数据, 并能够关联多个事件和查找模式。 在这种情况下, Stream Analytics 将被视为订阅者。

对于我们的飞机引擎, 我们将设置体系结构, 以便事件中心能够对我们的引擎的通信进行身份验证。 然后, 我们将使用捕获将所有数据保存到 data Lake。 稍后, 我们可以使用所有这些数据重新培训并改进我们的机器学习模式。 最后, Stream Analytics 订阅者将选取我们的事件流。 Stream Analytics 将使用我们的机器学习模型查找传感器数据中可能指示问题的模式。

由于我们有多个分区, 并且每个引擎仅将其所有数据发送到一个分区, 因此 Stream Analytics 订阅服务器的每个实例只需要处理我们的总体数据的子集。 它无需对所有 it 进行筛选和关联。

## <a name="which-service-should-i-choose"></a>我应选择哪种服务？
就像我们的队列选择一样, 在这两个事件传递服务之间进行选择最初可能会比较棘手。 两者都支持*至少一次*语义。

#### <a name="choose-event-hubs-if"></a>在以下情况中选择事件中心:  

- 需要支持对大量发布服务器进行身份验证。
- 您需要将事件流保存到 Data Lake 或 Blob 存储。
- 您需要对事件流进行聚合或分析。
- 您需要可靠的消息传送或恢复能力。  

否则, 如果需要简单的事件发布-订阅基础结构 (例如, 使用受信任的发布服务器), 应选择 "事件网格"。

使用事件中心, 可以构建一个大型数据管道, 该管道能够处理数百万个事件 (低延迟)。 它可以处理并发源中的数据, 并将其路由到各种流处理基础结构和分析服务。 它支持实时处理, 并支持重复重播存储的原始数据。 