请记住, 我们的公司在 Windows vm 上处理视频内容。 新城市已将我们的交通相机告知我们, 但这是我们之前未处理的模型。 我们需要创建一个新的 Windows VM 并安装一些专用的编解码器, 以便我们可以开始处理和分析其图像。

<!-- Activate the sandbox -->
[!include[](../../../includes/azure-sandbox-activate.md)]

## <a name="create-a-new-windows-virtual-machine"></a>创建新的 Windows 虚拟机

我们可以使用 azure 门户、azure CLI 或 azure PowerShell 创建 Windows 虚拟机。 最简单的方法是门户, 因为它将引导您完成所需的信息, 并在创建 VM 的过程中提供提示和有用的消息。

1. 使用与激活沙盒时相同的帐户登录[Azure 门户](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true)。

1. 单击 Azure 门户左上角的 "**创建资源**"。

1. 在 "搜索" 框中, 输入**Windows Server 2016 Datacenter** , 然后在显示的列表中单击具有相同标题的链接。

1. 单击 "**创建**" 按钮开始配置 VM。

## <a name="configure-the-vm-settings"></a>配置虚拟机设置

门户中的 VM 创建体验以 "向导" 的格式显示, 以引导您完成 VM 的所有配置区域。 单击 "下一步" 按钮将转到下一个可配置的部分。 但是, 您可以在中的各节之间移动, 这些选项卡在标识每个部分的顶部运行。

![显示在 Azure 门户中创建虚拟机体验的屏幕截图。](../media/3-azure-portal-create-vm.png)

一旦您填写了所有必需的选项 (用红色星标识), 您可以跳过其余的向导体验, 并通过底部的 "**审阅 + 创建**" 按钮来开始创建 VM。

我们将从 "**基础知识**" 部分开始。

### <a name="configure-basic-vm-settings"></a>配置基本虚拟机设置

> [!NOTE]
> 当您在每个自由文本字段中更改设置和选项卡时, Azure 将自动验证每个值, 并在其正常时在其旁边放置绿色复选标记。 您可以将鼠标悬停在错误指示器上方, 以获取有关它发现的问题的详细信息。

1. 选择应为 VM 时间计费的**订阅**。

1. 对于 "**资源组**", 选择 "**<rgn>[沙盒资源组名称]</rgn>**"。

1. 在 "**实例详细信息**" 部分, 输入你的 VM 的名称, 如**测试副总裁-vm2** (针对测试视频处理器 VM #2)。
    - 最好的做法是对资源名称进行标准化, 以便能够轻松地识别它们的用途。 Windows VM 名称是一种受限制的名称-它们必须介于1到15个字符之间, 不能包含非 ASCII 字符或特殊字符, 并且在当前资源组中必须是唯一的。

1. 从以下位置选择与你接近的区域。

   [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]

1. 将**可用性选项**保留为 "无"。 此选项可用于通过将多个虚拟机组合在一起以处理计划的或计划外的维护事件或中断, 以确保虚拟机高度可用。

1. 确保将图像设置为 "Windows Server 2016 Datacenter"。 您可以打开下拉列表以查看所有可用选项。

1. **Size**字段不是直接可编辑的, 并且具有 DS1 的默认大小。 单击 "**更改大小**" 链接以浏览其他 VM 大小。 生成的对话框允许您根据 cpu、名称和磁盘类型的数量进行筛选。 完成后, 选择 "Standard DS1 v2" (通常为默认值)。 这将提供虚拟机 1 CPU 和 3.5 GB 的内存。

    > [!TIP]
    > 您还可以将视图向左滑动以返回到虚拟机设置, 因为它在右侧打开一个新窗口并 slid 该窗口以进行查看。

1. 在 "**管理员帐户**" 部分, 将 "**用户名**" 字段设置为您将用于登录到 VM 的用户名。

1. 在 "**密码**" 字段中, 输入长度至少为12个字符的密码。 它必须具有以下三项: 一个小写字符、一个大写字符、一个数字和一个非 '\\' 或 '-' 的特殊字符。 使用你要记住或记下它的一些内容, 稍后将需要它。

1. 确认**密码**。

1. 在 "**入站端口规则**" 部分, 打开列表并选择 "_允许选择的端口_"。 由于这是 Windows VM, 因此我们希望能够使用 RDP 访问桌面。 根据需要滚动列表, 直到找到 RDP (3389) 并将其选中。 如 UI 中的注释所示, 我们还可以在创建虚拟机之后调整网络端口。

    ![显示用于在 Windows VM 上打开 RDP 访问端口的下拉的屏幕截图。](../media/3-open-ports.png)

## <a name="configure-disks-for-the-vm"></a>为 VM 配置磁盘

1. 单击 "**下一步**" 移动到 "磁盘" 部分。

    ![显示 VM 的 "配置磁盘" 部分的屏幕截图。](../media/3-configure-disks.png)

1. 为**OS 磁盘类型**选择 "Premium SSD"。

1. 使用托管磁盘, 因此我们不必使用存储帐户。 您可以翻转 GUI 中的开关, 以查看 Azure 需要的信息在您喜欢的不同之处。

### <a name="create-a-data-disk"></a>创建数据磁盘

回想一下, 我们将获取 OS 磁盘 (C:)和临时磁盘 (D:)。 还可以添加数据磁盘。

1. 单击 "**数据磁盘**" 部分中的 "**创建并附加新磁盘**" 链接。

    ![显示门户中新的 "VM 磁盘创建" 对话框的屏幕截图。](../media/3-add-data-disk.png)

1. 您可以采用所有默认值: 高级 SSD、1023 GB 和无 (空磁盘);但请注意, 在这里, 我们可以使用快照或存储 Blob 来创建 VHD。

1. 单击 **"确定"** 以创建磁盘并返回到 "**数据磁盘**" 部分。

1. 现在, 第一行中应该有一个新磁盘。

    ![显示 VM 中新添加的磁盘的屏幕截图。](../media/3-new-disk.png)

## <a name="configure-the-network"></a>配置网络

1. 单击 "**下一步**" 移动到 "网络" 部分。

1. 在我们已有其他组件的生产系统中, 我们想要利用_现有_的虚拟网络。 这样, VM 便可以与我们的解决方案中的其他云服务进行通信。 如果尚未在此位置中定义任何一个, 则可以在此处创建并配置以下内容:
    - **地址空间**: 此网络可用的总 IPV4 空间。
    - **子网范围**: 要细分地址空间的第一个子网-它必须在定义的地址空间内。 创建 VNet 后, 可以添加其他子网。

1. 让我们将默认范围更改为使用`172.xxx` IP 地址空间。 单击 "虚拟网络" 下的 "**新建**"。
    - 将 "**地址空间**" 字段更改`172.16.0.0/16`为, 以为其提供所有地址范围
    - 将 "**子网范围**" 字段`172.16.1.0/24`更改为为其分配的 256 IP 地址的空间。

1. 单击"确定"。

> [!NOTE]
> 默认情况下, Azure 将为你的 VM 创建虚拟网络、网络接口和公用 IP。 在创建虚拟机之后更改网络选项并不是很简单, 因此总是请仔细检查您在 Azure 中创建的服务上的网络分配。

## <a name="finish-configuring-the-vm-and-create-the-image"></a>完成虚拟机的配置并创建映像

其余选项具有合理的默认设置, 无需更改任何其他选项。 如果愿意, 你可以浏览其他选项卡。 各个选项旁边都有`(i)`一个图标, 将显示一个帮助气泡来说明该选项。 这是了解可用于配置 VM 的各种选项的好方法。

1. 单击面板底部的 "**审阅 + 创建**" 按钮。

1. 系统将验证您的选项, 并提供有关正在创建的 VM 的详细信息。

1. 单击 "**创建**" 以创建和部署 VM。 Azure 仪表板将显示正在部署的 VM。 这可能需要几分钟时间。

在部署时, 让我们来看看我们可以使用此 VM 做什么。