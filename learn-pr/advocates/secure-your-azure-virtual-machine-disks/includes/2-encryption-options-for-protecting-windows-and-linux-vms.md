<span data-ttu-id="10a59-101">假定贵公司的贸易合作伙伴的安全策略需要使用高度加密来保护其交易数据。</span><span class="sxs-lookup"><span data-stu-id="10a59-101">Suppose your company's trading partners have security policies who require their trading data is protected with strong encryption.</span></span> <span data-ttu-id="10a59-102">您可以使用在 Windows 服务器上运行的 B2B 应用程序, 并将数据存储在服务器数据磁盘上。</span><span class="sxs-lookup"><span data-stu-id="10a59-102">You use a B2B application that runs on your Windows servers, and stores data on the server data disk.</span></span> <span data-ttu-id="10a59-103">现在您正在转换到云, 您需要向您的贸易合作伙伴演示存储在 Azure 虚拟机上的数据无法由未经授权的用户、设备或应用程序访问。</span><span class="sxs-lookup"><span data-stu-id="10a59-103">Now that you're transitioning to the cloud, you need to demonstrate to your trading partners that data stored on your Azure VMs cannot be accessed by unauthorized users, devices, or applications.</span></span> <span data-ttu-id="10a59-104">您需要决定实现 B2B 数据加密的策略。</span><span class="sxs-lookup"><span data-stu-id="10a59-104">You need to decide on a strategy for implementing encryption of your B2B data.</span></span>

<span data-ttu-id="10a59-105">您的审核要求规定您的加密密钥是内部托管的, 而不是任何第三方。</span><span class="sxs-lookup"><span data-stu-id="10a59-105">Your audit requirements dictate that your encryption keys be managed in-house, and not by any third party.</span></span> <span data-ttu-id="10a59-106">此外, 您还需要维护基于 Azure 的服务器的性能和可管理性。</span><span class="sxs-lookup"><span data-stu-id="10a59-106">You're also concerned that the performance and manageability of your Azure-based servers is maintained.</span></span> <span data-ttu-id="10a59-107">因此, 在实现加密之前, 您需要确保不会对性能造成影响。</span><span class="sxs-lookup"><span data-stu-id="10a59-107">So before you implement encryption, you want to be sure that there won't be a performance hit.</span></span>

## <a name="what-is-encryption"></a><span data-ttu-id="10a59-108">什么是加密？</span><span class="sxs-lookup"><span data-stu-id="10a59-108">What is encryption?</span></span>

<span data-ttu-id="10a59-109">加密是指将有意义的信息转换为有意义的内容, 如字母和数字的随机序列。</span><span class="sxs-lookup"><span data-stu-id="10a59-109">Encryption is about converting meaningful information into something that appears meaningless, such as a random sequence of letters and numbers.</span></span> <span data-ttu-id="10a59-110">加密过程使用某种形式的**密钥**作为创建加密数据的算法的一部分。</span><span class="sxs-lookup"><span data-stu-id="10a59-110">The process of encryption uses some form of **key** as part of the algorithm that creates the encrypted data.</span></span> <span data-ttu-id="10a59-111">还需要一个密钥来执行解密。</span><span class="sxs-lookup"><span data-stu-id="10a59-111">A key is also needed to perform the decryption.</span></span> <span data-ttu-id="10a59-112">密钥可能是**_对称_** 的, 在其中使用不同密钥的加密和解密或**_非对称_** 密钥使用同一密钥。</span><span class="sxs-lookup"><span data-stu-id="10a59-112">Keys may be **_symmetric_**, where the same key is used for encryption and decryption, or **_asymmetric_**, where different keys are used.</span></span> <span data-ttu-id="10a59-113">后者的一个示例是数字证书中使用的**公钥/私钥**对。</span><span class="sxs-lookup"><span data-stu-id="10a59-113">An example of the latter is the **public-private** key pairs used in digital certificates.</span></span>

### <a name="symmetric-encryption"></a><span data-ttu-id="10a59-114">对称加密</span><span class="sxs-lookup"><span data-stu-id="10a59-114">Symmetric encryption</span></span>

<span data-ttu-id="10a59-115">使用对称密钥的算法 (如高级加密标准 (AES)) 通常比公钥算法快, 并且通常用于保护大型数据存储。</span><span class="sxs-lookup"><span data-stu-id="10a59-115">Algorithms that use symmetric keys, such as Advanced Encryption Standard (AES), are typically faster than public key algorithms, and are often used for protecting large data stores.</span></span> <span data-ttu-id="10a59-116">由于只有一个密钥, 因此必须设置过程以防止密钥成为公开已知的。</span><span class="sxs-lookup"><span data-stu-id="10a59-116">Because there's only one key, procedures must be in place to prevent the key from becoming publicly known.</span></span>

### <a name="asymmetric-encryption"></a><span data-ttu-id="10a59-117">非对称加密</span><span class="sxs-lookup"><span data-stu-id="10a59-117">Asymmetric encryption</span></span>

<span data-ttu-id="10a59-118">使用非对称算法时, 只有对的私钥成员才必须保密和安全;顾名思义, 公钥可供任何人使用, 而不会危及加密的数据。</span><span class="sxs-lookup"><span data-stu-id="10a59-118">With asymmetric algorithms, only the private key member of the pair must be kept private and secure; as its name suggests, the public key can be made available to anyone without compromising the encrypted data.</span></span> <span data-ttu-id="10a59-119">然而, 公钥算法的缺点是, 它们比对称算法要慢得多, 且不能用于加密大量数据。</span><span class="sxs-lookup"><span data-stu-id="10a59-119">The downside of public key algorithms, however, is that they're much slower than symmetric algorithms, and cannot be used to encrypt large amounts of data.</span></span>

## <a name="key-management"></a><span data-ttu-id="10a59-120">密钥管理</span><span class="sxs-lookup"><span data-stu-id="10a59-120">Key management</span></span>

<span data-ttu-id="10a59-121">在 Azure 中, 你的加密密钥可由 Microsoft 或客户管理。</span><span class="sxs-lookup"><span data-stu-id="10a59-121">In Azure, your encryption keys can be managed by Microsoft or the customer.</span></span> <span data-ttu-id="10a59-122">对客户管理的密钥的需求通常来自需要证明遵守 HIPAA 或其他法规的组织。</span><span class="sxs-lookup"><span data-stu-id="10a59-122">Often the demand for customer-managed keys comes from organizations that need to demonstrate compliance with HIPAA, or other regulations.</span></span> <span data-ttu-id="10a59-123">此类合规性可能要求对密钥的访问进行记录, 并进行定期的关键更改并进行记录。</span><span class="sxs-lookup"><span data-stu-id="10a59-123">Such compliance may require that access to keys is logged, and that regular key changes are made and recorded.</span></span>

## <a name="azure-disk-encryption-technologies"></a><span data-ttu-id="10a59-124">Azure 磁盘加密技术</span><span class="sxs-lookup"><span data-stu-id="10a59-124">Azure disk encryption technologies</span></span>

<span data-ttu-id="10a59-125">Azure 虚拟机的基于加密的主要磁盘保护技术包括:</span><span class="sxs-lookup"><span data-stu-id="10a59-125">The main encryption-based disk protection technologies for Azure VMs are:</span></span>

- <span data-ttu-id="10a59-126">存储服务加密 (SSE)</span><span class="sxs-lookup"><span data-stu-id="10a59-126">Storage Service Encryption (SSE)</span></span>
- <span data-ttu-id="10a59-127">Azure 磁盘加密 (ADE)</span><span class="sxs-lookup"><span data-stu-id="10a59-127">Azure Disk Encryption (ADE)</span></span>

### <a name="storage-service-encryption"></a><span data-ttu-id="10a59-128">存储服务加密</span><span class="sxs-lookup"><span data-stu-id="10a59-128">Storage Service Encryption</span></span>

<span data-ttu-id="10a59-129">azure 存储服务加密 (SSE) 是一个内置于 Azure 中用于保护静态数据的加密服务。</span><span class="sxs-lookup"><span data-stu-id="10a59-129">Azure Storage Service Encryption (SSE) is an encryption service built into Azure used to protect data at rest.</span></span> <span data-ttu-id="10a59-130">azure 存储平台会在存储到多个存储服务 (包括 Azure 托管磁盘) 之前自动对数据进行加密。</span><span class="sxs-lookup"><span data-stu-id="10a59-130">The Azure storage platform automatically encrypts data before it's stored to several storage services, including Azure Managed Disks.</span></span> <span data-ttu-id="10a59-131">默认情况下, 使用256位 AES 加密启用加密, 并由存储帐户管理员进行管理。</span><span class="sxs-lookup"><span data-stu-id="10a59-131">Encryption is enabled by default using 256-bit AES encryption, and is managed by the storage account administrator.</span></span>

### <a name="azure-disk-encryption"></a><span data-ttu-id="10a59-132">Azure 磁盘加密</span><span class="sxs-lookup"><span data-stu-id="10a59-132">Azure Disk Encryption</span></span>

<span data-ttu-id="10a59-133">Azure 磁盘加密 (ADE) 由 VM 所有者进行管理。</span><span class="sxs-lookup"><span data-stu-id="10a59-133">Azure Disk Encryption (ADE) is managed by the VM owner.</span></span> <span data-ttu-id="10a59-134">它控制 windows 和 linux vm 控制的磁盘的加密, 在 Linux 虚拟机上使用 windows vm 上的**BitLocker**和**DM Crypt** 。</span><span class="sxs-lookup"><span data-stu-id="10a59-134">It controls the encryption of Windows and Linux VM-controlled disks, using **BitLocker** on Windows VMs and **DM-Crypt** on Linux VMs.</span></span> <span data-ttu-id="10a59-135">BitLocker 驱动器加密是一种与操作系统集成的数据保护功能, 可解决数据失窃或因丢失、被盗或无法正确解除授权而被取消授权的计算机泄露的威胁。</span><span class="sxs-lookup"><span data-stu-id="10a59-135">BitLocker Drive Encryption is a data protection feature that integrates with the operating system, and addresses the threats of data theft or exposure from lost, stolen, or inappropriately decommissioned computers.</span></span> <span data-ttu-id="10a59-136">同样, DM Crypt 在写入存储之前对 Linux 的静态数据进行加密。</span><span class="sxs-lookup"><span data-stu-id="10a59-136">Similarly, DM-Crypt encrypts data at rest for Linux before writing to storage.</span></span>

<span data-ttu-id="10a59-137">ADE 可确保 vm 磁盘上的所有数据在 Azure 存储中的静态位置进行加密, 并对备份到恢复保管库的虚拟机要求 ADE。</span><span class="sxs-lookup"><span data-stu-id="10a59-137">ADE ensures that all data on VM disks are encrypted at rest in Azure storage, and ADE is required for VMs backed up to the Recovery Vault.</span></span>

<span data-ttu-id="10a59-138">在 ADE 中, 虚拟机在客户控制的密钥和策略下启动。</span><span class="sxs-lookup"><span data-stu-id="10a59-138">With ADE, VMs boot under customer-controlled keys and policies.</span></span> <span data-ttu-id="10a59-139">ADE 与 Azure Key Vault 集成, 以管理这些磁盘加密密钥和密码。</span><span class="sxs-lookup"><span data-stu-id="10a59-139">ADE is integrated with Azure Key Vault for the management of these disk-encryption keys and secrets.</span></span>

> [!NOTE] 
> <span data-ttu-id="10a59-140">ade 不支持对基本层虚拟机进行加密, 也不能将本地密钥管理服务 (KMS) 用于 ADE。</span><span class="sxs-lookup"><span data-stu-id="10a59-140">ADE does not support the encryption of Basic tier VMs, and you cannot use an on-premises Key Management Service (KMS) with ADE.</span></span>

## <a name="when-to-use-encryption"></a><span data-ttu-id="10a59-141">何时使用加密？</span><span class="sxs-lookup"><span data-stu-id="10a59-141">When to use encryption?</span></span>

<span data-ttu-id="10a59-142">当计算机数据在传输过程中 (通过 Internet 或其他网络传输) 以及它位于 rest (保存到存储设备) 时, 其存在风险。</span><span class="sxs-lookup"><span data-stu-id="10a59-142">Computer data is at risk when it's in transit (transmitted across the Internet or other network), and when it's at rest (saved to a storage device).</span></span> <span data-ttu-id="10a59-143">在保护 Azure VM 磁盘上的数据时, rest 方案是主要考虑的问题。</span><span class="sxs-lookup"><span data-stu-id="10a59-143">The at-rest scenario is the primary concern when protecting data on Azure VM disks.</span></span> <span data-ttu-id="10a59-144">例如, 某个人可能会下载与 Azure VM 关联的虚拟硬盘 (VHD) 文件, 并将其保存在其膝上型电脑上。</span><span class="sxs-lookup"><span data-stu-id="10a59-144">For example, someone might download the Virtual Hard Disk (VHD) file associated with an Azure VM, and save it on their laptop.</span></span> <span data-ttu-id="10a59-145">如果 vhd 未加密, 则可以在其计算机上安装 vhd 文件的任何人都能够访问 vhd 的内容。</span><span class="sxs-lookup"><span data-stu-id="10a59-145">If the VHD is not encrypted, the contents of the VHD are potentially accessible to anyone who can mount the VHD file on their computer.</span></span>

<span data-ttu-id="10a59-146">对于操作系统 (OS) 磁盘, 密码等数据会自动加密, 因此即使 VHD 本身没有加密, 也无法轻松访问此类信息。</span><span class="sxs-lookup"><span data-stu-id="10a59-146">For operating system (OS) disks, data such as passwords are encrypted automatically, so even if the VHD is not itself encrypted, it's not easy for such information to be accessed.</span></span> <span data-ttu-id="10a59-147">应用程序也可能会自动对自己的数据进行加密。</span><span class="sxs-lookup"><span data-stu-id="10a59-147">Applications may also automatically encrypt their own data.</span></span> <span data-ttu-id="10a59-148">但是, 即使使用此类保护, 如果有人恶意企图访问数据磁盘, 并且磁盘本身未加密, 但它们可能会在该应用程序的数据保护中利用任何已知弱点的位置。</span><span class="sxs-lookup"><span data-stu-id="10a59-148">However, even with such protections, if someone with malicious intent were to gain access to a data disk, and the disk itself was not encrypted, they might then be in a position to exploit any known weaknesses in that application's data protection.</span></span> <span data-ttu-id="10a59-149">使用磁盘加密时, 这种利用方式是不可能的。</span><span class="sxs-lookup"><span data-stu-id="10a59-149">With disk encryption in place, such exploits are not possible.</span></span>

<span data-ttu-id="10a59-150">Storage Service Encryption (SSE) 是 Azure 本身的一部分, 在使用 SSE 时, 对 VM 磁盘 IO 不会产生显著的性能影响。</span><span class="sxs-lookup"><span data-stu-id="10a59-150">Storage Service Encryption (SSE) is part of Azure itself, and there should be no noticeable performance impact on the VM disk IO when using SSE.</span></span> <span data-ttu-id="10a59-151">带有 SSE 的托管磁盘现在是默认设置, 因此没有理由对其进行更改。</span><span class="sxs-lookup"><span data-stu-id="10a59-151">Managed disks with SSE are now the default, and there should be no reason to change it.</span></span> <span data-ttu-id="10a59-152">Azure 磁盘加密 (ADE) 使用虚拟机操作系统工具 (BitLocker 和 DM-Crypt), 因此在执行 vm 磁盘上的加密或解密时, VM 本身必须执行一些工作。</span><span class="sxs-lookup"><span data-stu-id="10a59-152">Azure Disk Encryption (ADE) makes use of VM operating system tools (BitLocker and DM-Crypt), so the VM itself has to do some work when encryption or decryption on VM disks is being performed.</span></span> <span data-ttu-id="10a59-153">除了在某些情况下, 此额外的 VM CPU 活动的影响通常是不可计的。</span><span class="sxs-lookup"><span data-stu-id="10a59-153">The impact of this additional VM CPU activity is typically negligible, except in certain situations.</span></span> <span data-ttu-id="10a59-154">例如, 如果您有大量占用 CPU 的应用程序, 则可能需要保持未加密操作系统磁盘的情况以最大限度地提高性能。</span><span class="sxs-lookup"><span data-stu-id="10a59-154">For instance, if you have a CPU-intensive application, there may be a case for leaving the OS disk unencrypted to maximize performance.</span></span> <span data-ttu-id="10a59-155">在这种情况下, 可以将应用程序数据存储在单独的加密数据磁盘上, 从而获得所需的性能而不会降低安全性。</span><span class="sxs-lookup"><span data-stu-id="10a59-155">In a situation such as this, you can store application data on a separate encrypted data disk, getting you the performance you need without compromising security.</span></span>

<span data-ttu-id="10a59-156">azure 提供了两种用于保护 Azure 虚拟磁盘的补充加密技术。</span><span class="sxs-lookup"><span data-stu-id="10a59-156">Azure provides two complementary encryption technologies that are used to secure Azure VM disks.</span></span> <span data-ttu-id="10a59-157">这些技术、SSE 和 ADE, 在不同层进行加密, 并提供不同的用途。</span><span class="sxs-lookup"><span data-stu-id="10a59-157">These technologies, SSE and ADE, encrypt at different layers, and serve different purposes.</span></span> <span data-ttu-id="10a59-158">两者都使用 AES 256 位加密。</span><span class="sxs-lookup"><span data-stu-id="10a59-158">Both use AES 256-bit encryption.</span></span> <span data-ttu-id="10a59-159">同时使用这两种技术提供纵深防御保护, 以防止未经授权访问 Azure 存储和特定 vhd。</span><span class="sxs-lookup"><span data-stu-id="10a59-159">Using both technologies provides a defense-in-depth protection against unauthorized access to your Azure storage, and to specific VHDs.</span></span>
