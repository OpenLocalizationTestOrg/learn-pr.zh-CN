<span data-ttu-id="38e66-101">创建管理脚本是优化工作流的一种有效方式。</span><span class="sxs-lookup"><span data-stu-id="38e66-101">Creating administration scripts is a powerful way to optimize your work flow.</span></span> <span data-ttu-id="38e66-102">您可以自动执行常见的重复性任务。</span><span class="sxs-lookup"><span data-stu-id="38e66-102">You can automate common, repetitive tasks.</span></span> <span data-ttu-id="38e66-103">脚本经过验证后, 它将持续运行, 这很可能会减少错误。</span><span class="sxs-lookup"><span data-stu-id="38e66-103">Once a script has been verified, it will run consistently, which will likely reduce errors.</span></span> <span data-ttu-id="38e66-104">在上一个练习中, 我们创建了一个 VM, 添加了数据磁盘, 并通过 Azure 门户进行了更改的缓存设置。</span><span class="sxs-lookup"><span data-stu-id="38e66-104">In the previous exercise, we created a VM, added a data disk, and changed cache settings, all through the Azure portal.</span></span> <span data-ttu-id="38e66-105">如果我们需要在多个区域中跨多个 vm 重复这些任务, 该怎么办？</span><span class="sxs-lookup"><span data-stu-id="38e66-105">What if we needed to repeat these tasks across many VMs, in many regions?</span></span> <span data-ttu-id="38e66-106">我们可以使用 Azure PowerShell 执行此操作。</span><span class="sxs-lookup"><span data-stu-id="38e66-106">We can do that with Azure PowerShell.</span></span>

> [!TIP]
> <span data-ttu-id="38e66-107">我们将在**使用 PowerShell 模块自动化 azure 任务**中详细介绍 azure PowerShell。</span><span class="sxs-lookup"><span data-stu-id="38e66-107">We cover Azure PowerShell in detail in the **Automate Azure Tasks with PowerShell** module.</span></span> <span data-ttu-id="38e66-108">若要详细了解如何安装、配置和使用 PowerShell, 请务必检查模块。</span><span class="sxs-lookup"><span data-stu-id="38e66-108">Make sure to check that module out for more details on installing, configuring, and using PowerShell.</span></span>

## <a name="what-is-azure-powershell"></a><span data-ttu-id="38e66-109">什么是 Azure PowerShell？</span><span class="sxs-lookup"><span data-stu-id="38e66-109">What is Azure PowerShell?</span></span>

<span data-ttu-id="38e66-110">Azure PowerShell 是一种跨平台命令行工具, 用于连接到 Azure 订阅并管理资源。</span><span class="sxs-lookup"><span data-stu-id="38e66-110">Azure PowerShell is a cross-platform command-line tool to connect to your Azure subscription and manage resources.</span></span> <span data-ttu-id="38e66-111">它是以下两项的组合: **PowerShell**, 提供命令行工具支持;和**Az** PowerShell 模块, 它提供了可与 Azure 配合使用的命令 (称为 "cmdlet")。</span><span class="sxs-lookup"><span data-stu-id="38e66-111">It's combination of two things: **PowerShell**, which provides the command-line tool support; and the **Az** PowerShell module, which provides the commands (referred to as "cmdlets") to work with Azure.</span></span> 

<span data-ttu-id="38e66-112">azure PowerShell 包含用于操作 Azure 资源的大多数方面的 cmdlet。</span><span class="sxs-lookup"><span data-stu-id="38e66-112">Azure PowerShell has cmdlets to manipulate most aspects of Azure resources.</span></span> <span data-ttu-id="38e66-113">您可以使用资源组、存储、虚拟机、Azure Active Directory、容器、机器学习等。</span><span class="sxs-lookup"><span data-stu-id="38e66-113">You can work with resource groups, storage, virtual machines, Azure Active Directory, containers, machine learning, and so on.</span></span> <span data-ttu-id="38e66-114">我们在其他培训模块中讨论了所有这些详细信息。</span><span class="sxs-lookup"><span data-stu-id="38e66-114">We cover all these details in other training modules.</span></span>

### <a name="powershell-cmdlets-for-managing-azure-disk-caching"></a><span data-ttu-id="38e66-115">用于管理 Azure 磁盘缓存的 PowerShell cmdlet</span><span class="sxs-lookup"><span data-stu-id="38e66-115">PowerShell cmdlets for managing Azure disk caching</span></span>

<span data-ttu-id="38e66-116">Azure PowerShell 具有特定的 cmdlet, 可帮助管理虚拟机和磁盘。</span><span class="sxs-lookup"><span data-stu-id="38e66-116">Azure PowerShell has specific cmdlets to help manage VMs and disks.</span></span>

|<span data-ttu-id="38e66-117">指挥</span><span class="sxs-lookup"><span data-stu-id="38e66-117">Command</span></span>  | <span data-ttu-id="38e66-118">说明</span><span class="sxs-lookup"><span data-stu-id="38e66-118">Description</span></span> |
|---------|-------------|
| `Get-AzVM`         | <span data-ttu-id="38e66-119">获取虚拟机的属性。</span><span class="sxs-lookup"><span data-stu-id="38e66-119">Gets the properties of a virtual machine.</span></span>       |
| `Update-AzVM`      | <span data-ttu-id="38e66-120">更新 Azure 虚拟机的状态。</span><span class="sxs-lookup"><span data-stu-id="38e66-120">Updates the state of an Azure virtual machine.</span></span>  |
| `New-AzDiskConfig` | <span data-ttu-id="38e66-121">创建一个可配置的磁盘对象。</span><span class="sxs-lookup"><span data-stu-id="38e66-121">Creates a configurable disk object.</span></span>             |
| `Add-AzVMDataDisk` | <span data-ttu-id="38e66-122">将数据磁盘添加到虚拟机。</span><span class="sxs-lookup"><span data-stu-id="38e66-122">Adds a data disk to a virtual machine.</span></span>          |

<span data-ttu-id="38e66-123">通过这些操作, 我们可以执行在 Azure 门户中执行的所有任务。</span><span class="sxs-lookup"><span data-stu-id="38e66-123">With these, we can do all the tasks we did in the Azure portal.</span></span> <span data-ttu-id="38e66-124">让我们在 VM 上试用。</span><span class="sxs-lookup"><span data-stu-id="38e66-124">Let's try it out on our VM.</span></span>
