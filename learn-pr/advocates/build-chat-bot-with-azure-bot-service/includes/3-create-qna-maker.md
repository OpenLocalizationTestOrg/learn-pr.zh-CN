[!INCLUDE [0-vm-note](0-vm-note.md)]

<span data-ttu-id="1b788-101">[QnA Maker](https://www.qnamaker.ai/)是[Azure 认知服务](https://www.microsoft.com/cognitive-services/)的一部分, 它是一套服务和 api, 用于构建由人工智能 (AI) 和机器学习支持的智能应用程序。</span><span class="sxs-lookup"><span data-stu-id="1b788-101">[QnA Maker](https://www.qnamaker.ai/) is part of [Azure Cognitive Services](https://www.microsoft.com/cognitive-services/), which is a suite of services and APIs for building intelligent apps backed by artificial intelligence (AI) and machine learning.</span></span> <span data-ttu-id="1b788-102">您可以使用 QnA Maker 创建的有关问题和答案的知识库, 而不是编写用于预测用户可能要求的每个问题并提供响应的 bot。</span><span class="sxs-lookup"><span data-stu-id="1b788-102">Rather than code a bot to anticipate every question a user might ask and provide a response, you can connect it to a knowledge base of questions and answers created with QnA Maker.</span></span> <span data-ttu-id="1b788-103">常见的使用方案是从 FAQ 页面的 URL 创建知识库, 以便 bot 可以回答特定于域的问题, 如 "我如何查找我的 Windows 产品密钥" 或 "我可以在哪里下载 Visual Studio Code？"</span><span class="sxs-lookup"><span data-stu-id="1b788-103">A common usage scenario is to create a knowledge base from the URL of a FAQ page so the bot can answer domain-specific questions such as "How do I find my Windows product key" or "Where can I download Visual Studio Code?"</span></span>

<span data-ttu-id="1b788-104">在此单元中, 您将使用 QnA Maker 创建包含诸如 "什么 NFL 团队赢得了最多的超级 Bowls" 和 "全球最大城市是什么？" 等问题的知识库。</span><span class="sxs-lookup"><span data-stu-id="1b788-104">In this unit, you will use QnA Maker to create a knowledge base containing questions such as "What NFL teams have won the most Super Bowls" and "What is the largest city in the world?"</span></span> <span data-ttu-id="1b788-105">然后, 您将在 Azure web 应用中部署知识库, 以便可以通过 HTTPS 终结点访问该知识库。</span><span class="sxs-lookup"><span data-stu-id="1b788-105">Then, you will deploy the knowledge base in an Azure web app so that it can be accessed via an HTTPS endpoint.</span></span>

1. <span data-ttu-id="1b788-106">打开 QnA Maker 门户, 方法是https://www.qnamaker.ai在 VM 浏览器中打开, 然后选择 "**登录**" 以使用用于登录 Azure 门户的相同实验室帐户登录。</span><span class="sxs-lookup"><span data-stu-id="1b788-106">Open the QnA Maker portal by opening https://www.qnamaker.ai in the VM browser, and select **Sign in** to sign in with the same lab account that you used to sign into the Azure portal.</span></span> 

1. <span data-ttu-id="1b788-107">选择 "汉堡" 菜单, 然后**创建知识库**。</span><span class="sxs-lookup"><span data-stu-id="1b788-107">Select the hamburger menu, then **Create a knowledge base**.</span></span> 

1. <span data-ttu-id="1b788-108">选择 "**创建 QnA 服务**"。</span><span class="sxs-lookup"><span data-stu-id="1b788-108">Select **Create a QnA service**.</span></span>

1. <span data-ttu-id="1b788-109">在新打开的 "Azure 门户" 选项卡中, 在 "**名称**" 框中输入名称。</span><span class="sxs-lookup"><span data-stu-id="1b788-109">In the newly-opened Azure portal tab, enter a name into the **Name** box.</span></span> <span data-ttu-id="1b788-110">此名称在 Azure 中必须是唯一的, 因此请确保该名称旁边有一个绿色的复选标记,*并*在刀片式服务器后面的**应用程序名称**框中显示绿色的复选标记。</span><span class="sxs-lookup"><span data-stu-id="1b788-110">This name must be unique within Azure, so make sure a green check mark appears next to it *and* in the **App name** box further down the blade.</span></span>

1. <span data-ttu-id="1b788-111">选择 "在**资源组**" 下的 "**使用现有**", 然后选择为本次练习预先创建的练习资源组。</span><span class="sxs-lookup"><span data-stu-id="1b788-111">Select **Use existing** under **Resource group**, then select the exercise resource group pre-created for this exercise.</span></span>

1. <span data-ttu-id="1b788-112">从下拉列表中的可用列表中选择一个**位置**。</span><span class="sxs-lookup"><span data-stu-id="1b788-112">Select a **Location** from the list available in the dropdown.</span></span> 

1. <span data-ttu-id="1b788-113">选择 " **F0** " 作为 "**管理" 定价层**。</span><span class="sxs-lookup"><span data-stu-id="1b788-113">Select **F0** as the **Management pricing tier**.</span></span> 

1. <span data-ttu-id="1b788-114">为**搜索定价层**选择 " **F** "。</span><span class="sxs-lookup"><span data-stu-id="1b788-114">Select **F** for the **Search pricing tier**.</span></span> 

1. <span data-ttu-id="1b788-115">验证**应用程序名称**是否对 Azure 是唯一的。</span><span class="sxs-lookup"><span data-stu-id="1b788-115">Verify the **App name** is unique to Azure.</span></span>

1. <span data-ttu-id="1b788-116">在两个位置下拉下拉按钮中选择最接近你的位置, 然后选择刀片式服务器底部的 "**创建**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="1b788-116">Select the location nearest you in both location drop-downs, then select the **Create** button at the bottom of the blade.</span></span>

    ![显示 QnA Maker 的 Azure 门户的屏幕截图创建带有配置值的边栏, 如下所述。](../media/3-new-qna-maker-service.png)

1. <span data-ttu-id="1b788-118">在门户左侧的功能区中选择 "**资源组**", 并打开 "预创建的练习" 资源组。</span><span class="sxs-lookup"><span data-stu-id="1b788-118">Select **Resource groups** in the ribbon on the left side of the portal, and open the pre-created exercise resource group.</span></span> <span data-ttu-id="1b788-119">等待 "部署对刀片顶部的 ' 已成功 ' 更改", 这表明已成功部署 QnA 服务和与之关联的资源。</span><span class="sxs-lookup"><span data-stu-id="1b788-119">Wait until "Deploying" changes to "Succeeded" at the top of the blade, indicating that the QnA service and the resources associated with it were successfully deployed.</span></span> <span data-ttu-id="1b788-120">如果邮件消失, 可以选择菜单栏中的响铃图标查看状态。</span><span class="sxs-lookup"><span data-stu-id="1b788-120">If the message disappears, you can select the bell icon in the menu bar to view the status.</span></span> <span data-ttu-id="1b788-121">您还可以选择刀片式服务器顶部的 "**刷新**" 以刷新部署状态。</span><span class="sxs-lookup"><span data-stu-id="1b788-121">You can also select **Refresh** at the top of the blade to refresh the deployment status.</span></span>

1. <span data-ttu-id="1b788-122">通过在 VM 浏览器中打开https://www.qnamaker.ai/Create并滚动到**步骤 2**以连接到我们的 QnA 服务, 返回到**创建知识库**。</span><span class="sxs-lookup"><span data-stu-id="1b788-122">Return to **Create a knowledge base** by opening https://www.qnamaker.ai/Create in the VM browser and scroll to **Step 2** to connect to our QnA service.</span></span>

1. <span data-ttu-id="1b788-123">在 " **microsoft Azure 目录 ID**" 下, 选择 " **microsoft 了解托管**"。</span><span class="sxs-lookup"><span data-stu-id="1b788-123">Under **Microsoft Azure Directory ID**, choose **Microsoft Learn Hosting**.</span></span>

1. <span data-ttu-id="1b788-124">从 " **Azure 订阅名称**" 下拉列表中选择 " **Microsoft 了解托管**"。</span><span class="sxs-lookup"><span data-stu-id="1b788-124">Select **Microsoft Learn Hosting** from the **Azure subscription name** drop-down list.</span></span>

1. <span data-ttu-id="1b788-125">在 " **Azure QnA 服务**" 下, 选择以前指定的 QnA 服务名称。</span><span class="sxs-lookup"><span data-stu-id="1b788-125">Under **Azure QnA service**, select the QnA service name you specified previously.</span></span> <span data-ttu-id="1b788-126">如果未列出任何服务, 则可能需要刷新页面。</span><span class="sxs-lookup"><span data-stu-id="1b788-126">If no services are listed, you may need to refresh the page.</span></span>

1. <span data-ttu-id="1b788-127">然后, 为知识库分配一个名称, 如 "Factbot 知识库"。</span><span class="sxs-lookup"><span data-stu-id="1b788-127">Then, assign the knowledge base a name, such as "Factbot Knowledge Base".</span></span>

1. <span data-ttu-id="1b788-128">您可以手动在 QnA Maker 知识库中输入问题和答案, 也可以从联机 faq 或本地文件中导入这些问题和答案。</span><span class="sxs-lookup"><span data-stu-id="1b788-128">You can enter questions and answers into a QnA Maker knowledge base manually, or you can import them from online FAQs or local files.</span></span> <span data-ttu-id="1b788-129">受支持的格式包括以制表符分隔的文本文件、Microsoft Word 文档、Excel 电子表格和 PDF 文件。</span><span class="sxs-lookup"><span data-stu-id="1b788-129">Supported formats include tab-delimited text files, Microsoft Word documents, Excel spreadsheets, and PDF files.</span></span>

    <span data-ttu-id="1b788-130">若要演示, https://github.com/MicrosoftDocs/mslearn-build-chat-bot-with-azure-bot-service/blob/master/Factbot.tsv.zip请在 VM 浏览器中打开, 然后下载**Factbot 的 .zip**文件。</span><span class="sxs-lookup"><span data-stu-id="1b788-130">To demonstrate, open https://github.com/MicrosoftDocs/mslearn-build-chat-bot-with-azure-bot-service/blob/master/Factbot.tsv.zip in the VM browser, then download the **Factbot.tsv.zip** file.</span></span> <span data-ttu-id="1b788-131">此 zip 文件夹包含一个名为**Factbot**的文本文件。</span><span class="sxs-lookup"><span data-stu-id="1b788-131">This zip folder contains a text file named **Factbot.tsv**.</span></span> <span data-ttu-id="1b788-132">提取文件并将其复制到您的计算机。</span><span class="sxs-lookup"><span data-stu-id="1b788-132">Extract and copy the file to your computer.</span></span> <span data-ttu-id="1b788-133">然后, 在 VM 浏览器中的 QnA Maker 门户中向下滚动, 选择 " **+ 添加文件**", 然后选择 " **Factbot**"。</span><span class="sxs-lookup"><span data-stu-id="1b788-133">Then, scroll down in the QnA Maker portal in the VM browser, select **+ Add file**, and select **Factbot.tsv**.</span></span> <span data-ttu-id="1b788-134">此文件包含20个问题以及以制表符分隔的格式的答案。</span><span class="sxs-lookup"><span data-stu-id="1b788-134">This file contains 20 questions and answers in tab-delimited format.</span></span>

1. <span data-ttu-id="1b788-135">选择 "在页面底部**创建您的 KB** ", 并等待创建知识库。</span><span class="sxs-lookup"><span data-stu-id="1b788-135">Select **Create your KB** at the bottom of the page, and wait for the knowledge base to be created.</span></span> <span data-ttu-id="1b788-136">需要的时间不应超过一分钟。</span><span class="sxs-lookup"><span data-stu-id="1b788-136">It should take less than a minute.</span></span>

1. <span data-ttu-id="1b788-137">确认从**Factbot**导入的问题和答案显示在知识库中。</span><span class="sxs-lookup"><span data-stu-id="1b788-137">Confirm that the questions and answers imported from **Factbot.tsv** appear in the knowledge base.</span></span> <span data-ttu-id="1b788-138">然后, 选择 "**保存并训练**并等待培训完成"。</span><span class="sxs-lookup"><span data-stu-id="1b788-138">Then, select **Save and train** and wait for training to complete.</span></span>

    ![显示加载的知识库数据的 Factbot 知识库网站的屏幕截图。](../media/3-save-and-train.png)

1. <span data-ttu-id="1b788-140">选择 "**保存并定型**" 按钮右侧的 "**测试**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="1b788-140">Select the **Test** button to the right of the **Save and train** button.</span></span> <span data-ttu-id="1b788-141">在消息框中键入 "Hi", 然后按**enter**。</span><span class="sxs-lookup"><span data-stu-id="1b788-141">Type "Hi" into the message box and press **Enter**.</span></span> <span data-ttu-id="1b788-142">确认响应为 "欢迎使用 QnA Factbot,", 如下所示。</span><span class="sxs-lookup"><span data-stu-id="1b788-142">Confirm that the response is "Welcome to the QnA Factbot," as shown below.</span></span>

    ![与所创建的聊天机器人进行的测试交互的屏幕截图。](../media/3-test-kb.png)

1. <span data-ttu-id="1b788-144">键入 "哪些简介册已售出最多副本？"</span><span class="sxs-lookup"><span data-stu-id="1b788-144">Type "What book has sold the most copies?"</span></span> <span data-ttu-id="1b788-145">到消息框中, 然后按**enter**。</span><span class="sxs-lookup"><span data-stu-id="1b788-145">into the message box and press **Enter**.</span></span> <span data-ttu-id="1b788-146">响应是什么？</span><span class="sxs-lookup"><span data-stu-id="1b788-146">What is the response?</span></span>

1. <span data-ttu-id="1b788-147">再次选择 "**测试**" 按钮以折叠测试面板。</span><span class="sxs-lookup"><span data-stu-id="1b788-147">Select the **Test** button again to collapse the Test panel.</span></span> 
1. <span data-ttu-id="1b788-148">在页面顶部的菜单中选择 "**发布**", 然后选择页面底部的 "**发布**" 按钮以发布知识库。</span><span class="sxs-lookup"><span data-stu-id="1b788-148">Select **Publish** in the menu at the top of the page, and select the **Publish** button at the bottom of the page to publish the knowledge base.</span></span> <span data-ttu-id="1b788-149">*发布*功能使知识库在 HTTPS 终结点上可用。</span><span class="sxs-lookup"><span data-stu-id="1b788-149">*Publishing* makes the knowledge base available at an HTTPS endpoint.</span></span>

<span data-ttu-id="1b788-150">等待发布过程完成并确认 QnA 服务已部署。</span><span class="sxs-lookup"><span data-stu-id="1b788-150">Wait for the publication process to complete and confirm that the QnA service has been deployed.</span></span> <span data-ttu-id="1b788-151">知识库现在托管在自己的 Azure web 应用中, 下一步是部署可使用它的 bot。</span><span class="sxs-lookup"><span data-stu-id="1b788-151">With the knowledge base now hosted in an Azure web app of its own, the next step is to deploy a bot that can use it.</span></span>
