[!INCLUDE [0-vm-note](0-vm-note.md)]

[QnA Maker](https://www.qnamaker.ai/)是[Azure 认知服务](https://www.microsoft.com/cognitive-services/)的一部分, 它是一套服务和 api, 用于构建由人工智能 (AI) 和机器学习支持的智能应用程序。 您可以使用 QnA Maker 创建的有关问题和答案的知识库, 而不是编写用于预测用户可能要求的每个问题并提供响应的 bot。 常见的使用方案是从 FAQ 页面的 URL 创建知识库, 以便 bot 可以回答特定于域的问题, 如 "我如何查找我的 Windows 产品密钥" 或 "我可以在哪里下载 Visual Studio Code？"

在此单元中, 您将使用 QnA Maker 创建包含诸如 "什么 NFL 团队赢得了最多的超级 Bowls" 和 "全球最大城市是什么？" 等问题的知识库。 然后, 您将在 Azure web 应用中部署知识库, 以便可以通过 HTTPS 终结点访问该知识库。

1. 打开 QnA Maker 门户, 方法是https://www.qnamaker.ai在 VM 浏览器中打开, 然后选择 "**登录**" 以使用用于登录 Azure 门户的相同实验室帐户登录。 

1. 选择 "汉堡" 菜单, 然后**创建知识库**。 

1. 选择 "**创建 QnA 服务**"。

1. 在新打开的 "Azure 门户" 选项卡中, 在 "**名称**" 框中输入名称。 此名称在 Azure 中必须是唯一的, 因此请确保该名称旁边有一个绿色的复选标记,*并*在刀片式服务器后面的**应用程序名称**框中显示绿色的复选标记。

1. 选择 "在**资源组**" 下的 "**使用现有**", 然后选择为本次练习预先创建的练习资源组。

1. 从下拉列表中的可用列表中选择一个**位置**。 

1. 选择 " **F0** " 作为 "**管理" 定价层**。 

1. 为**搜索定价层**选择 " **F** "。 

1. 验证**应用程序名称**是否对 Azure 是唯一的。

1. 在两个位置下拉下拉按钮中选择最接近你的位置, 然后选择刀片式服务器底部的 "**创建**" 按钮。

    ![显示 QnA Maker 的 Azure 门户的屏幕截图创建带有配置值的边栏, 如下所述。](../media/3-new-qna-maker-service.png)

1. 在门户左侧的功能区中选择 "**资源组**", 并打开 "预创建的练习" 资源组。 等待 "部署对刀片顶部的 ' 已成功 ' 更改", 这表明已成功部署 QnA 服务和与之关联的资源。 如果邮件消失, 可以选择菜单栏中的响铃图标查看状态。 您还可以选择刀片式服务器顶部的 "**刷新**" 以刷新部署状态。

1. 通过在 VM 浏览器中打开https://www.qnamaker.ai/Create并滚动到**步骤 2**以连接到我们的 QnA 服务, 返回到**创建知识库**。

1. 在 " **microsoft Azure 目录 ID**" 下, 选择 " **microsoft 了解托管**"。

1. 从 " **Azure 订阅名称**" 下拉列表中选择 " **Microsoft 了解托管**"。

1. 在 " **Azure QnA 服务**" 下, 选择以前指定的 QnA 服务名称。 如果未列出任何服务, 则可能需要刷新页面。

1. 然后, 为知识库分配一个名称, 如 "Factbot 知识库"。

1. 您可以手动在 QnA Maker 知识库中输入问题和答案, 也可以从联机 faq 或本地文件中导入这些问题和答案。 受支持的格式包括以制表符分隔的文本文件、Microsoft Word 文档、Excel 电子表格和 PDF 文件。

    若要演示, https://github.com/MicrosoftDocs/mslearn-build-chat-bot-with-azure-bot-service/blob/master/Factbot.tsv.zip请在 VM 浏览器中打开, 然后下载**Factbot 的 .zip**文件。 此 zip 文件夹包含一个名为**Factbot**的文本文件。 提取文件并将其复制到您的计算机。 然后, 在 VM 浏览器中的 QnA Maker 门户中向下滚动, 选择 " **+ 添加文件**", 然后选择 " **Factbot**"。 此文件包含20个问题以及以制表符分隔的格式的答案。

1. 选择 "在页面底部**创建您的 KB** ", 并等待创建知识库。 需要的时间不应超过一分钟。

1. 确认从**Factbot**导入的问题和答案显示在知识库中。 然后, 选择 "**保存并训练**并等待培训完成"。

    ![显示加载的知识库数据的 Factbot 知识库网站的屏幕截图。](../media/3-save-and-train.png)

1. 选择 "**保存并定型**" 按钮右侧的 "**测试**" 按钮。 在消息框中键入 "Hi", 然后按**enter**。 确认响应为 "欢迎使用 QnA Factbot,", 如下所示。

    ![与所创建的聊天机器人进行的测试交互的屏幕截图。](../media/3-test-kb.png)

1. 键入 "哪些简介册已售出最多副本？" 到消息框中, 然后按**enter**。 响应是什么？

1. 再次选择 "**测试**" 按钮以折叠测试面板。 
1. 在页面顶部的菜单中选择 "**发布**", 然后选择页面底部的 "**发布**" 按钮以发布知识库。 *发布*功能使知识库在 HTTPS 终结点上可用。

等待发布过程完成并确认 QnA 服务已部署。 知识库现在托管在自己的 Azure web 应用中, 下一步是部署可使用它的 bot。
