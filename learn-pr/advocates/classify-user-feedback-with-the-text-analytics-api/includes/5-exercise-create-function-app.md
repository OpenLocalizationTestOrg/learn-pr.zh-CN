 函数应用程序提供用于管理和执行函数的上下文。 让我们创建一个函数应用程序, 然后向其添加函数。

## <a name="create-a-function-app-to-host-our-function"></a>创建函数应用程序以承载我们的函数

1. 使用与激活沙盒时相同的帐户登录[Azure 门户](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true)。

1. 选择 "**创建资源**" 按钮 (位于 Azure 门户的左上角), 然后选择 "**计算** > **无服务器函数应用**"。

1. 输入下表中指定的 "函数应用设置"。

    | 设置      | 值  | 说明                                        |
    | ------------ |  ------- | -------------------------------------------------- |
    | **应用名称** | 全局唯一名称 | 标识新的函数应用程序的名称。 有效的字符`a-z`为`0-9`、和`-`。  |
    | **订购** | **Concierge 订阅** | 在其下创建此新的函数应用程序的订阅。 |
    | **资源组**|  **<rgn>[沙盒资源组名称]</rgn>** | 要在其中创建函数应用程序的资源组的名称。<br/><br/>请确保选择 "**使用现有**", 并使用上一个练习中的资源组。 这样, 我们在此模块中进行的所有资源都将保留在一起。 |
    | **OS** | Windows | 承载函数应用程序的操作系统。  |
    | **托管计划** |   消耗量计划 | 定义如何将资源分配给函数应用程序的托管计划。 在默认**消耗计划**中, 资源是根据所需的函数动态添加的。 在此[无服务器](https://azure.microsoft.com/overview/serverless-computing/)托管中, 只需支付函数运行时间。   |
    | **Location** | 选择以前使用过的相同位置。 | 在你或附近的其他服务中选择你的函数访问权限附近或附近的区域。<br/><br/>选择在上一练习中创建文本分析 API 帐户时使用的相同区域。 |
    | **运行时堆栈** | JavaScript | 此模块中的示例代码是用 JavaScript 编写的。  |
    | **Storage** |  全局唯一名称 |  您的函数应用程序使用的新存储帐户的名称。 存储帐户名称的长度必须介于3到24个字符之间, 并且可以仅包含数字和小写字母。 此对话框使用唯一名称填充字段, 该名称派生自您赋予应用程序的名称。 但是, 可以随意使用其他名称, 甚至可以使用现有帐户。 |

1. 选择 "**创建**" 以设置和部署函数应用。

1. 选择门户右上角的通知图标, 并查看**正在进行的部署**消息。

1. 部署可能需要一些时间。 因此, 请停留在通知中心并观看 "**部署成功**" 消息。

1. 部署函数应用后, 请转到门户中的**所有资源**。 将使用 type **app Service**列出函数应用程序, 并为其赋予名称。 在列表中选择函数应用程序以将其打开。

    !! 您已创建并部署了函数应用程序。

> [!TIP]
> 在门户中查找您的函数应用程序时遇到问题？ 尝试[将 Function 应用添加到 Azure 门户中的收藏夹](https://docs.microsoft.com/azure/azure-functions/functions-how-to-use-azure-function-app-settings#favorite)。

## <a name="create-a-function-to-execute-our-logic"></a>创建用于执行逻辑的函数

现在我们有了函数应用程序, 现在是时候创建函数了。 通过触发器激活函数。 在本模块中, 我们将使用队列触发器。 运行时将轮询队列, 并启动此函数以处理新邮件。

1. 选择 "函数"**+** 旁边的 "添加****" () 按钮。 此操作将启动函数创建过程。

1. 在 "**适用于 JavaScript 的 Azure 函数-入门**" 页上, 选择 "**在门户中**", 然后选择 "**继续**"。

1. 在 "**创建函数**" 步骤中, 选择 "**更多模板 ...** ", 然后选择 "完成", 然后单击 "**查看模板**"。

1. 在可用于此函数应用程序的所有模板的列表中, 选择 "**队列触发器**"。

1. 如果您看到一条消息, 指出**未安装扩展**, 请选择 "**安装**"。 依赖项安装可能需要几分钟时间, 因此请耐心等待。 等待安装完成, 然后再继续。

1. 在出现的 "**新建函数**" 对话框中, 输入以下值。

    |属性  |值  |
    |---------|---------|
    |名称     |   **发现-看法-函数**      |
    |队列名称     |   **新-反馈-q**      |
    |存储帐户连接        |  **AzureWebJobsStorage**       |

1. 选择 "**创建**" 以开始函数创建过程。

1. 使用队列触发器函数模板, 以所选的语言创建函数。 虽然我们将在本模块的 JavaScript 中实施函数, 但你可以使用任何支持的[语言](https://docs.microsoft.com/azure/azure-functions/supported-languages)创建函数。

创建过程完成后, 代码编辑器将在门户中打开并加载*索引 .js*页。 此文件是编写函数逻辑的代码文件。

## <a name="try-it-out"></a>试用

让我们测试到目前为止的内容。 我们尚未编写任何代码, 因此此测试可确保运行我们目前配置的内容。

1. 在代码编辑器的顶部, 单击 "**运行**"。

1. 查看屏幕底部打开的 "**日志**" 选项卡。 如果一切按计划工作, 您将看到类似于以下消息的消息。
    ![对我们的函数的成功调用的响应消息的屏幕截图。](../media/func-default-run.PNG)

    "**运行**" 按钮启动了函数并传递了*示例队列数据*, "**测试**请求" 窗口中的默认文本为函数。

工作愉快! 您已成功向您的函数应用程序添加了队列触发的函数并进行了测试, 以确保它按预期工作! 在下一个练习中, 我们将向函数中添加更多功能。

让我们简单了解一下函数的其他文件 (即*函数 json*配置文件)。 此文件中的配置数据显示在以下 JSON 列表中。

```json
{
  "bindings": [
    {
      "name": "myQueueItem",
      "type": "queueTrigger",
      "direction": "in",
      "queueName": "new-feedback-q",
      "connection": "AzureWebJobsDashboard"
    }
  ],
  "disabled": false
}
```

您可以看到, 此函数具有一个名为**myQueueItem**的触发器绑定`queueTrigger`。 当新邮件到达队列时, 我们已命名为 "**新反馈-q**", 我们的函数称为 "我们的函数"。 我们通过 myQueueItem 绑定参数引用新邮件。 绑定实际上确实会为我们解决一些繁重的情况!

在下一步中, 我们将添加代码以调用文本分析 API 服务。

> [!TIP]
> 通过展开 Azure 门户中 "函数" 面板右侧的 "**查看文件**" 菜单, 可以看到 index .js 和函数 json。

此练习的功能是, 将我们的 Azure 函数基础结构设置到位。 我们有一个在函数应用程序中托管的工作函数, 在新邮件到达我们已命名[!INCLUDE [input-q](./q-name-input.md)]的队列中时运行。 当我们添加代码以调用 Azure 认知服务进行看法分析时, 我们将从下一个练习开始使用真正的趣味。