在您的新作业的第一周中, 您已经了解了贵公司的 Azure 订阅中的现有资源。 有许多资源组包含许多不同的资源, 但它们不会组织到连贯的结构中。 你以前在 Azure 上工作过, 但不能完全确定资源组的工作方式及其角色。 你已猜到 (正确), 他们可以在组织资源的方式中发挥作用。 我们来看看它们是什么, 以及如何使用它们。

> [!NOTE]
> 对于此模块, 你可以使用自己的订阅进行跟踪。 我们将使用没有成本相关联的资源, 因此试用订阅或你已有权访问的订阅将在以下练习中有效。

[!INCLUDE [azure-free-trial-note](../../../includes/azure-free-trial-note.md)]

## <a name="what-are-resource-groups"></a>什么是资源组？

资源组是 Azure 平台的基本元素。 资源组是在 Azure 上部署的资源的逻辑容器。 这些资源是您在 Azure 订阅中创建的任何内容: 虚拟机、应用程序网关、CosmosDB 实例等。所有资源必须驻留在资源组中, 并且资源只能是单个资源组的成员。 可以随时在资源组之间移动资源。 资源组不能嵌套。 在设置任何资源之前, 需要有一个资源组来将其放入。

### <a name="logical-grouping"></a>逻辑分组

有资源组可帮助管理和组织 Azure 资源。 通过放置类似使用、类型或位置的资源, 您可以为您在 Azure 上创建的资源提供一些订单和组织。 逻辑分组是我们最关注的方面, 因为我们的资源中有很多 disorder。

![显示包含函数、虚拟机、数据库和应用程序的资源组框的概念性图像](../media/2-rg.PNG)

### <a name="life-cycle"></a>生命周期

如果删除资源组, 则中包含的所有资源也将被删除。 按生命周期组织资源在非生产环境中非常有用, 在这种情况下, 您可能会尝试进行实验, 但在完成时将对其进行处置。 资源组使您可以轻松地一次删除一组资源。

### <a name="authorization"></a>批准

资源组也是应用基于角色的访问控制 (RBAC) 权限的作用域。 通过将 RBAC 权限应用到资源组, 您可以轻松地进行管理和限制访问, 仅允许执行所需的操作。

## <a name="create-a-resource-group"></a>创建资源组

可以使用以下方法创建资源组:

- Azure 门户
- Azure PowerShell
- Azure CLI
- Templates
- Azure sdk (.net、Java 等)

我们来演练一下在 Azure 门户中创建资源组需要执行的步骤。 如果你想要在自己的订阅中跟进, 你可能会。

1. 打开 web 浏览器并登录到[Azure 门户](https://portal.azure.com/?azure-portal=true)。

    > [!IMPORTANT]
    > 请务必使用_自己_的订阅。 在免费沙盒环境中时, 将不允许您创建资源组。 你可以通过查看你的个人资料图片下的租户名称来判断你是哪种订阅。 您可以通过单击您的个人资料图片并从 "选项" 菜单中选择 "**切换目录**" 来切换租户。

1. 在左侧边栏中, 选择 " **+ 创建资源**"

1. 在搜索框中键入**资源组**, 然后按 Enter。

1. 列表中的第一项应为资源组资源。 选择该按钮, 然后单击 "**创建**" 按钮。

    ![搜索结果搜索新资源组的市场](../media/2-create-search-resource-group.png)

1. 输入您的资源组名称, 让我们使用**msftlearn-rg-rg**。 选择它应驻留在其中的订阅, 并选择资源组的区域。 单击 "**审阅 + 创建**" **** , 然后单击 "创建" 以创建资源组。

    ![填写创建资源组所需的字段](../media/2-create-resource-group.png)

就是这样, 您已经创建了一个资源组, 您现在可以在部署 Azure 资源时使用它。 让我们更仔细地看一下刚刚创建的资源组和需要考虑的一些重要事项。

## <a name="explore-a-resource-group-and-add-a-resource"></a>浏览资源组并添加资源

在门户中, 选择 "左" 菜单上的 "**资源组**", 然后选择您新创建的资源组。

![资源组的概述面板](../media/2-rg-overview.png)

在概述面板中, 我们可以看到有关资源组的基本信息, 例如它所在的订阅、订阅 ID、应用的任何标记以及对此资源组的部署历史记录。 我们将在下一个单元中介绍标签。 "部署" 链接将转到新的面板, 在其中可以查看此资源组的所有部署的历史记录。 无论何时创建资源, 它都是一个部署, 您可以在此处看到资源组的历史记录。

在顶部, 您可以添加更多资源、更改列表中的列、将资源组移动到其他订阅或将其完全删除。

在左侧菜单中, 有许多选项

此资源组中尚未包含任何资源, 因此底部的列表为空。 让我们在资源组中创建几个资源。

1. 单击顶部的 " **+ 添加**" 或单击 "**创建资源**" 即可工作。 这将显示一个包含市场的面板。

1. 搜索**虚拟网络**。 第一个结果应为虚拟网络资源。 单击它, 然后在随后的屏幕上, 确保选择 "将**部署模型**设置为**资源管理器**", 然后单击 "**创建**"。

1. 将虚拟网络命名为**msftlearn-vnet1**。 对于 "**资源组**" 下拉箭头, 选择您之前创建的资源组。 为 "**地址空间**" 和 "子网地址"**范围**输入**192.168.0.0/24** 。 保留所有其他选项的默认值, 然后单击 "**创建**"。

1. 再次重复这些步骤, 以创建一个以上的 VNet。 将其命名为**msftlearn-vnet2**, 并确保将其放在之前创建的资源组中。

1. 返回到资源组, 并在**概述**面板上看到您创建的两个 vnet。

    ![显示 VNet 的资源组的概述面板](../media/2-rg-with-vnet.png)

现在, 资源组包含两个虚拟网络资源, 因为我们在部署 (创建资源时) 中指定了要将 VNet 放入哪个资源组。 我们可以在此资源组中创建其他资源, 也可以在订阅中创建其他资源组, 以便将资源部署到中。

创建资源时, 通常可以选择创建新的资源组作为使用现有资源组的替代方法。 这样可以简化过程, 但在新组织中看到的会导致资源分布在资源组中, 并不考虑如何对其进行组织。

## <a name="use-resource-groups-for-organization"></a>使用组织的资源组

那么, 如何使用资源组来帮助您在新组织中发挥优势？ 有一些准则和最佳做法可帮助组织。

### <a name="consistent-naming-convention"></a>一致的命名约定

您可以使用易于理解的命名约定开始。 我们名为 resource group **msftlearn-core-rg**。 我们提供了一些指示用于 (**msftlearn**) 的内容、包含在 (**核心基础结构**中) 的资源类型, 以及它本身的资源类型 (**rg**)。 此描述性名称为我们提供了更好的想法。 如果我们已将其命名为 **"我的资源-组**" 或 " **rg1**", 我们将不知道使用情况可能在什么情况下。 在这种情况下, 我们可以推断出可能包含在中的基础结构的核心部分。 如果我们创建了其他 vnet、存储帐户或其他资源, 则公司可能会考虑_核心基础结构_。我们也可以将它们放在这里, 从而改进我们的资源的组织。 命名约定可能在公司之间甚至在公司之间变化很大, 但很少的规划可能会有所帮助。

### <a name="organizing-principles"></a>组织原则

可以通过多种方式组织资源组, 我们来看看几个示例。 在我们的示例中, 我们可能将所有被认为_核心基础结构_的资源都放入此资源组中, 但我们也可以严格按资源类型对它们进行组织, 将所有 vnet 放在一个资源组中, 将所有存储帐户放入另一个资源组中, 所有此外, 其他资源组中的实例等。

![按类型组织的资源的图像](../media/2-resource-type-rg.png)

我们可以按环境 (生产、测试、开发) 对其进行组织。 在这种情况下, 所有生产资源都在一个资源组中, 所有测试资源都在另一个资源组中, 依此类推。

![按环境组织的资源的图像](../media/2-environment-rg.png)

我们可以按部门 (市场营销、财务、人力资源) 组织这些资源。 市场营销资源进入一个资源组、另一个资源组中的财务和第三个资源组中的 HR。

![按部门组织的资源的图像](../media/2-department-rg.png)

在这种情况下, 我们甚至可以结合使用、按环境和部门进行组织。 生产财务资源位于一个资源组中, 另一个位于另一个资源组中, 并且在市场营销资源上是相同的。

![按环境和部门组织的资源的图像](../media/2-env-dept-rg.png)

有几个因素可用于组织资源的策略: 授权、资源生命周期和帐单。

#### <a name="organizing-for-authorization"></a>组织以进行授权

由于资源组是 RBAC 的作用域, 因此您可以根据需要管理资源的_人员_来组织资源。 如果您的数据库管理团队负责管理所有 Azure SQL 数据库实例, 则将它们放在同一资源组中会简化管理, 因为您可以为他们提供资源组级别管理的适当权限资源组中的数据库。 同样, 可以拒绝数据库管理团队对具有虚拟网络的资源组的访问权限, 因此他们不会在不小心的情况下对资源进行更改, 从而不会在责任范围之外对资源进行更改。

#### <a name="organizing-for-life-cycle"></a>对生命周期进行整理

如前所述, 资源组在中充当资源的生命周期, 删除资源组将删除中包含的所有资源。 将其用于您的优势, 尤其是在资源更可处置的领域, 如非生产环境。 如果您部署的10个服务器的项目仅有几个月, 则当您将其清除时, 如果将其全部放在单个资源组中, 而不是10个或更多的资源组, 则会更易于清理。

#### <a name="organizing-for-billing"></a>组织以进行计费

最后, 将资源放在同一资源组中是一种将它们分组以在帐单报告中使用的方法。 如果您尝试了解成本在 Azure 环境中的分布方式, 则按资源组对数据进行分组是一种方法, 用于对数据进行筛选和排序, 以便更好地了解成本分配的位置。

## <a name="summary"></a>摘要

关键是, 您可以灵活地组织资源组中的资源。 将一些想法放入其中, 以便您可以使用您在 Azure 环境中使用资源组的一致方法。
