现已准备好开始实施温度服务。 在上一个单元中, 您确定一个无服务器解决方案最适合您的需求。 首先, 创建一个用于保存 Azure 函数的 function 应用程序。

[!include[](../../../includes/azure-sandbox-activate.md)]

## <a name="what-is-a-function-app"></a>什么是函数应用？

函数托管在称为 "**函数应用**" 的执行上下文中。 您可以定义函数应用程序以逻辑方式分组和构造 Azure 中的函数和计算资源。 在电梯内示例中, 您将创建一个函数应用程序来托管自动扶梯驱动器的齿轮温度服务。 创建函数应用程序需要做出几个决策;您需要选择一个服务计划并选择一个兼容的存储帐户。

### <a name="choosing-a-service-plan"></a>选择服务计划

函数应用程序可以使用两种类型的服务计划之一。 第一个服务计划是 "**消费服务计划**"。 这是您在使用 Azure 无服务器应用程序平台时选择的计划。 在运行函数时, 使用情况服务计划可提供自动缩放和帐单。 消耗量计划带有一个可配置的超时周期来执行函数。 默认情况下, 它是5分钟, 但可能配置为长达10分钟的超时。

第二个计划称为**Azure 应用服务计划**。 通过此计划, 您可以通过在您定义的 VM 上连续运行您的函数来避免超时时间。 使用应用服务计划时, 您将负责管理运行该函数的应用资源, 因此这在技术上不是无服务器计划。 但是, 如果您的函数持续使用, 或者您的函数需要的处理能力或执行时间超过了消耗计划可以提供的能力, 则可能是更好的选择。

### <a name="storage-account-requirements"></a>存储帐户要求

创建函数应用程序时, 它必须链接到存储帐户。 您可以选择一个现有帐户或创建一个新帐户。 函数应用程序将此存储帐户用于内部操作, 如日志记录功能执行和管理执行触发器。 在消费服务计划中, 它也是存储函数代码和配置文件的位置。

## <a name="create-a-function-app"></a>创建函数应用程序

让我们在 Azure 门户中创建一个函数应用程序。

1. 使用与激活沙盒时相同的帐户登录[Azure 门户](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true)。

1. 选择 "**创建资源**" 按钮 (位于 Azure 门户的左上角), 然后选择 "**获取已启动的 > 无服务器的函数应用程序**" 以打开 "函数应用*创建*" 边栏选项卡。 或者, 也可以使用**Compute > Function App**选项, 该选项将打开相同的刀片。

  ![显示 "使用计算" 部分创建资源边栏和 "函数" 应用程序的 Azure 门户屏幕截图。](../media/3-create-function-app-blade.png)

1. 选择全局唯一的应用程序名称。 这将用作服务的基 URL。 例如, 可以将 xxxxxxx 命名为 "自动**扶梯-功能**", 其中, 可以将 x 替换为您的缩写和出生年份。 如果这不是全局唯一的, 则可以尝试其他任何组合。 有效字符为 a-z、0-9 和-。

1. 选择您希望在其中托管函数应用程序的 Azure 订阅。

1. 选择名为 "**<rgn>[沙盒资源组名称]</rgn>**" 的现有资源组。

1. 选择 "操作系统**Windows** "。

1. 对于 "**托管计划**", 选择 "**消耗计划**", 即 "无服务器托管" 选项。

1. 从下面的列表中选择离你最近的地理位置。 在生产系统中, 您可能要选择靠近客户或功能使用者的位置。

    [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]

1. 对于**运行时堆栈**, 从下拉列表中选择 "JavaScript", 这是我们在本练习中实现函数示例所采用的语言。

1. 创建新的存储帐户。 Azure 将根据应用名称为其指定名称。 您可以根据需要更改它, 但它还必须是唯一的。

1. 确保 Azure application Insights 已**打开**, 并选择最接近你 (或你的客户) 的区域。

1. 选择 "**创建**";部署需要几分钟时间。 完成后, 你将收到通知。

## <a name="verify-your-azure-function-app"></a>验证 Azure 函数应用

1. 从 Azure 门户左侧菜单中, 选择 "**资源组**"。 然后, 您应该会在可用组列表中看到一个名为**<rgn>[沙盒资源组名称]</rgn>** 的资源组。

    ![显示具有 "资源组" 菜单项和 <rgn> [沙盒资源组名称] </rgn> 列表项突出显示的资源组边栏的 Azure 门户的屏幕截图。](../media/3-resource-group.png)

1. 选择 "资源组**<rgn>[沙盒资源组名称]</rgn>**"。 然后, 您应该会看到如下列表所示的资源列表。

    ![显示 <rgn> [沙盒资源组名称] </rgn> 组中的所有资源的 Azure 门户屏幕截图, 其中包括应用服务计划、存储帐户、application Insights 资源和应用服务的条目。](../media/3-resource-list.png)

带有闪电形函数图标 (作为应用服务列出) 的项是新的函数应用程序。 您可以单击它打开有关新函数的详细信息-它已分配了一个公用 URL, 如果您在浏览器中打开该功能, 则应获取一个指示您的函数应用程序正在运行的默认网页。
