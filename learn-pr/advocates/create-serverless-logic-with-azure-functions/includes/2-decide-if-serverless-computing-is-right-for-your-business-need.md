为了帮助确定无服务器计算是否适合您, 我们首先要了解什么是无服务器的。

## <a name="what-is-serverless-compute"></a>什么是无服务器计算？

无服务器计算可视为服务 (FaaS) 或云平台上承载的 microservice 的功能。 您的业务逻辑作为函数运行, 无需手动设置或扩展基础结构。 云提供程序管理基础结构。 您的应用程序将根据负载自动缩小或停机。 Azure 有几种生成此类体系结构的方法。 两种最常见的方法是 azure 逻辑应用和 azure 函数, 我们将重点放在本模块中。

## <a name="what-is-azure-functions"></a>什么是 Azure 函数？

Azure 函数是一个无服务器应用程序平台。 它使开发人员能够在不设置基础结构的情况下托管可执行的业务逻辑。 函数提供了固有的可伸缩性, 仅对所使用的资源计费。 您可以编写您选择的语言的函数代码, 包括 c #、F # 和 JavaScript。 此外, 还包括对 NuGet 和 NPM 的支持, 因此您可以在业务逻辑中使用常用库。

## <a name="benefits-of-a-serverless-compute-solution"></a>无服务器计算解决方案的好处

无服务器计算是在云中托管业务逻辑代码的一个极好的选择。 使用 Azure 函数等无服务器产品, 您可以使用您选择的语言编写业务逻辑。 您可以进行自动缩放, 无需管理服务器, 而是根据所使用的内容收费, 而不是保留时间。 下面是可供您考虑的无服务器解决方案的一些附加特征。

### <a name="avoids-over-allocation-of-infrastructure"></a>避免基础结构的过度分配

假设您已设置了 VM 服务器, 并配置了足够的资源来处理峰值负载时间。 当负载较亮时, 您可能会为未使用的基础结构付费。 无服务器计算可通过自动向上或向下扩展来解决分配问题, 并且只有在函数处理工作时才会向您收取费用。

### <a name="stateless-logic"></a>无状态逻辑

无状态函数是无服务器计算的理想候选项;根据需要创建和销毁函数实例。 如果 state 是必需的, 则可以将其存储在关联的存储服务中。

### <a name="event-driven"></a>事件驱动

函数是_事件驱动_的。 这意味着它们仅在响应事件 (称为 "触发器") 时运行, 例如接收 HTTP 请求或添加到队列中的邮件。 将触发器配置为函数定义的一部分。 此方法使您可以声明数据来自何处 (触发器/输入绑定) 及其转到的位置 (输出绑定), 从而简化了代码。 您无需编写代码来监视队列、blob、集线器等。您可以完全专注于业务逻辑。

### <a name="functions-can-be-used-in-traditional-compute-environments"></a>函数可在传统计算环境中使用

函数是无服务器计算的关键组件, 但它们也是用于执行任何类型的代码的常规计算平台。 如果应用程序的需要发生变化, 则可以获取项目并将其部署到非无服务器环境中, 这使您可以灵活地管理扩展、在虚拟网络上运行, 甚至完全隔离您的功能。

## <a name="drawbacks-of-a-serverless-compute-solution"></a>无服务器计算解决方案的缺点

无服务器计算在托管业务逻辑时不一定是合适的解决方案。 下面列出了一些函数特征, 这些特征可能会影响您在无服务器计算中托管服务的决策。

### <a name="execution-time"></a>执行时间

默认情况下, 函数的超时值为5分钟。 此超时可配置为最多10分钟。 如果您的函数需要10分钟以上才能执行, 则可以将其托管在 VM 上。 此外, 如果您的服务是通过 HTTP 请求启动的, 并且您认为该值为 http 响应, 则超时将进一步限制为2.5 分钟。 最后, 还提供了一个称为 "**耐用函数**" 的选项, 使您能够在不超时的情况下安排多个函数的执行。

### <a name="execution-frequency"></a>执行频率

第二个特征是执行频率。 如果您希望您的函数连续由多个客户端执行, 则应谨慎估计使用情况并计算使用函数的成本。 将服务托管在 VM 上可能会更便宜。

在缩放时, 每10秒只能创建一个 function 应用程序实例, 最多可创建200个实例。 请记住, 每个实例都可以服务多个并发执行, 因此, 对于单个实例可以处理多少流量, 不会对流量设置限制。 不同类型的触发器具有不同的缩放要求, 因此, 请研究您选择的触发器并调查其限制。
