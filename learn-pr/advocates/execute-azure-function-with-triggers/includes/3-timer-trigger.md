<span data-ttu-id="391eb-101">在设定的时间间隔内执行一条逻辑是很常见的。</span><span class="sxs-lookup"><span data-stu-id="391eb-101">It's common to execute a piece of logic at a set interval.</span></span> <span data-ttu-id="391eb-102">假设你是博客所有者, 并注意你的订阅者不会阅读你最近的帖子。</span><span class="sxs-lookup"><span data-stu-id="391eb-102">Imagine you're a blog owner and you notice that your subscribers aren't reading your most recent posts.</span></span> <span data-ttu-id="391eb-103">您决定最佳操作是一周发送一封电子邮件, 提醒他们检查您的博客。</span><span class="sxs-lookup"><span data-stu-id="391eb-103">You decide that the best action is to send an email once a week to remind them to check your blog.</span></span> <span data-ttu-id="391eb-104">您可以使用具有_timer 触发器_的 Azure function 应用程序每周调用您的函数来实现此逻辑。</span><span class="sxs-lookup"><span data-stu-id="391eb-104">You implement this logic using an Azure function app with a _timer trigger_ to invoke your function weekly.</span></span>

## <a name="what-is-a-timer-trigger"></a><span data-ttu-id="391eb-105">什么是计时器触发器？</span><span class="sxs-lookup"><span data-stu-id="391eb-105">What is a timer trigger?</span></span>

<span data-ttu-id="391eb-106">计时器触发器是一种以一致的间隔执行函数的触发器。</span><span class="sxs-lookup"><span data-stu-id="391eb-106">A timer trigger is a trigger that executes a function at a consistent interval.</span></span> <span data-ttu-id="391eb-107">若要创建计时器触发器, 需要提供两条信息。</span><span class="sxs-lookup"><span data-stu-id="391eb-107">To create a timer trigger, you need to supply two pieces of information.</span></span>

1. <span data-ttu-id="391eb-108">*时间戳参数名称*, 只是在代码中访问触发器的标识符。</span><span class="sxs-lookup"><span data-stu-id="391eb-108">A *Timestamp parameter name*, which is simply an identifier to access the trigger in code.</span></span>
2. <span data-ttu-id="391eb-109">*计划*, 它是设置计时器间隔的 CRON 表达式。</span><span class="sxs-lookup"><span data-stu-id="391eb-109">A *Schedule*, which is a CRON expression that sets the interval for the timer.</span></span>

## <a name="what-is-a-cron-expression"></a><span data-ttu-id="391eb-110">什么是 CRON 表达式？</span><span class="sxs-lookup"><span data-stu-id="391eb-110">What is a CRON expression?</span></span>

<span data-ttu-id="391eb-111">*CRON 表达式*是一个由表示一组时间的六个字段组成的字符串。</span><span class="sxs-lookup"><span data-stu-id="391eb-111">A *CRON expression* is a string that consists of six fields that represent a set of times.</span></span>

<span data-ttu-id="391eb-112">Azure 中的六个字段的顺序为: `{second} {minute} {hour} {day} {month} {day of the week}`。</span><span class="sxs-lookup"><span data-stu-id="391eb-112">The order of the six fields in Azure is: `{second} {minute} {hour} {day} {month} {day of the week}`.</span></span>

<span data-ttu-id="391eb-113">例如, 一个用于创建每五分钟执行的触发器的 CRON 表达式如下所示:</span><span class="sxs-lookup"><span data-stu-id="391eb-113">For example, a CRON expression to create a trigger that executes every five minutes looks like:</span></span>

```log
0 */5 * * * *
```

<span data-ttu-id="391eb-114">最初, 此字符串看起来可能令人困惑。</span><span class="sxs-lookup"><span data-stu-id="391eb-114">At first, this string may look confusing.</span></span> <span data-ttu-id="391eb-115">当我们深入了解 CRON 表达式时, 我们将返回并分解这些概念。</span><span class="sxs-lookup"><span data-stu-id="391eb-115">We'll come back and break down these concepts when we have a deeper look at CRON expressions.</span></span>

<span data-ttu-id="391eb-116">若要构建 CRON 表达式, 您需要对某些特殊字符有一个基本的了解。</span><span class="sxs-lookup"><span data-stu-id="391eb-116">To build a CRON expression, you need to have a basic understanding of some of the special characters.</span></span>

| <span data-ttu-id="391eb-117">特殊字符</span><span class="sxs-lookup"><span data-stu-id="391eb-117">Special character</span></span> | <span data-ttu-id="391eb-118">含义</span><span class="sxs-lookup"><span data-stu-id="391eb-118">Meaning</span></span> | <span data-ttu-id="391eb-119">示例</span><span class="sxs-lookup"><span data-stu-id="391eb-119">Example</span></span> |
| ------------- | ------------- | ------------- |
| *      | <span data-ttu-id="391eb-120">选择字段中的每个值</span><span class="sxs-lookup"><span data-stu-id="391eb-120">Selects every value in a field</span></span> | <span data-ttu-id="391eb-121">星期字段中的星号 "\*" 表示每天。 \*\*</span><span class="sxs-lookup"><span data-stu-id="391eb-121">An asterisk "\*" in the day of the week field means *every* day.</span></span> |
| <span data-ttu-id="391eb-122">,</span><span class="sxs-lookup"><span data-stu-id="391eb-122"></span></span>      | <span data-ttu-id="391eb-123">分隔列表中的项</span><span class="sxs-lookup"><span data-stu-id="391eb-123">Separates items in a list</span></span> | <span data-ttu-id="391eb-124">星期字段中的逗号 "1, 3" 表示只是星期一 (day 1) 和星期三 (day 3)。</span><span class="sxs-lookup"><span data-stu-id="391eb-124">A comma "1,3" in the day of the week field means just Mondays (day 1) and Wednesdays (day 3).</span></span> |
| -      | <span data-ttu-id="391eb-125">指定一个范围</span><span class="sxs-lookup"><span data-stu-id="391eb-125">Specifies a range</span></span> | <span data-ttu-id="391eb-126">"小时" 字段中的连字符 "10-12" 表示包含小时10、11和12的范围。</span><span class="sxs-lookup"><span data-stu-id="391eb-126">A hyphen "10-12" in the hour field means a range that includes the hours 10, 11, and 12.</span></span> |
| /      | <span data-ttu-id="391eb-127">指定增量</span><span class="sxs-lookup"><span data-stu-id="391eb-127">Specifies an increment</span></span> | <span data-ttu-id="391eb-128">分钟字段中的斜杠 "\*/10" 意味着每10分钟增加一次。</span><span class="sxs-lookup"><span data-stu-id="391eb-128">A slash "\*/10" in the minutes field means an increment of every 10 minutes.</span></span> |

<span data-ttu-id="391eb-129">现在, 我们将返回到原始的 CRON 表达式示例。</span><span class="sxs-lookup"><span data-stu-id="391eb-129">Now we'll go back to the original CRON expression example.</span></span> <span data-ttu-id="391eb-130">让我们尝试通过将其按字段细分来更好地理解它。</span><span class="sxs-lookup"><span data-stu-id="391eb-130">Let’s try to understand it better by breaking it down field by field.</span></span>

```log
0 */5 * * * *
```

<span data-ttu-id="391eb-131">**第一个字段**表示秒。</span><span class="sxs-lookup"><span data-stu-id="391eb-131">The **first field** represents seconds.</span></span> <span data-ttu-id="391eb-132">此字段支持值0-59。</span><span class="sxs-lookup"><span data-stu-id="391eb-132">This field supports the values 0-59.</span></span> <span data-ttu-id="391eb-133">由于字段包含零, 因此它选择第一个可能的值, 即一秒。</span><span class="sxs-lookup"><span data-stu-id="391eb-133">Because the field contains a zero, it selects the first possible value, which is one second.</span></span>

<span data-ttu-id="391eb-134">**第二个字段**表示分钟。</span><span class="sxs-lookup"><span data-stu-id="391eb-134">The **second field** represents minutes.</span></span> <span data-ttu-id="391eb-135">值 "\*/5" 包含两个特殊字符。</span><span class="sxs-lookup"><span data-stu-id="391eb-135">The value "\*/5" contains two special characters.</span></span> <span data-ttu-id="391eb-136">首先, 星号 (\*) 表示 "选择字段中的每个值"。</span><span class="sxs-lookup"><span data-stu-id="391eb-136">First, the asterisk (\*) means "select every value within the field."</span></span> <span data-ttu-id="391eb-137">由于此字段代表分钟数, 因此可能的值为0-59。</span><span class="sxs-lookup"><span data-stu-id="391eb-137">Because this field represents minutes, the possible values are 0-59.</span></span> <span data-ttu-id="391eb-138">第二个特殊字符是斜杠 (/), 它表示一个增量。</span><span class="sxs-lookup"><span data-stu-id="391eb-138">The second special character is the slash (/), which represents an increment.</span></span> <span data-ttu-id="391eb-139">将这些字符组合在一起时, 这意味着所有值 0-59, 选择第五个值。</span><span class="sxs-lookup"><span data-stu-id="391eb-139">When you combine these characters together, it means for all values 0-59, select every fifth value.</span></span> <span data-ttu-id="391eb-140">一种更简单的方法, 即 "每五分钟一次"。</span><span class="sxs-lookup"><span data-stu-id="391eb-140">An easier way to say that is simply "every five minutes."</span></span>

<span data-ttu-id="391eb-141">**其余的四个字段**分别表示小时、日、月和星期。</span><span class="sxs-lookup"><span data-stu-id="391eb-141">The **remaining four fields** represent the hour, day, month, and weekday of the week.</span></span> <span data-ttu-id="391eb-142">这些字段的星号表示选择每个可能的值。</span><span class="sxs-lookup"><span data-stu-id="391eb-142">An asterisk for these fields means to select every possible value.</span></span> <span data-ttu-id="391eb-143">在此示例中, 我们选择 "每月的每一小时"。</span><span class="sxs-lookup"><span data-stu-id="391eb-143">In this example, we select "every hour of every day of every month."</span></span>

<span data-ttu-id="391eb-144">将所有字段放在一起时, 表达式将读取为 "在第一秒内, 每隔五分钟一次, 每月的每个月的一天"。</span><span class="sxs-lookup"><span data-stu-id="391eb-144">When you put all the fields together, the expression is read as "on the first second, of every fifth minute of every hour, of every day, of every month".</span></span>

## <a name="how-to-create-a-timer-trigger"></a><span data-ttu-id="391eb-145">如何创建计时器触发器</span><span class="sxs-lookup"><span data-stu-id="391eb-145">How to create a timer trigger</span></span>

<span data-ttu-id="391eb-146">您可以在 Azure 门户中创建计时器触发器。</span><span class="sxs-lookup"><span data-stu-id="391eb-146">You can create a timer trigger in the Azure portal.</span></span> <span data-ttu-id="391eb-147">在 Azure 函数应用程序中, 从触发器模板列表中选择 "**计时器触发器**"。</span><span class="sxs-lookup"><span data-stu-id="391eb-147">In your Azure function app, select **timer trigger** from the list of trigger templates.</span></span> <span data-ttu-id="391eb-148">输入要执行的逻辑。</span><span class="sxs-lookup"><span data-stu-id="391eb-148">Enter the logic that you want to execute.</span></span> <span data-ttu-id="391eb-149">提供**时间戳参数名称**和**CRON 表达式**。</span><span class="sxs-lookup"><span data-stu-id="391eb-149">Supply a **Timestamp parameter name** and the **CRON expression**.</span></span>

<span data-ttu-id="391eb-150">在本模块中, 我们将重点介绍如何在门户中创建触发器, 但也可以使用 Core Tools、Visual Studio 或 VS 代码以编程方式创建触发器。</span><span class="sxs-lookup"><span data-stu-id="391eb-150">In this module we'll focus on creating triggers in the portal but you can also create triggers programmatically using Core Tools, Visual Studio or VS Code.</span></span>

<span data-ttu-id="391eb-151">计时器触发器按一致的计划调用 Azure function app。</span><span class="sxs-lookup"><span data-stu-id="391eb-151">A timer trigger invokes an Azure function app on a consistent schedule.</span></span> <span data-ttu-id="391eb-152">若要定义计时器触发器的日程安排, 我们构建了一个 CRON 表达式, 该表达式是一个代表一组时间的字符串。</span><span class="sxs-lookup"><span data-stu-id="391eb-152">To define the schedule for a timer trigger, we build a CRON expression, which is a string that represents a set of times.</span></span>