在设定的时间间隔内执行一条逻辑是很常见的。 假设你是博客所有者, 并注意你的订阅者不会阅读你最近的帖子。 您决定最佳操作是一周发送一封电子邮件, 提醒他们检查您的博客。 您可以使用具有_timer 触发器_的 Azure function 应用程序每周调用您的函数来实现此逻辑。

## <a name="what-is-a-timer-trigger"></a>什么是计时器触发器？

计时器触发器是一种以一致的间隔执行函数的触发器。 若要创建计时器触发器, 需要提供两条信息。

1. *时间戳参数名称*, 只是在代码中访问触发器的标识符。
2. *计划*, 它是设置计时器间隔的 CRON 表达式。

## <a name="what-is-a-cron-expression"></a>什么是 CRON 表达式？

*CRON 表达式*是一个由表示一组时间的六个字段组成的字符串。

Azure 中的六个字段的顺序为: `{second} {minute} {hour} {day} {month} {day of the week}`。

例如, 一个用于创建每五分钟执行的触发器的 CRON 表达式如下所示:

```log
0 */5 * * * *
```

最初, 此字符串看起来可能令人困惑。 当我们深入了解 CRON 表达式时, 我们将返回并分解这些概念。

若要构建 CRON 表达式, 您需要对某些特殊字符有一个基本的了解。

| 特殊字符 | 含义 | 示例 |
| ------------- | ------------- | ------------- |
| *      | 选择字段中的每个值 | 星期字段中的星号 "*" 表示每天。 ** |
| ,      | 分隔列表中的项 | 星期字段中的逗号 "1, 3" 表示只是星期一 (day 1) 和星期三 (day 3)。 |
| -      | 指定一个范围 | "小时" 字段中的连字符 "10-12" 表示包含小时10、11和12的范围。 |
| /      | 指定增量 | 分钟字段中的斜杠 "*/10" 意味着每10分钟增加一次。 |

现在, 我们将返回到原始的 CRON 表达式示例。 让我们尝试通过将其按字段细分来更好地理解它。

```log
0 */5 * * * *
```

**第一个字段**表示秒。 此字段支持值0-59。 由于字段包含零, 因此它选择第一个可能的值, 即一秒。

**第二个字段**表示分钟。 值 "*/5" 包含两个特殊字符。 首先, 星号 (\*) 表示 "选择字段中的每个值"。 由于此字段代表分钟数, 因此可能的值为0-59。 第二个特殊字符是斜杠 (/), 它表示一个增量。 将这些字符组合在一起时, 这意味着所有值 0-59, 选择第五个值。 一种更简单的方法, 即 "每五分钟一次"。

**其余的四个字段**分别表示小时、日、月和星期。 这些字段的星号表示选择每个可能的值。 在此示例中, 我们选择 "每月的每一小时"。

将所有字段放在一起时, 表达式将读取为 "在第一秒内, 每隔五分钟一次, 每月的每个月的一天"。

## <a name="how-to-create-a-timer-trigger"></a>如何创建计时器触发器

您可以在 Azure 门户中创建计时器触发器。 在 Azure 函数应用程序中, 从触发器模板列表中选择 "**计时器触发器**"。 输入要执行的逻辑。 提供**时间戳参数名称**和**CRON 表达式**。

在本模块中, 我们将重点介绍如何在门户中创建触发器, 但也可以使用 Core Tools、Visual Studio 或 VS 代码以编程方式创建触发器。

计时器触发器按一致的计划调用 Azure function app。 若要定义计时器触发器的日程安排, 我们构建了一个 CRON 表达式, 该表达式是一个代表一组时间的字符串。