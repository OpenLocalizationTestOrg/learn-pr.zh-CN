在此单元中, 我们将创建一个使用计时器触发器每隔20秒调用的 Azure function app。

[!include[](../../../includes/azure-sandbox-activate.md)]

## <a name="create-an-azure-function-app"></a>创建 Azure 函数应用

让我们先在门户中创建一个 Azure 函数应用程序。

1. 使用与激活沙盒时相同的帐户登录[Azure 门户](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true)。

1. 在左侧导航中, 选择 "**创建资源**"。

1. 选择 "**计算**"。

1. 查找并选择**函数应用**。 您还可以选择使用搜索栏来查找和创建新资源。

    ![显示 "创建资源" 边栏突出显示了 Function 应用程序的 Azure 门户屏幕截图。](../media/4-click-function-app.png)

1. 输入全局唯一的**应用程序名称**。

1. 选择**订阅**。

1. 选择 "现有**资源组** <rgn>[沙盒资源组名称]</rgn>"。

1. 选择 " **Windows** " 作为**操作系统**。

1. 为您的**托管计划**选择**消耗计划**。 使用消耗计划类型时, 将根据您的应用程序工作负载自动分配每个函数的执行费用, 并自动分配资源。

1. 从下面的 "可用" 列表中选择一个**位置**。

    [!include[](../../../includes/azure-sandbox-regions-first-mention-note-friendly.md)]

1. 对于**运行时堆栈**, 请将其保留为默认 *.net*, 这是我们在本练习中实现函数示例所采用的语言。

1. 创建新的**存储**帐户, 可以根据需要更改名称-它将默认为应用程序名称的变体。

1. 选择 "**创建**"。 部署函数应用后, 请转到门户中的**所有资源**。 将使用 type **app Service**列出函数应用程序, 并为其赋予名称。
 
## <a name="create-a-timer-trigger"></a>创建计时器触发器

现在, 我们要在函数中创建计时器触发器。

1. 选择 "函数"**+** 旁边的 "添加****" () 按钮。 此操作将启动函数创建过程。

1. 在 "**适用于 .net 的 Azure 函数-入门**" 页上, 选择 "**在门户中**", 然后选择 "**继续**"。

1. 在 "快速启动" 模板列表中, 选择 "**计时器**", 然后在屏幕底部选择 "**创建**"。

## <a name="configure-the-timer-trigger"></a>配置计时器触发器

我们有一个使用逻辑将消息打印到日志窗口的 Azure function app。 我们打算将计时器的日程安排设置为每隔20秒执行一次。

1. 选择 "**集成**"。

1. 在 "**计划**" 框中输入以下值:

    ```log
    */20 * * * * *
    ```

1. 选择 "**保存**"。

## <a name="test-the-timer"></a>测试计时器

现在我们已经配置了计时器, 它将按我们定义的间隔调用函数。

1. 选择 " **TimerTrigger1**"。

    > [!NOTE]
    > **TimerTrigger1**是默认名称。 当您创建触发器时, 它会自动选中。

1. 打开屏幕底部的**日志**面板。

1. 在日志窗口中观察新邮件每隔20秒到达一次。

1. 若要停止运行该函数, 请选择 "**管理**", 然后将 "**函数状态**" 切换为 "*已禁用*"。
