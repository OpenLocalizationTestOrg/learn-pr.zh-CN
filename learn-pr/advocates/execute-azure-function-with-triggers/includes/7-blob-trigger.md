<span data-ttu-id="24977-101">假设你是一只摄影师, 你有一个网站, 你可以在其中显示一天的照片。</span><span class="sxs-lookup"><span data-stu-id="24977-101">Imagine you're a photographer and you have a website where you display your pictures of the day.</span></span> <span data-ttu-id="24977-102">由于您正忙, 您没有一致的上载计划, 但您希望在上载图片时通知风扇。</span><span class="sxs-lookup"><span data-stu-id="24977-102">Because you're busy, you don't have a consistent upload schedule, but you want to notify your fans when you upload a picture.</span></span> <span data-ttu-id="24977-103">您决定创建一个 azure 函数, 以便在将图像上传到 Azure 存储 blob 容器时自动发送 twitter。</span><span class="sxs-lookup"><span data-stu-id="24977-103">You decide to create an Azure function to automatically send a tweet whenever you upload an image to your Azure Storage blob container.</span></span>

<span data-ttu-id="24977-104">在这里, 你将了解如何创建 blob 触发器并指示它监视 Azure 存储 blob 容器中的特定位置。</span><span class="sxs-lookup"><span data-stu-id="24977-104">Here, you learn how to create a blob trigger and instruct it to monitor a specific location in your Azure Storage blob container.</span></span>

## <a name="what-is-azure-storage"></a><span data-ttu-id="24977-105">什么是 Azure 存储？</span><span class="sxs-lookup"><span data-stu-id="24977-105">What is Azure Storage?</span></span>

<span data-ttu-id="24977-106">Azure 存储是 Microsoft 的云存储解决方案, 它支持所有类型的数据, 包括: blob、队列和 NoSQL。</span><span class="sxs-lookup"><span data-stu-id="24977-106">Azure Storage is Microsoft's cloud storage solution that supports all types of data, including: blobs, queues, and NoSQL.</span></span> <span data-ttu-id="24977-107">Azure 存储的目标是提供的数据存储:</span><span class="sxs-lookup"><span data-stu-id="24977-107">The goal of Azure Storage is to provide data storage that's:</span></span>

- <span data-ttu-id="24977-108">高可用性</span><span class="sxs-lookup"><span data-stu-id="24977-108">Highly available</span></span>
- <span data-ttu-id="24977-109">安全</span><span class="sxs-lookup"><span data-stu-id="24977-109">Secure</span></span>
- <span data-ttu-id="24977-110">可调</span><span class="sxs-lookup"><span data-stu-id="24977-110">Scalable</span></span>
- <span data-ttu-id="24977-111">托管</span><span class="sxs-lookup"><span data-stu-id="24977-111">Managed</span></span>

<span data-ttu-id="24977-112">我们不打算将重点放在 Azure 存储太多。</span><span class="sxs-lookup"><span data-stu-id="24977-112">We're not going to focus on Azure Storage too much.</span></span> <span data-ttu-id="24977-113">相反, 我们使用它来创建将触发函数运行的 blob。</span><span class="sxs-lookup"><span data-stu-id="24977-113">Instead, we use it to create blobs that will trigger our function to run.</span></span>

## <a name="what-is-azure-blob-storage"></a><span data-ttu-id="24977-114">什么是 Azure Blob 存储？</span><span class="sxs-lookup"><span data-stu-id="24977-114">What is Azure Blob storage?</span></span>

<span data-ttu-id="24977-115">Azure Blob 存储是一个用于存储大量非结构化数据的对象存储解决方案。</span><span class="sxs-lookup"><span data-stu-id="24977-115">Azure Blob storage is an object storage solution that's designed to store large amounts of unstructured data.</span></span> 

<span data-ttu-id="24977-116">例如, Azure Blob 存储在执行操作时非常有用:</span><span class="sxs-lookup"><span data-stu-id="24977-116">For example, Azure Blob storage is great at doing things like:</span></span>

- <span data-ttu-id="24977-117">存储文件</span><span class="sxs-lookup"><span data-stu-id="24977-117">Storing files</span></span>
- <span data-ttu-id="24977-118">服务文件</span><span class="sxs-lookup"><span data-stu-id="24977-118">Serving files</span></span>
- <span data-ttu-id="24977-119">流式处理视频和音频</span><span class="sxs-lookup"><span data-stu-id="24977-119">Streaming video and audio</span></span>
- <span data-ttu-id="24977-120">日志记录数据</span><span class="sxs-lookup"><span data-stu-id="24977-120">Logging data</span></span>

<span data-ttu-id="24977-121">有三种类型的 blob:**块 blob**、**附加 blob**和**页面 blob**。</span><span class="sxs-lookup"><span data-stu-id="24977-121">There are three types of blobs: **block blobs**, **append blobs**, and **page blobs**.</span></span> <span data-ttu-id="24977-122">块 blob 是最常见的类型。</span><span class="sxs-lookup"><span data-stu-id="24977-122">Block blobs are the most common type.</span></span> <span data-ttu-id="24977-123">它们允许您高效存储文本或二进制数据。</span><span class="sxs-lookup"><span data-stu-id="24977-123">They allow you to store text or binary data efficiently.</span></span> <span data-ttu-id="24977-124">append blob 与块 blob 类似, 但它们的设计更多的追加操作, 如创建不断更新的日志文件。</span><span class="sxs-lookup"><span data-stu-id="24977-124">Append blobs are like block blobs, but they're designed more for append operations like creating a log file that's being constantly updated.</span></span> <span data-ttu-id="24977-125">最后, 页面 blob 由页面组成, 旨在频繁进行随机读取和写入操作。</span><span class="sxs-lookup"><span data-stu-id="24977-125">Finally, page blobs are made up of pages and are designed for frequent random read and write operations.</span></span>

## <a name="what-is-a-blob-trigger"></a><span data-ttu-id="24977-126">什么是 blob 触发器？</span><span class="sxs-lookup"><span data-stu-id="24977-126">What is a blob trigger?</span></span>

<span data-ttu-id="24977-127">blob 触发器是在 Azure blob 存储中上传或更新文件时执行函数的触发器。</span><span class="sxs-lookup"><span data-stu-id="24977-127">A blob trigger is a trigger that executes a function when a file is uploaded or updated in Azure Blob storage.</span></span> <span data-ttu-id="24977-128">若要创建 blob 触发器, 请创建 Azure 存储帐户并提供触发器监视的位置。</span><span class="sxs-lookup"><span data-stu-id="24977-128">To create a blob trigger, you create an Azure Storage account and provide a location that the trigger monitors.</span></span>

## <a name="how-to-create-a-blob-trigger"></a><span data-ttu-id="24977-129">如何创建 blob 触发器</span><span class="sxs-lookup"><span data-stu-id="24977-129">How to create a blob trigger</span></span>

<span data-ttu-id="24977-130">就像目前为止已看到的其他触发器一样, 我们在 Azure 门户中创建 blob 触发器。</span><span class="sxs-lookup"><span data-stu-id="24977-130">Just like the other triggers we've seen so far, we create a blob trigger in the Azure portal.</span></span> <span data-ttu-id="24977-131">在 Azure 函数中, 从预定义触发器类型列表中选择 " **Blob 触发器**"。</span><span class="sxs-lookup"><span data-stu-id="24977-131">Inside your Azure function, select **Blob trigger** from the list of predefined trigger types.</span></span> <span data-ttu-id="24977-132">然后, 输入创建或更新 blob 时要执行的逻辑。</span><span class="sxs-lookup"><span data-stu-id="24977-132">Then enter the logic to execute when a blob is created or updated.</span></span>

<span data-ttu-id="24977-133">您想要查看的一种设置是**路径**。</span><span class="sxs-lookup"><span data-stu-id="24977-133">One setting that you'll want to look at is the **Path**.</span></span> <span data-ttu-id="24977-134">**路径**将告知 blob 触发器, 以查看是否上载或更新 blob。</span><span class="sxs-lookup"><span data-stu-id="24977-134">The **Path** tells the blob trigger where to monitor to see if a blob is uploaded or updated.</span></span> <span data-ttu-id="24977-135">默认情况下,**路径**值为:</span><span class="sxs-lookup"><span data-stu-id="24977-135">By default, the **Path** value is:</span></span> 

> <span data-ttu-id="24977-136">示例-工作项/{名称}</span><span class="sxs-lookup"><span data-stu-id="24977-136">samples-workitems/{name}</span></span>

<span data-ttu-id="24977-137">让我们将此概念分解为两个部分:*示例-* 工作工作项和 *{名称}*。</span><span class="sxs-lookup"><span data-stu-id="24977-137">Let's break down this concept into two pieces: *samples-workitems* and *{name}*.</span></span> <span data-ttu-id="24977-138">第一部分 (*示例工作项*) 表示触发器监视的 blob 容器。</span><span class="sxs-lookup"><span data-stu-id="24977-138">The first part, *samples-workitems*, represents the blob container that the trigger monitors.</span></span> <span data-ttu-id="24977-139">第二部分 *{name}* 表示每种类型的文件都将导致触发器调用函数。</span><span class="sxs-lookup"><span data-stu-id="24977-139">The second part, *{name}* means that every type of file will cause the trigger to invoke the function.</span></span> <span data-ttu-id="24977-140">由于没有筛选器, 将调用函数。</span><span class="sxs-lookup"><span data-stu-id="24977-140">The function is invoked because there's no filter.</span></span> <span data-ttu-id="24977-141">例如, 我可以让触发器仅在使用以下语法添加 PNG 文件时才调用函数:</span><span class="sxs-lookup"><span data-stu-id="24977-141">For example, I could make the trigger invoke the function only when a PNG file is added by using syntax like:</span></span>

> <span data-ttu-id="24977-142">示例-工作项/{名称} .png</span><span class="sxs-lookup"><span data-stu-id="24977-142">samples-workitems/{name}.png</span></span>

<span data-ttu-id="24977-143">此概念的最后一条重要信息是文本*名称*。</span><span class="sxs-lookup"><span data-stu-id="24977-143">The last significant piece of information with this concept is the text *name*.</span></span> <span data-ttu-id="24977-144">*名称*表示 Azure 函数中的一个参数, 该参数接收添加的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="24977-144">The *name* represents a parameter in your Azure function that receives the name of the added file.</span></span> <span data-ttu-id="24977-145">例如, 如果我上载了一个名为*resume*的文件, 我的 Azure 函数通过名为*name*的参数以字符串的形式接收该值。</span><span class="sxs-lookup"><span data-stu-id="24977-145">For example, if I upload a file named *resume.txt*, my Azure function receives that value as a string through a parameter called *name*.</span></span>

<span data-ttu-id="24977-146">blob 触发器在查看 azure 存储 blob 帐户中特定位置的活动时调用 azure 函数。</span><span class="sxs-lookup"><span data-stu-id="24977-146">A blob trigger invokes an Azure function when it sees activity at a specific location in your Azure Storage blob account.</span></span> <span data-ttu-id="24977-147">您可以通过在 Azure 门户中修改**路径**值来设置要监视的位置。</span><span class="sxs-lookup"><span data-stu-id="24977-147">You set the location to monitor by modifying the **Path** value in the Azure portal.</span></span>