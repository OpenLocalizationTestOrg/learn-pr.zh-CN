假设你是一只摄影师, 你有一个网站, 你可以在其中显示一天的照片。 由于您正忙, 您没有一致的上载计划, 但您希望在上载图片时通知风扇。 您决定创建一个 azure 函数, 以便在将图像上传到 Azure 存储 blob 容器时自动发送 twitter。

在这里, 你将了解如何创建 blob 触发器并指示它监视 Azure 存储 blob 容器中的特定位置。

## <a name="what-is-azure-storage"></a>什么是 Azure 存储？

Azure 存储是 Microsoft 的云存储解决方案, 它支持所有类型的数据, 包括: blob、队列和 NoSQL。 Azure 存储的目标是提供的数据存储:

- 高可用性
- 安全
- 可调
- 托管

我们不打算将重点放在 Azure 存储太多。 相反, 我们使用它来创建将触发函数运行的 blob。

## <a name="what-is-azure-blob-storage"></a>什么是 Azure Blob 存储？

Azure Blob 存储是一个用于存储大量非结构化数据的对象存储解决方案。 

例如, Azure Blob 存储在执行操作时非常有用:

- 存储文件
- 服务文件
- 流式处理视频和音频
- 日志记录数据

有三种类型的 blob:**块 blob**、**附加 blob**和**页面 blob**。 块 blob 是最常见的类型。 它们允许您高效存储文本或二进制数据。 append blob 与块 blob 类似, 但它们的设计更多的追加操作, 如创建不断更新的日志文件。 最后, 页面 blob 由页面组成, 旨在频繁进行随机读取和写入操作。

## <a name="what-is-a-blob-trigger"></a>什么是 blob 触发器？

blob 触发器是在 Azure blob 存储中上传或更新文件时执行函数的触发器。 若要创建 blob 触发器, 请创建 Azure 存储帐户并提供触发器监视的位置。

## <a name="how-to-create-a-blob-trigger"></a>如何创建 blob 触发器

就像目前为止已看到的其他触发器一样, 我们在 Azure 门户中创建 blob 触发器。 在 Azure 函数中, 从预定义触发器类型列表中选择 " **Blob 触发器**"。 然后, 输入创建或更新 blob 时要执行的逻辑。

您想要查看的一种设置是**路径**。 **路径**将告知 blob 触发器, 以查看是否上载或更新 blob。 默认情况下,**路径**值为: 

> 示例-工作项/{名称}

让我们将此概念分解为两个部分:*示例-* 工作工作项和 *{名称}*。 第一部分 (*示例工作项*) 表示触发器监视的 blob 容器。 第二部分 *{name}* 表示每种类型的文件都将导致触发器调用函数。 由于没有筛选器, 将调用函数。 例如, 我可以让触发器仅在使用以下语法添加 PNG 文件时才调用函数:

> 示例-工作项/{名称} .png

此概念的最后一条重要信息是文本*名称*。 *名称*表示 Azure 函数中的一个参数, 该参数接收添加的文件的名称。 例如, 如果我上载了一个名为*resume*的文件, 我的 Azure 函数通过名为*name*的参数以字符串的形式接收该值。

blob 触发器在查看 azure 存储 blob 帐户中特定位置的活动时调用 azure 函数。 您可以通过在 Azure 门户中修改**路径**值来设置要监视的位置。