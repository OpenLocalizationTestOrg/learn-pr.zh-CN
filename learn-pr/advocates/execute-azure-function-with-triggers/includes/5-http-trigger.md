HTTP 请求是对大多数平台和设备的常见操作。 无论是请求查找字典中的单词还是要获取本地天气, 我们都会始终发送 HTTP 请求。 通过 Azure 函数, 我们可以在收到 HTTP 请求时快速创建要执行的一段逻辑。

在这里, 你将了解如何使用 HTTP 触发器创建和调用 Azure 函数。 您还将浏览一些可用的自定义选项。

## <a name="what-is-an-http-trigger"></a>什么是 HTTP 触发器？

HTTP 触发器是在接收到 HTTP 请求时执行函数的触发器。 HTTP 触发器具有许多功能和自定义项, 包括:

- 通过提供密钥提供授权访问。
- 限制受支持的 HTTP 谓词。
- 将数据返回回调用方。
- 通过查询字符串参数或通过请求正文接收数据。
- 支持 url 路由模板以修改函数 URL。

创建 HTTP 触发器时, 请选择一种编程语言, 提供触发器名称, 然后选择一个授权级别。

## <a name="what-is-an-http-trigger-authorization-level"></a>什么是 HTTP 触发器授权级别？

HTTP trigger 授权级别是一个标志, 指示传入的 HTTP 请求是否需要 API 密钥进行身份验证的原因。

有三个授权级别:

1. 函数
2. Anonymous
3. Admin

**函数**和**管理员**级别是基于 "键" 的。 若要发送 HTTP 请求, 您必须提供用于身份验证的密钥。 有两种类型的键: *function*和*host*。 这两个键的区别在于它们的作用域。 函数键是特定于函数的。 主机键适用于函数应用程序内的所有函数。 如果您的授权级别设置为 "**功能**", 则可以使用*函数*或主机键。 如果您的授权级别设置为 "**管理员**", 则必须提供主机密钥。

**匿名**级别表示不需要进行身份验证。 我们在我们的练习中使用此级别。

## <a name="how-to-create-an-http-trigger"></a>如何创建 HTTP 触发器

就像计时器触发器一样, 可以通过 Azure 门户创建 HTTP 触发器。 在 Azure 函数中, 从预定义触发器类型列表中选择 " **HTTP 触发器**"。 然后, 输入要执行的逻辑并进行任何自定义, 如限制特定 HTTP 谓词的使用。

需要了解的一项设置是**请求参数名称**。 此设置是一个字符串, 表示包含有关传入的 HTTP 请求的信息的参数的名称。 默认情况下, 参数的名称是*必需*的。

## <a name="how-to-invoke-an-http-trigger"></a>如何调用 HTTP 触发器

若要调用 http 触发器, 请将 http 请求发送到函数的 URL。 若要获取此 URL, 请转到函数的代码页, 并选择 "**获取函数 URL** " 链接。

![显示功能的应用程序边栏突出显示了应用程序的 Get 函数 URL 按钮的 Azure 门户屏幕截图。](../media/5-function-url.png)

拥有函数的 URL 后, 可以发送 HTTP 请求。 如果您的函数接收数据, 请记住, 可以使用查询字符串参数, 也可以通过请求正文提供数据。

http 触发器在向其函数 URL 收到 http 请求时调用 Azure 函数。 HTTP 触发器允许您接收数据并将数据返回回调用方。