<span data-ttu-id="54211-101">HTTP 请求是对大多数平台和设备的常见操作。</span><span class="sxs-lookup"><span data-stu-id="54211-101">An HTTP request is a common operation on most platforms and devices.</span></span> <span data-ttu-id="54211-102">无论是请求查找字典中的单词还是要获取本地天气, 我们都会始终发送 HTTP 请求。</span><span class="sxs-lookup"><span data-stu-id="54211-102">Whether it's a request to look up a word in a dictionary or to get the local weather, we send HTTP requests all the time.</span></span> <span data-ttu-id="54211-103">通过 Azure 函数, 我们可以在收到 HTTP 请求时快速创建要执行的一段逻辑。</span><span class="sxs-lookup"><span data-stu-id="54211-103">Azure Functions allows us to quickly create a piece of logic to execute when an HTTP request is received.</span></span>

<span data-ttu-id="54211-104">在这里, 你将了解如何使用 HTTP 触发器创建和调用 Azure 函数。</span><span class="sxs-lookup"><span data-stu-id="54211-104">Here, you'll learn how to create and invoke an Azure function using an HTTP trigger.</span></span> <span data-ttu-id="54211-105">您还将浏览一些可用的自定义选项。</span><span class="sxs-lookup"><span data-stu-id="54211-105">You'll also explore some of the customization options that are available.</span></span>

## <a name="what-is-an-http-trigger"></a><span data-ttu-id="54211-106">什么是 HTTP 触发器？</span><span class="sxs-lookup"><span data-stu-id="54211-106">What is an HTTP trigger?</span></span>

<span data-ttu-id="54211-107">HTTP 触发器是在接收到 HTTP 请求时执行函数的触发器。</span><span class="sxs-lookup"><span data-stu-id="54211-107">An HTTP trigger is a trigger that executes a function when it receives an HTTP request.</span></span> <span data-ttu-id="54211-108">HTTP 触发器具有许多功能和自定义项, 包括:</span><span class="sxs-lookup"><span data-stu-id="54211-108">HTTP triggers have many capabilities and customizations, including:</span></span>

- <span data-ttu-id="54211-109">通过提供密钥提供授权访问。</span><span class="sxs-lookup"><span data-stu-id="54211-109">Provide authorized access by supplying keys.</span></span>
- <span data-ttu-id="54211-110">限制受支持的 HTTP 谓词。</span><span class="sxs-lookup"><span data-stu-id="54211-110">Restrict which HTTP verbs are supported.</span></span>
- <span data-ttu-id="54211-111">将数据返回回调用方。</span><span class="sxs-lookup"><span data-stu-id="54211-111">Return data back to the caller.</span></span>
- <span data-ttu-id="54211-112">通过查询字符串参数或通过请求正文接收数据。</span><span class="sxs-lookup"><span data-stu-id="54211-112">Receive data through query string parameters or through the request body.</span></span>
- <span data-ttu-id="54211-113">支持 url 路由模板以修改函数 URL。</span><span class="sxs-lookup"><span data-stu-id="54211-113">Support URL route templates to modify the function URL.</span></span>

<span data-ttu-id="54211-114">创建 HTTP 触发器时, 请选择一种编程语言, 提供触发器名称, 然后选择一个授权级别。</span><span class="sxs-lookup"><span data-stu-id="54211-114">When you create an HTTP trigger, select a programming language, provide a trigger name, and select an Authorization level.</span></span>

## <a name="what-is-an-http-trigger-authorization-level"></a><span data-ttu-id="54211-115">什么是 HTTP 触发器授权级别？</span><span class="sxs-lookup"><span data-stu-id="54211-115">What is an HTTP trigger Authorization level?</span></span>

<span data-ttu-id="54211-116">HTTP trigger 授权级别是一个标志, 指示传入的 HTTP 请求是否需要 API 密钥进行身份验证的原因。</span><span class="sxs-lookup"><span data-stu-id="54211-116">An HTTP trigger Authorization level is a flag that indicates if an incoming HTTP request needs an API key for authentication reasons.</span></span>

<span data-ttu-id="54211-117">有三个授权级别:</span><span class="sxs-lookup"><span data-stu-id="54211-117">There are three Authorization levels:</span></span>

1. <span data-ttu-id="54211-118">函数</span><span class="sxs-lookup"><span data-stu-id="54211-118">Function</span></span>
2. <span data-ttu-id="54211-119">Anonymous</span><span class="sxs-lookup"><span data-stu-id="54211-119">Anonymous</span></span>
3. <span data-ttu-id="54211-120">Admin</span><span class="sxs-lookup"><span data-stu-id="54211-120">Admin</span></span>

<span data-ttu-id="54211-121">**函数**和**管理员**级别是基于 "键" 的。</span><span class="sxs-lookup"><span data-stu-id="54211-121">The **Function** and **Admin** levels are "key" based.</span></span> <span data-ttu-id="54211-122">若要发送 HTTP 请求, 您必须提供用于身份验证的密钥。</span><span class="sxs-lookup"><span data-stu-id="54211-122">To send an HTTP request, you must supply a key for authentication.</span></span> <span data-ttu-id="54211-123">有两种类型的键: *function*和*host*。</span><span class="sxs-lookup"><span data-stu-id="54211-123">There are two types of keys: *function* and *host*.</span></span> <span data-ttu-id="54211-124">这两个键的区别在于它们的作用域。</span><span class="sxs-lookup"><span data-stu-id="54211-124">The difference between the two keys is their scope.</span></span> <span data-ttu-id="54211-125">函数键是特定于函数的。</span><span class="sxs-lookup"><span data-stu-id="54211-125">Function keys are specific to a function.</span></span> <span data-ttu-id="54211-126">主机键适用于函数应用程序内的所有函数。</span><span class="sxs-lookup"><span data-stu-id="54211-126">Host keys apply to all functions inside the function app.</span></span> <span data-ttu-id="54211-127">如果您的授权级别设置为 "**功能**", 则可以使用*函数*或主机键。</span><span class="sxs-lookup"><span data-stu-id="54211-127">If your Authorization level is set to **Function**, you can use either a *function* or a host key.</span></span> <span data-ttu-id="54211-128">如果您的授权级别设置为 "**管理员**", 则必须提供主机密钥。</span><span class="sxs-lookup"><span data-stu-id="54211-128">If your Authorization level is set to **Admin**, you must supply a host key.</span></span>

<span data-ttu-id="54211-129">**匿名**级别表示不需要进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="54211-129">The **Anonymous** level means that there's no authentication required.</span></span> <span data-ttu-id="54211-130">我们在我们的练习中使用此级别。</span><span class="sxs-lookup"><span data-stu-id="54211-130">We use this level in our exercise.</span></span>

## <a name="how-to-create-an-http-trigger"></a><span data-ttu-id="54211-131">如何创建 HTTP 触发器</span><span class="sxs-lookup"><span data-stu-id="54211-131">How to create an HTTP trigger</span></span>

<span data-ttu-id="54211-132">就像计时器触发器一样, 可以通过 Azure 门户创建 HTTP 触发器。</span><span class="sxs-lookup"><span data-stu-id="54211-132">Just like a timer trigger, you can create an HTTP trigger through the Azure portal.</span></span> <span data-ttu-id="54211-133">在 Azure 函数中, 从预定义触发器类型列表中选择 " **HTTP 触发器**"。</span><span class="sxs-lookup"><span data-stu-id="54211-133">Inside your Azure function, you select **HTTP trigger** from the list of predefined trigger types.</span></span> <span data-ttu-id="54211-134">然后, 输入要执行的逻辑并进行任何自定义, 如限制特定 HTTP 谓词的使用。</span><span class="sxs-lookup"><span data-stu-id="54211-134">Then you enter the logic that you want to execute and make any customizations like restricting the use of certain HTTP verbs.</span></span>

<span data-ttu-id="54211-135">需要了解的一项设置是**请求参数名称**。</span><span class="sxs-lookup"><span data-stu-id="54211-135">One setting that's important to understand is **Request parameter name**.</span></span> <span data-ttu-id="54211-136">此设置是一个字符串, 表示包含有关传入的 HTTP 请求的信息的参数的名称。</span><span class="sxs-lookup"><span data-stu-id="54211-136">This setting is a string that represents the name of the parameter that contains the information about an incoming HTTP request.</span></span> <span data-ttu-id="54211-137">默认情况下, 参数的名称是*必需*的。</span><span class="sxs-lookup"><span data-stu-id="54211-137">By default, the name of the parameter is *req*.</span></span>

## <a name="how-to-invoke-an-http-trigger"></a><span data-ttu-id="54211-138">如何调用 HTTP 触发器</span><span class="sxs-lookup"><span data-stu-id="54211-138">How to invoke an HTTP trigger</span></span>

<span data-ttu-id="54211-139">若要调用 http 触发器, 请将 http 请求发送到函数的 URL。</span><span class="sxs-lookup"><span data-stu-id="54211-139">To invoke an HTTP trigger, you send an HTTP request to the URL for your function.</span></span> <span data-ttu-id="54211-140">若要获取此 URL, 请转到函数的代码页, 并选择 "**获取函数 URL** " 链接。</span><span class="sxs-lookup"><span data-stu-id="54211-140">To get this URL, go to the code page for your function and select the **Get function URL** link.</span></span>

![显示功能的应用程序边栏突出显示了应用程序的 Get 函数 URL 按钮的 Azure 门户屏幕截图。](../media/5-function-url.png)

<span data-ttu-id="54211-142">拥有函数的 URL 后, 可以发送 HTTP 请求。</span><span class="sxs-lookup"><span data-stu-id="54211-142">After you have the URL for your function, you can send HTTP requests.</span></span> <span data-ttu-id="54211-143">如果您的函数接收数据, 请记住, 可以使用查询字符串参数, 也可以通过请求正文提供数据。</span><span class="sxs-lookup"><span data-stu-id="54211-143">If your function receives data, remember that you can use either query string parameters or supply the data through the request body.</span></span>

<span data-ttu-id="54211-144">http 触发器在向其函数 URL 收到 http 请求时调用 Azure 函数。</span><span class="sxs-lookup"><span data-stu-id="54211-144">An HTTP trigger invokes an Azure function when it receives an HTTP request to its function URL.</span></span> <span data-ttu-id="54211-145">HTTP 触发器允许您接收数据并将数据返回回调用方。</span><span class="sxs-lookup"><span data-stu-id="54211-145">HTTP triggers allow you to receive data and return data back to the caller.</span></span>